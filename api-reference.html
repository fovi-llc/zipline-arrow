
<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>API &#8212; Zipline 3.0 docs</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'api-reference';</script>
    <link rel="icon" href="_static/zipline.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Releases" href="releases.html" />
    <link rel="prev" title="Development" href="development-guidelines.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
    <span class="fa-solid fa-bars"></span>
  </label>
  
  <div class="navbar-header-items__start">
    
      <div class="navbar-item">
  

<a class="navbar-brand logo" href="index.html">
  
  
  
  
  
    <p class="title logo__title">Zipline 3.0 docs</p>
  
</a></div>
    
  </div>
  
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="install.html">
                        Installation
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="beginner-tutorial.html">
                        Tutorial
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="bundles.html">
                        Data
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="trading-calendars.html">
                        Calendars
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="risk-and-perf-metrics.html">
                        Metrics
                      </a>
                    </li>
                
            <div class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    More
                </button>
                <div class="dropdown-menu">
                    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="development-guidelines.html">
                        Development
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="#">
                        API
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="releases.html">
                        Releases
                      </a>
                    </li>
                

                <li class="nav-item">
                  <a class="nav-link nav-external" href="https://ml4trading.io">
                    ML for Trading
                  </a>
                </li>
                

                <li class="nav-item">
                  <a class="nav-link nav-external" href="https://exchange.ml4trading.io">
                    Community
                  </a>
                </li>
                
                </div>
            </div>
            
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          
<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
        </div>
      
      
        <div class="navbar-item">
<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/stefan-jansen/zipline-reloaded" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://twitter.com/ml4trading" title="Twitter" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-twitter"></i></span>
            <label class="sr-only">Twitter</label></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">
<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
    </div>
  

  
    <label class="sidebar-toggle secondary-toggle" for="__secondary">
      <span class="fa-solid fa-outdent"></span>
    </label>
  
</div>

    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar hide-on-wide">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="install.html">
                        Installation
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="beginner-tutorial.html">
                        Tutorial
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="bundles.html">
                        Data
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="trading-calendars.html">
                        Calendars
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="risk-and-perf-metrics.html">
                        Metrics
                      </a>
                    </li>
                
            <div class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    More
                </button>
                <div class="dropdown-menu">
                    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="development-guidelines.html">
                        Development
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="#">
                        API
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="releases.html">
                        Releases
                      </a>
                    </li>
                

                <li class="nav-item">
                  <a class="nav-link nav-external" href="https://ml4trading.io">
                    ML for Trading
                  </a>
                </li>
                

                <li class="nav-item">
                  <a class="nav-link nav-external" href="https://exchange.ml4trading.io">
                    Community
                  </a>
                </li>
                
                </div>
            </div>
            
  </ul>
</nav></div>
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">
<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/stefan-jansen/zipline-reloaded" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://twitter.com/ml4trading" title="Twitter" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-twitter"></i></span>
            <label class="sr-only">Twitter</label></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumbs">
  <ul class="bd-breadcrumbs" role="navigation" aria-label="Breadcrumb">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    <li class="breadcrumb-item active" aria-current="page">API</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section id="api">
<span id="api-reference"></span><h1>API<a class="headerlink" href="#api" title="Permalink to this heading">#</a></h1>
<section id="running-a-backtest">
<h2>Running a Backtest<a class="headerlink" href="#running-a-backtest" title="Permalink to this heading">#</a></h2>
<p>The function <a class="reference internal" href="#zipline.run_algorithm" title="zipline.run_algorithm"><code class="xref py py-func docutils literal notranslate"><span class="pre">run_algorithm()</span></code></a> creates an instance of
<code class="xref py py-class docutils literal notranslate"><span class="pre">TradingAlgorithm</span></code> that represents a
trading strategy and parameters to execute the strategy.</p>
<dl class="py function">
<dt class="sig sig-object py" id="zipline.run_algorithm">
<span class="sig-prename descclassname"><span class="pre">zipline.</span></span><span class="sig-name descname"><span class="pre">run_algorithm</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">...</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/utils/run_algo.html#run_algorithm"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.run_algorithm" title="Permalink to this definition">#</a></dt>
<dd><p>Run a trading algorithm.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>start</strong> (<em>datetime</em>) – The start date of the backtest.</p></li>
<li><p><strong>end</strong> (<em>datetime</em>) – The end date of the backtest..</p></li>
<li><p><strong>initialize</strong> (<em>callable</em><em>[</em><em>context -&gt; None</em><em>]</em>) – The initialize function to use for the algorithm. This is called once
at the very begining of the backtest and should be used to set up
any state needed by the algorithm.</p></li>
<li><p><strong>capital_base</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – The starting capital for the backtest.</p></li>
<li><p><strong>handle_data</strong> (<em>callable</em><em>[</em><em>(</em><em>context</em><em>, </em><a class="reference internal" href="#zipline.protocol.BarData" title="zipline.protocol.BarData"><em>BarData</em></a><em>) </em><em>-&gt; None</em><em>]</em><em>, </em><em>optional</em>) – The handle_data function to use for the algorithm. This is called
every minute when <code class="docutils literal notranslate"><span class="pre">data_frequency</span> <span class="pre">==</span> <span class="pre">'minute'</span></code> or every day
when <code class="docutils literal notranslate"><span class="pre">data_frequency</span> <span class="pre">==</span> <span class="pre">'daily'</span></code>.</p></li>
<li><p><strong>before_trading_start</strong> (<em>callable</em><em>[</em><em>(</em><em>context</em><em>, </em><a class="reference internal" href="#zipline.protocol.BarData" title="zipline.protocol.BarData"><em>BarData</em></a><em>) </em><em>-&gt; None</em><em>]</em><em>, </em><em>optional</em>) – The before_trading_start function for the algorithm. This is called
once before each trading day (after initialize on the first day).</p></li>
<li><p><strong>analyze</strong> (<em>callable</em><em>[</em><em>(</em><em>context</em><em>, </em><em>pd.DataFrame</em><em>) </em><em>-&gt; None</em><em>]</em><em>, </em><em>optional</em>) – The analyze function to use for the algorithm. This function is called
once at the end of the backtest and is passed the context and the
performance data.</p></li>
<li><p><strong>data_frequency</strong> (<em>{'daily'</em><em>, </em><em>'minute'}</em><em>, </em><em>optional</em>) – The data frequency to run the algorithm at.</p></li>
<li><p><strong>bundle</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>optional</em>) – The name of the data bundle to use to load the data to run the backtest
with. This defaults to ‘quantopian-quandl’.</p></li>
<li><p><strong>bundle_timestamp</strong> (<em>datetime</em><em>, </em><em>optional</em>) – The datetime to lookup the bundle data for. This defaults to the
current time.</p></li>
<li><p><strong>trading_calendar</strong> (<em>TradingCalendar</em><em>, </em><em>optional</em>) – The trading calendar to use for your backtest.</p></li>
<li><p><strong>metrics_set</strong> (<em>iterable</em><em>[</em><em>Metric</em><em>] or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>optional</em>) – The set of metrics to compute in the simulation. If a string is passed,
resolve the set with <a class="reference internal" href="#zipline.finance.metrics.load" title="zipline.finance.metrics.load"><code class="xref py py-func docutils literal notranslate"><span class="pre">zipline.finance.metrics.load()</span></code></a>.</p></li>
<li><p><strong>benchmark_returns</strong> (<em>pd.Series</em><em>, </em><em>optional</em>) – Series of returns to use as the benchmark.</p></li>
<li><p><strong>default_extension</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><em>optional</em>) – Should the default zipline extension be loaded. This is found at
<code class="docutils literal notranslate"><span class="pre">$ZIPLINE_ROOT/extension.py</span></code></p></li>
<li><p><strong>extensions</strong> (<em>iterable</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>]</em><em>, </em><em>optional</em>) – The names of any other extensions to load. Each element may either be
a dotted module path like <code class="docutils literal notranslate"><span class="pre">a.b.c</span></code> or a path to a python file ending
in <code class="docutils literal notranslate"><span class="pre">.py</span></code> like <code class="docutils literal notranslate"><span class="pre">a/b/c.py</span></code>.</p></li>
<li><p><strong>strict_extensions</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><em>optional</em>) – Should the run fail if any extensions fail to load. If this is false,
a warning will be raised instead.</p></li>
<li><p><strong>environ</strong> (<em>mapping</em><em>[</em><em>str -&gt; str</em><em>]</em><em>, </em><em>optional</em>) – The os environment to use. Many extensions use this to get parameters.
This defaults to <code class="docutils literal notranslate"><span class="pre">os.environ</span></code>.</p></li>
<li><p><strong>blotter</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em> or </em><em>zipline.finance.blotter.Blotter</em><em>, </em><em>optional</em>) – Blotter to use with this algorithm. If passed as a string, we look for
a blotter construction function registered with
<code class="docutils literal notranslate"><span class="pre">zipline.extensions.register</span></code> and call it with no parameters.
Default is a <a class="reference internal" href="#zipline.finance.blotter.SimulationBlotter" title="zipline.finance.blotter.SimulationBlotter"><code class="xref py py-class docutils literal notranslate"><span class="pre">zipline.finance.blotter.SimulationBlotter</span></code></a> that
never cancels orders.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>perf</strong> – The daily performance of the algorithm.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pd.DataFrame</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="#zipline.data.bundles.bundles" title="zipline.data.bundles.bundles"><code class="xref py py-obj docutils literal notranslate"><span class="pre">zipline.data.bundles.bundles</span></code></a></dt><dd><p>The available data bundles.</p>
</dd>
</dl>
</div>
</dd></dl>

</section>
<section id="trading-algorithm-api">
<h2>Trading Algorithm API<a class="headerlink" href="#trading-algorithm-api" title="Permalink to this heading">#</a></h2>
<p>The following methods are available for use in the <code class="docutils literal notranslate"><span class="pre">initialize</span></code>,
<code class="docutils literal notranslate"><span class="pre">handle_data</span></code>, and <code class="docutils literal notranslate"><span class="pre">before_trading_start</span></code> API functions.</p>
<p>In all listed functions, the <code class="docutils literal notranslate"><span class="pre">self</span></code> argument refers to the
currently executing <code class="xref py py-class docutils literal notranslate"><span class="pre">TradingAlgorithm</span></code> instance.</p>
<section id="data-object">
<h3>Data Object<a class="headerlink" href="#data-object" title="Permalink to this heading">#</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="zipline.protocol.BarData">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.protocol.</span></span><span class="sig-name descname"><span class="pre">BarData</span></span><a class="headerlink" href="#zipline.protocol.BarData" title="Permalink to this definition">#</a></dt>
<dd><p>Provides methods for accessing minutely and daily price/volume data from
Algorithm API functions.</p>
<p>Also provides utility methods to determine if an asset is alive, and if it
has recent trade data.</p>
<p>An instance of this object is passed as <code class="docutils literal notranslate"><span class="pre">data</span></code> to
<code class="xref py py-func docutils literal notranslate"><span class="pre">handle_data()</span></code> and
<code class="xref py py-func docutils literal notranslate"><span class="pre">before_trading_start()</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data_portal</strong> (<a class="reference internal" href="#zipline.data.data_portal.DataPortal" title="zipline.data.data_portal.DataPortal"><em>DataPortal</em></a>) – Provider for bar pricing data.</p></li>
<li><p><strong>simulation_dt_func</strong> (<em>callable</em>) – Function which returns the current simulation time.
This is usually bound to a method of TradingSimulation.</p></li>
<li><p><strong>data_frequency</strong> (<em>{'minute'</em><em>, </em><em>'daily'}</em>) – The frequency of the bar data; i.e. whether the data is
daily or minute bars</p></li>
<li><p><strong>restrictions</strong> (<em>zipline.finance.asset_restrictions.Restrictions</em>) – Object that combines and returns restricted list information from
multiple sources</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="zipline.protocol.BarData.can_trade">
<span class="sig-name descname"><span class="pre">can_trade</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zipline.protocol.BarData.can_trade" title="Permalink to this definition">#</a></dt>
<dd><p>For the given asset or iterable of assets, returns True if all of the
following are true:</p>
<ol class="arabic simple">
<li><p>The asset is alive for the session of the current simulation time
(if current simulation time is not a market minute, we use the next
session).</p></li>
<li><p>The asset’s exchange is open at the current simulation time or at
the simulation calendar’s next market minute.</p></li>
<li><p>There is a known last price for the asset.</p></li>
</ol>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>assets</strong> (<a class="reference internal" href="#zipline.assets.Asset" title="zipline.assets.Asset"><em>zipline.assets.Asset</em></a><em> or </em><em>iterable</em><em> of </em><a class="reference internal" href="#zipline.assets.Asset" title="zipline.assets.Asset"><em>zipline.assets.Asset</em></a>) – Asset(s) for which tradability should be determined.</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>The second condition above warrants some further explanation:</p>
<ul class="simple">
<li><p>If the asset’s exchange calendar is identical to the simulation
calendar, then this condition always returns True.</p></li>
<li><p>If there are market minutes in the simulation calendar outside of
this asset’s exchange’s trading hours (for example, if the simulation
is running on the CMES calendar but the asset is MSFT, which trades
on the NYSE), during those minutes, this condition will return False
(for example, 3:15 am Eastern on a weekday, during which the CMES is
open but the NYSE is closed).</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>can_trade</strong> – Bool or series of bools indicating whether the requested asset(s)
can be traded in the current minute.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)">bool</a> or pd.Series[<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)">bool</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.protocol.BarData.current">
<span class="sig-name descname"><span class="pre">current</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zipline.protocol.BarData.current" title="Permalink to this definition">#</a></dt>
<dd><p>Returns the “current” value of the given fields for the given assets
at the current simulation time.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>assets</strong> (<a class="reference internal" href="#zipline.assets.Asset" title="zipline.assets.Asset"><em>zipline.assets.Asset</em></a><em> or </em><em>iterable</em><em> of </em><a class="reference internal" href="#zipline.assets.Asset" title="zipline.assets.Asset"><em>zipline.assets.Asset</em></a>) – The asset(s) for which data is requested.</p></li>
<li><p><strong>fields</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em> or </em><em>iterable</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>]</em><em>.</em>) – Requested data field(s). Valid field names are: “price”,
“last_traded”, “open”, “high”, “low”, “close”, and “volume”.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>current_value</strong> – See notes below.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Scalar, pandas Series, or pandas DataFrame.</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>The return type of this function depends on the types of its inputs:</p>
<ul class="simple">
<li><p>If a single asset and a single field are requested, the returned
value is a scalar (either a float or a <code class="docutils literal notranslate"><span class="pre">pd.Timestamp</span></code> depending on
the field).</p></li>
<li><p>If a single asset and a list of fields are requested, the returned
value is a <code class="xref py py-class docutils literal notranslate"><span class="pre">pd.Series</span></code> whose indices are the requested fields.</p></li>
<li><p>If a list of assets and a single field are requested, the returned
value is a <code class="xref py py-class docutils literal notranslate"><span class="pre">pd.Series</span></code> whose indices are the assets.</p></li>
<li><p>If a list of assets and a list of fields are requested, the returned
value is a <code class="xref py py-class docutils literal notranslate"><span class="pre">pd.DataFrame</span></code>.  The columns of the returned frame
will be the requested fields, and the index of the frame will be the
requested assets.</p></li>
</ul>
<p>The values produced for <code class="docutils literal notranslate"><span class="pre">fields</span></code> are as follows:</p>
<ul class="simple">
<li><p>Requesting “price” produces the last known close price for the asset,
forward-filled from an earlier minute if there is no trade this
minute. If there is no last known value (either because the asset
has never traded, or because it has delisted) NaN is returned. If a
value is found, and we had to cross an adjustment boundary (split,
dividend, etc) to get it, the value is adjusted to the current
simulation time before being returned.</p></li>
<li><p>Requesting “open”, “high”, “low”, or “close” produces the open, high,
low, or close for the current minute. If no trades occurred this
minute, <code class="docutils literal notranslate"><span class="pre">NaN</span></code> is returned.</p></li>
<li><p>Requesting “volume” produces the trade volume for the current
minute. If no trades occurred this minute, 0 is returned.</p></li>
<li><p>Requesting “last_traded” produces the datetime of the last minute in
which the asset traded, even if the asset has stopped trading. If
there is no last known value, <code class="docutils literal notranslate"><span class="pre">pd.NaT</span></code> is returned.</p></li>
</ul>
<p>If the current simulation time is not a valid market time for an asset,
we use the most recent market close instead.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.protocol.BarData.history">
<span class="sig-name descname"><span class="pre">history</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zipline.protocol.BarData.history" title="Permalink to this definition">#</a></dt>
<dd><p>Returns a trailing window of length <code class="docutils literal notranslate"><span class="pre">bar_count</span></code> with data for
the given assets, fields, and frequency, adjusted for splits, dividends,
and mergers as of the current simulation time.</p>
<p>The semantics for missing data are identical to the ones described in
the notes for <a class="reference internal" href="#zipline.protocol.BarData.current" title="zipline.protocol.BarData.current"><code class="xref py py-meth docutils literal notranslate"><span class="pre">current()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>assets</strong> (<a class="reference internal" href="#zipline.assets.Asset" title="zipline.assets.Asset"><em>zipline.assets.Asset</em></a><em> or </em><em>iterable</em><em> of </em><a class="reference internal" href="#zipline.assets.Asset" title="zipline.assets.Asset"><em>zipline.assets.Asset</em></a>) – The asset(s) for which data is requested.</p></li>
<li><p><strong>fields</strong> (<em>string</em><em> or </em><em>iterable</em><em> of </em><em>string.</em>) – Requested data field(s). Valid field names are: “price”,
“last_traded”, “open”, “high”, “low”, “close”, and “volume”.</p></li>
<li><p><strong>bar_count</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – Number of data observations requested.</p></li>
<li><p><strong>frequency</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – String indicating whether to load daily or minutely data
observations. Pass ‘1m’ for minutely data, ‘1d’ for daily data.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>history</strong> – See notes below.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pd.Series or pd.DataFrame or pd.Panel</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>The return type of this function depends on the types of <code class="docutils literal notranslate"><span class="pre">assets</span></code> and
<code class="docutils literal notranslate"><span class="pre">fields</span></code>:</p>
<ul>
<li><p>If a single asset and a single field are requested, the returned
value is a <code class="xref py py-class docutils literal notranslate"><span class="pre">pd.Series</span></code> of length <code class="docutils literal notranslate"><span class="pre">bar_count</span></code> whose index is
<code class="xref py py-class docutils literal notranslate"><span class="pre">pd.DatetimeIndex</span></code>.</p></li>
<li><p>If a single asset and multiple fields are requested, the returned
value is a <code class="xref py py-class docutils literal notranslate"><span class="pre">pd.DataFrame</span></code> with shape
<code class="docutils literal notranslate"><span class="pre">(bar_count,</span> <span class="pre">len(fields))</span></code>. The frame’s index will be a
<code class="xref py py-class docutils literal notranslate"><span class="pre">pd.DatetimeIndex</span></code>, and its columns will be <code class="docutils literal notranslate"><span class="pre">fields</span></code>.</p></li>
<li><p>If multiple assets and a single field are requested, the returned
value is a <code class="xref py py-class docutils literal notranslate"><span class="pre">pd.DataFrame</span></code> with shape
<code class="docutils literal notranslate"><span class="pre">(bar_count,</span> <span class="pre">len(assets))</span></code>. The frame’s index will be a
<code class="xref py py-class docutils literal notranslate"><span class="pre">pd.DatetimeIndex</span></code>, and its columns will be <code class="docutils literal notranslate"><span class="pre">assets</span></code>.</p></li>
<li><p>If multiple assets and multiple fields are requested, the returned
value is a <code class="xref py py-class docutils literal notranslate"><span class="pre">pd.DataFrame</span></code> with a pd.MultiIndex containing
pairs of <code class="xref py py-class docutils literal notranslate"><span class="pre">pd.DatetimeIndex</span></code>, and <code class="docutils literal notranslate"><span class="pre">assets</span></code>, while the columns
while contain the field(s). It has shape <code class="docutils literal notranslate"><span class="pre">(bar_count</span> <span class="pre">*</span> <span class="pre">len(assets),</span>
<span class="pre">len(fields))</span></code>. The names of the pd.MultiIndex are</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">date</span></code> if frequency == ‘1d’`` or <code class="docutils literal notranslate"><span class="pre">date_time</span></code> if frequency == ‘1m``, and</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">asset</span></code></p></li>
</ul>
</div></blockquote>
</li>
</ul>
<p>If the current simulation time is not a valid market time, we use the last market close instead.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.protocol.BarData.is_stale">
<span class="sig-name descname"><span class="pre">is_stale</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zipline.protocol.BarData.is_stale" title="Permalink to this definition">#</a></dt>
<dd><p>For the given asset or iterable of assets, returns True if the asset
is alive and there is no trade data for the current simulation time.</p>
<p>If the asset has never traded, returns False.</p>
<p>If the current simulation time is not a valid market time, we use the
current time to check if the asset is alive, but we use the last
market minute/day for the trade data check.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>assets</strong> (<a class="reference internal" href="#zipline.assets.Asset" title="zipline.assets.Asset"><em>zipline.assets.Asset</em></a><em> or </em><em>iterable</em><em> of </em><a class="reference internal" href="#zipline.assets.Asset" title="zipline.assets.Asset"><em>zipline.assets.Asset</em></a>) – Asset(s) for which staleness should be determined.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>is_stale</strong> – Bool or series of bools indicating whether the requested asset(s)
are stale.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)">bool</a> or pd.Series[<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)">bool</a>]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="scheduling-functions">
<h3>Scheduling Functions<a class="headerlink" href="#scheduling-functions" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="zipline.api.schedule_function">
<span class="sig-prename descclassname"><span class="pre">zipline.api.</span></span><span class="sig-name descname"><span class="pre">schedule_function</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">func</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">date_rule</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_rule</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">half_days</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">calendar</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.api.schedule_function" title="Permalink to this definition">#</a></dt>
<dd><p>Schedule a function to be called repeatedly in the future.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>func</strong> (<em>callable</em>) – The function to execute when the rule is triggered. <code class="docutils literal notranslate"><span class="pre">func</span></code> should
have the same signature as <code class="docutils literal notranslate"><span class="pre">handle_data</span></code>.</p></li>
<li><p><strong>date_rule</strong> (<em>zipline.utils.events.EventRule</em><em>, </em><em>optional</em>) – Rule for the dates on which to execute <code class="docutils literal notranslate"><span class="pre">func</span></code>. If not
passed, the function will run every trading day.</p></li>
<li><p><strong>time_rule</strong> (<em>zipline.utils.events.EventRule</em><em>, </em><em>optional</em>) – Rule for the time at which to execute <code class="docutils literal notranslate"><span class="pre">func</span></code>. If not passed, the
function will execute at the end of the first market minute of the
day.</p></li>
<li><p><strong>half_days</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><em>optional</em>) – Should this rule fire on half days? Default is True.</p></li>
<li><p><strong>calendar</strong> (<em>Sentinel</em><em>, </em><em>optional</em>) – Calendar used to compute rules that depend on the trading calendar.</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#zipline.api.date_rules" title="zipline.api.date_rules"><code class="xref py py-class docutils literal notranslate"><span class="pre">zipline.api.date_rules</span></code></a>, <a class="reference internal" href="#zipline.api.time_rules" title="zipline.api.time_rules"><code class="xref py py-class docutils literal notranslate"><span class="pre">zipline.api.time_rules</span></code></a></p>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.api.date_rules">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.api.</span></span><span class="sig-name descname"><span class="pre">date_rules</span></span><a class="reference internal" href="_modules/zipline/utils/events.html#date_rules"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.api.date_rules" title="Permalink to this definition">#</a></dt>
<dd><p>Factories for date-based <a class="reference internal" href="#zipline.api.schedule_function" title="zipline.api.schedule_function"><code class="xref py py-func docutils literal notranslate"><span class="pre">schedule_function()</span></code></a> rules.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#zipline.api.schedule_function" title="zipline.api.schedule_function"><code class="xref py py-func docutils literal notranslate"><span class="pre">schedule_function()</span></code></a></p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="zipline.api.date_rules.every_day">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">every_day</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/utils/events.html#date_rules.every_day"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.api.date_rules.every_day" title="Permalink to this definition">#</a></dt>
<dd><p>Create a rule that triggers every day.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>rule</strong></p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>zipline.utils.events.EventRule</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.api.date_rules.month_end">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">month_end</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">days_offset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/utils/events.html#date_rules.month_end"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.api.date_rules.month_end" title="Permalink to this definition">#</a></dt>
<dd><p>Create a rule that triggers a fixed number of trading days before the
end of each month.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>days_offset</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>, </em><em>optional</em>) – Number of trading days prior to month end to trigger. Default is 0,
i.e., trigger on the last day of the month.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>rule</strong></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>zipline.utils.events.EventRule</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.api.date_rules.month_start">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">month_start</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">days_offset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/utils/events.html#date_rules.month_start"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.api.date_rules.month_start" title="Permalink to this definition">#</a></dt>
<dd><p>Create a rule that triggers a fixed number of trading days after the
start of each month.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>days_offset</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>, </em><em>optional</em>) – Number of trading days to wait before triggering each
month. Default is 0, i.e., trigger on the first trading day of the
month.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>rule</strong></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>zipline.utils.events.EventRule</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.api.date_rules.week_end">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">week_end</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">days_offset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/utils/events.html#date_rules.week_end"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.api.date_rules.week_end" title="Permalink to this definition">#</a></dt>
<dd><p>Create a rule that triggers a fixed number of trading days before the
end of each week.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>days_offset</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>, </em><em>optional</em>) – Number of trading days prior to week end to trigger. Default is 0,
i.e., trigger on the last trading day of the week.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.api.date_rules.week_start">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">week_start</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">days_offset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/utils/events.html#date_rules.week_start"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.api.date_rules.week_start" title="Permalink to this definition">#</a></dt>
<dd><p>Create a rule that triggers a fixed number of trading days after the
start of each week.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>days_offset</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>, </em><em>optional</em>) – Number of trading days to wait before triggering each week. Default
is 0, i.e., trigger on the first trading day of the week.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.api.time_rules">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.api.</span></span><span class="sig-name descname"><span class="pre">time_rules</span></span><a class="reference internal" href="_modules/zipline/utils/events.html#time_rules"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.api.time_rules" title="Permalink to this definition">#</a></dt>
<dd><p>Factories for time-based <a class="reference internal" href="#zipline.api.schedule_function" title="zipline.api.schedule_function"><code class="xref py py-func docutils literal notranslate"><span class="pre">schedule_function()</span></code></a> rules.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#zipline.api.schedule_function" title="zipline.api.schedule_function"><code class="xref py py-func docutils literal notranslate"><span class="pre">schedule_function()</span></code></a></p>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="zipline.api.time_rules.every_minute">
<span class="sig-name descname"><span class="pre">every_minute</span></span><a class="headerlink" href="#zipline.api.time_rules.every_minute" title="Permalink to this definition">#</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">Always</span></code></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.api.time_rules.market_close">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">market_close</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">offset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hours</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minutes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/utils/events.html#time_rules.market_close"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.api.time_rules.market_close" title="Permalink to this definition">#</a></dt>
<dd><p>Create a rule that triggers at a fixed offset from market close.</p>
<p>The offset can be specified either as a <a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.timedelta" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime.timedelta</span></code></a>, or
as a number of hours and minutes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>offset</strong> (<a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.timedelta" title="(in Python v3.11)"><em>datetime.timedelta</em></a><em>, </em><em>optional</em>) – If passed, the offset from market close at which to trigger. Must
be at least 1 minute.</p></li>
<li><p><strong>hours</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>, </em><em>optional</em>) – If passed, number of hours to wait before market close.</p></li>
<li><p><strong>minutes</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>, </em><em>optional</em>) – If passed, number of minutes to wait before market close.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>rule</strong></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>zipline.utils.events.EventRule</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>If no arguments are passed, the default offset is one minute before
market close.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">offset</span></code> is passed, <code class="docutils literal notranslate"><span class="pre">hours</span></code> and <code class="docutils literal notranslate"><span class="pre">minutes</span></code> must not be
passed. Conversely, if either <code class="docutils literal notranslate"><span class="pre">hours</span></code> or <code class="docutils literal notranslate"><span class="pre">minutes</span></code> are passed,
<code class="docutils literal notranslate"><span class="pre">offset</span></code> must not be passed.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.api.time_rules.market_open">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">market_open</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">offset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hours</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minutes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/utils/events.html#time_rules.market_open"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.api.time_rules.market_open" title="Permalink to this definition">#</a></dt>
<dd><p>Create a rule that triggers at a fixed offset from market open.</p>
<p>The offset can be specified either as a <a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.timedelta" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime.timedelta</span></code></a>, or
as a number of hours and minutes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>offset</strong> (<a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.timedelta" title="(in Python v3.11)"><em>datetime.timedelta</em></a><em>, </em><em>optional</em>) – If passed, the offset from market open at which to trigger. Must be
at least 1 minute.</p></li>
<li><p><strong>hours</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>, </em><em>optional</em>) – If passed, number of hours to wait after market open.</p></li>
<li><p><strong>minutes</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>, </em><em>optional</em>) – If passed, number of minutes to wait after market open.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>rule</strong></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>zipline.utils.events.EventRule</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>If no arguments are passed, the default offset is one minute after
market open.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">offset</span></code> is passed, <code class="docutils literal notranslate"><span class="pre">hours</span></code> and <code class="docutils literal notranslate"><span class="pre">minutes</span></code> must not be
passed. Conversely, if either <code class="docutils literal notranslate"><span class="pre">hours</span></code> or <code class="docutils literal notranslate"><span class="pre">minutes</span></code> are passed,
<code class="docutils literal notranslate"><span class="pre">offset</span></code> must not be passed.</p>
</dd></dl>

</dd></dl>

</section>
<section id="orders">
<h3>Orders<a class="headerlink" href="#orders" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="zipline.api.order">
<span class="sig-prename descclassname"><span class="pre">zipline.api.</span></span><span class="sig-name descname"><span class="pre">order</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">asset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">amount</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">limit_price</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stop_price</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">style</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.api.order" title="Permalink to this definition">#</a></dt>
<dd><p>Place an order for a fixed number of shares.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>asset</strong> (<a class="reference internal" href="#zipline.assets.Asset" title="zipline.assets.Asset"><em>Asset</em></a>) – The asset to be ordered.</p></li>
<li><p><strong>amount</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – The amount of shares to order. If <code class="docutils literal notranslate"><span class="pre">amount</span></code> is positive, this is
the number of shares to buy or cover. If <code class="docutils literal notranslate"><span class="pre">amount</span></code> is negative,
this is the number of shares to sell or short.</p></li>
<li><p><strong>limit_price</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>, </em><em>optional</em>) – The limit price for the order.</p></li>
<li><p><strong>stop_price</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>, </em><em>optional</em>) – The stop price for the order.</p></li>
<li><p><strong>style</strong> (<a class="reference internal" href="#zipline.finance.execution.ExecutionStyle" title="zipline.finance.execution.ExecutionStyle"><em>ExecutionStyle</em></a><em>, </em><em>optional</em>) – The execution style for the order.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>order_id</strong> – The unique identifier for this order, or None if no order was
placed.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a> or None</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>The <code class="docutils literal notranslate"><span class="pre">limit_price</span></code> and <code class="docutils literal notranslate"><span class="pre">stop_price</span></code> arguments provide shorthands for
passing common execution styles. Passing <code class="docutils literal notranslate"><span class="pre">limit_price=N</span></code> is
equivalent to <code class="docutils literal notranslate"><span class="pre">style=LimitOrder(N)</span></code>. Similarly, passing
<code class="docutils literal notranslate"><span class="pre">stop_price=M</span></code> is equivalent to <code class="docutils literal notranslate"><span class="pre">style=StopOrder(M)</span></code>, and passing
<code class="docutils literal notranslate"><span class="pre">limit_price=N</span></code> and <code class="docutils literal notranslate"><span class="pre">stop_price=M</span></code> is equivalent to
<code class="docutils literal notranslate"><span class="pre">style=StopLimitOrder(N,</span> <span class="pre">M)</span></code>. It is an error to pass both a <code class="docutils literal notranslate"><span class="pre">style</span></code>
and <code class="docutils literal notranslate"><span class="pre">limit_price</span></code> or <code class="docutils literal notranslate"><span class="pre">stop_price</span></code>.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#zipline.finance.execution.ExecutionStyle" title="zipline.finance.execution.ExecutionStyle"><code class="xref py py-class docutils literal notranslate"><span class="pre">zipline.finance.execution.ExecutionStyle</span></code></a>, <a class="reference internal" href="#zipline.api.order_value" title="zipline.api.order_value"><code class="xref py py-func docutils literal notranslate"><span class="pre">zipline.api.order_value()</span></code></a>, <a class="reference internal" href="#zipline.api.order_percent" title="zipline.api.order_percent"><code class="xref py py-func docutils literal notranslate"><span class="pre">zipline.api.order_percent()</span></code></a></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="zipline.api.order_value">
<span class="sig-prename descclassname"><span class="pre">zipline.api.</span></span><span class="sig-name descname"><span class="pre">order_value</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">asset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">limit_price</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stop_price</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">style</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.api.order_value" title="Permalink to this definition">#</a></dt>
<dd><p>Place an order for a fixed amount of money.</p>
<p>Equivalent to <code class="docutils literal notranslate"><span class="pre">order(asset,</span> <span class="pre">value</span> <span class="pre">/</span> <span class="pre">data.current(asset,</span> <span class="pre">'price'))</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>asset</strong> (<a class="reference internal" href="#zipline.assets.Asset" title="zipline.assets.Asset"><em>Asset</em></a>) – The asset to be ordered.</p></li>
<li><p><strong>value</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Amount of value of <code class="docutils literal notranslate"><span class="pre">asset</span></code> to be transacted. The number of shares
bought or sold will be equal to <code class="docutils literal notranslate"><span class="pre">value</span> <span class="pre">/</span> <span class="pre">current_price</span></code>.</p></li>
<li><p><strong>limit_price</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>, </em><em>optional</em>) – Limit price for the order.</p></li>
<li><p><strong>stop_price</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>, </em><em>optional</em>) – Stop price for the order.</p></li>
<li><p><strong>style</strong> (<a class="reference internal" href="#zipline.finance.execution.ExecutionStyle" title="zipline.finance.execution.ExecutionStyle"><em>ExecutionStyle</em></a>) – The execution style for the order.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>order_id</strong> – The unique identifier for this order.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a></p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>See <a class="reference internal" href="#zipline.api.order" title="zipline.api.order"><code class="xref py py-func docutils literal notranslate"><span class="pre">zipline.api.order()</span></code></a> for more information about
<code class="docutils literal notranslate"><span class="pre">limit_price</span></code>, <code class="docutils literal notranslate"><span class="pre">stop_price</span></code>, and <code class="docutils literal notranslate"><span class="pre">style</span></code></p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#zipline.finance.execution.ExecutionStyle" title="zipline.finance.execution.ExecutionStyle"><code class="xref py py-class docutils literal notranslate"><span class="pre">zipline.finance.execution.ExecutionStyle</span></code></a>, <a class="reference internal" href="#zipline.api.order" title="zipline.api.order"><code class="xref py py-func docutils literal notranslate"><span class="pre">zipline.api.order()</span></code></a>, <a class="reference internal" href="#zipline.api.order_percent" title="zipline.api.order_percent"><code class="xref py py-func docutils literal notranslate"><span class="pre">zipline.api.order_percent()</span></code></a></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="zipline.api.order_percent">
<span class="sig-prename descclassname"><span class="pre">zipline.api.</span></span><span class="sig-name descname"><span class="pre">order_percent</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">asset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">percent</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">limit_price</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stop_price</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">style</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.api.order_percent" title="Permalink to this definition">#</a></dt>
<dd><p>Place an order in the specified asset corresponding to the given
percent of the current portfolio value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>asset</strong> (<a class="reference internal" href="#zipline.assets.Asset" title="zipline.assets.Asset"><em>Asset</em></a>) – The asset that this order is for.</p></li>
<li><p><strong>percent</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – The percentage of the portfolio value to allocate to <code class="docutils literal notranslate"><span class="pre">asset</span></code>.
This is specified as a decimal, for example: 0.50 means 50%.</p></li>
<li><p><strong>limit_price</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>, </em><em>optional</em>) – The limit price for the order.</p></li>
<li><p><strong>stop_price</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>, </em><em>optional</em>) – The stop price for the order.</p></li>
<li><p><strong>style</strong> (<a class="reference internal" href="#zipline.finance.execution.ExecutionStyle" title="zipline.finance.execution.ExecutionStyle"><em>ExecutionStyle</em></a>) – The execution style for the order.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>order_id</strong> – The unique identifier for this order.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a></p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>See <a class="reference internal" href="#zipline.api.order" title="zipline.api.order"><code class="xref py py-func docutils literal notranslate"><span class="pre">zipline.api.order()</span></code></a> for more information about
<code class="docutils literal notranslate"><span class="pre">limit_price</span></code>, <code class="docutils literal notranslate"><span class="pre">stop_price</span></code>, and <code class="docutils literal notranslate"><span class="pre">style</span></code></p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#zipline.finance.execution.ExecutionStyle" title="zipline.finance.execution.ExecutionStyle"><code class="xref py py-class docutils literal notranslate"><span class="pre">zipline.finance.execution.ExecutionStyle</span></code></a>, <a class="reference internal" href="#zipline.api.order" title="zipline.api.order"><code class="xref py py-func docutils literal notranslate"><span class="pre">zipline.api.order()</span></code></a>, <a class="reference internal" href="#zipline.api.order_value" title="zipline.api.order_value"><code class="xref py py-func docutils literal notranslate"><span class="pre">zipline.api.order_value()</span></code></a></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="zipline.api.order_target">
<span class="sig-prename descclassname"><span class="pre">zipline.api.</span></span><span class="sig-name descname"><span class="pre">order_target</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">asset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">limit_price</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stop_price</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">style</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.api.order_target" title="Permalink to this definition">#</a></dt>
<dd><p>Place an order to adjust a position to a target number of shares. If
the position doesn’t already exist, this is equivalent to placing a new
order. If the position does exist, this is equivalent to placing an
order for the difference between the target number of shares and the
current number of shares.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>asset</strong> (<a class="reference internal" href="#zipline.assets.Asset" title="zipline.assets.Asset"><em>Asset</em></a>) – The asset that this order is for.</p></li>
<li><p><strong>target</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – The desired number of shares of <code class="docutils literal notranslate"><span class="pre">asset</span></code>.</p></li>
<li><p><strong>limit_price</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>, </em><em>optional</em>) – The limit price for the order.</p></li>
<li><p><strong>stop_price</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>, </em><em>optional</em>) – The stop price for the order.</p></li>
<li><p><strong>style</strong> (<a class="reference internal" href="#zipline.finance.execution.ExecutionStyle" title="zipline.finance.execution.ExecutionStyle"><em>ExecutionStyle</em></a>) – The execution style for the order.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>order_id</strong> – The unique identifier for this order.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a></p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p><code class="docutils literal notranslate"><span class="pre">order_target</span></code> does not take into account any open orders. For
example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">order_target</span><span class="p">(</span><span class="n">sid</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">order_target</span><span class="p">(</span><span class="n">sid</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<p>This code will result in 20 shares of <code class="docutils literal notranslate"><span class="pre">sid(0)</span></code> because the first
call to <code class="docutils literal notranslate"><span class="pre">order_target</span></code> will not have been filled when the second
<code class="docutils literal notranslate"><span class="pre">order_target</span></code> call is made.</p>
<p>See <a class="reference internal" href="#zipline.api.order" title="zipline.api.order"><code class="xref py py-func docutils literal notranslate"><span class="pre">zipline.api.order()</span></code></a> for more information about
<code class="docutils literal notranslate"><span class="pre">limit_price</span></code>, <code class="docutils literal notranslate"><span class="pre">stop_price</span></code>, and <code class="docutils literal notranslate"><span class="pre">style</span></code></p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#zipline.finance.execution.ExecutionStyle" title="zipline.finance.execution.ExecutionStyle"><code class="xref py py-class docutils literal notranslate"><span class="pre">zipline.finance.execution.ExecutionStyle</span></code></a>, <a class="reference internal" href="#zipline.api.order" title="zipline.api.order"><code class="xref py py-func docutils literal notranslate"><span class="pre">zipline.api.order()</span></code></a>, <a class="reference internal" href="#zipline.api.order_target_percent" title="zipline.api.order_target_percent"><code class="xref py py-func docutils literal notranslate"><span class="pre">zipline.api.order_target_percent()</span></code></a>, <a class="reference internal" href="#zipline.api.order_target_value" title="zipline.api.order_target_value"><code class="xref py py-func docutils literal notranslate"><span class="pre">zipline.api.order_target_value()</span></code></a></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="zipline.api.order_target_value">
<span class="sig-prename descclassname"><span class="pre">zipline.api.</span></span><span class="sig-name descname"><span class="pre">order_target_value</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">asset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">limit_price</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stop_price</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">style</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.api.order_target_value" title="Permalink to this definition">#</a></dt>
<dd><p>Place an order to adjust a position to a target value. If
the position doesn’t already exist, this is equivalent to placing a new
order. If the position does exist, this is equivalent to placing an
order for the difference between the target value and the
current value.
If the Asset being ordered is a Future, the ‘target value’ calculated
is actually the target exposure, as Futures have no ‘value’.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>asset</strong> (<a class="reference internal" href="#zipline.assets.Asset" title="zipline.assets.Asset"><em>Asset</em></a>) – The asset that this order is for.</p></li>
<li><p><strong>target</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – The desired total value of <code class="docutils literal notranslate"><span class="pre">asset</span></code>.</p></li>
<li><p><strong>limit_price</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>, </em><em>optional</em>) – The limit price for the order.</p></li>
<li><p><strong>stop_price</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>, </em><em>optional</em>) – The stop price for the order.</p></li>
<li><p><strong>style</strong> (<a class="reference internal" href="#zipline.finance.execution.ExecutionStyle" title="zipline.finance.execution.ExecutionStyle"><em>ExecutionStyle</em></a>) – The execution style for the order.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>order_id</strong> – The unique identifier for this order.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a></p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p><code class="docutils literal notranslate"><span class="pre">order_target_value</span></code> does not take into account any open orders. For
example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">order_target_value</span><span class="p">(</span><span class="n">sid</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">order_target_value</span><span class="p">(</span><span class="n">sid</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<p>This code will result in 20 dollars of <code class="docutils literal notranslate"><span class="pre">sid(0)</span></code> because the first
call to <code class="docutils literal notranslate"><span class="pre">order_target_value</span></code> will not have been filled when the
second <code class="docutils literal notranslate"><span class="pre">order_target_value</span></code> call is made.</p>
<p>See <a class="reference internal" href="#zipline.api.order" title="zipline.api.order"><code class="xref py py-func docutils literal notranslate"><span class="pre">zipline.api.order()</span></code></a> for more information about
<code class="docutils literal notranslate"><span class="pre">limit_price</span></code>, <code class="docutils literal notranslate"><span class="pre">stop_price</span></code>, and <code class="docutils literal notranslate"><span class="pre">style</span></code></p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#zipline.finance.execution.ExecutionStyle" title="zipline.finance.execution.ExecutionStyle"><code class="xref py py-class docutils literal notranslate"><span class="pre">zipline.finance.execution.ExecutionStyle</span></code></a>, <a class="reference internal" href="#zipline.api.order" title="zipline.api.order"><code class="xref py py-func docutils literal notranslate"><span class="pre">zipline.api.order()</span></code></a>, <a class="reference internal" href="#zipline.api.order_target" title="zipline.api.order_target"><code class="xref py py-func docutils literal notranslate"><span class="pre">zipline.api.order_target()</span></code></a>, <a class="reference internal" href="#zipline.api.order_target_percent" title="zipline.api.order_target_percent"><code class="xref py py-func docutils literal notranslate"><span class="pre">zipline.api.order_target_percent()</span></code></a></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="zipline.api.order_target_percent">
<span class="sig-prename descclassname"><span class="pre">zipline.api.</span></span><span class="sig-name descname"><span class="pre">order_target_percent</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">asset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">limit_price</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stop_price</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">style</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.api.order_target_percent" title="Permalink to this definition">#</a></dt>
<dd><p>Place an order to adjust a position to a target percent of the
current portfolio value. If the position doesn’t already exist, this is
equivalent to placing a new order. If the position does exist, this is
equivalent to placing an order for the difference between the target
percent and the current percent.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>asset</strong> (<a class="reference internal" href="#zipline.assets.Asset" title="zipline.assets.Asset"><em>Asset</em></a>) – The asset that this order is for.</p></li>
<li><p><strong>target</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – The desired percentage of the portfolio value to allocate to
<code class="docutils literal notranslate"><span class="pre">asset</span></code>. This is specified as a decimal, for example:
0.50 means 50%.</p></li>
<li><p><strong>limit_price</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>, </em><em>optional</em>) – The limit price for the order.</p></li>
<li><p><strong>stop_price</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>, </em><em>optional</em>) – The stop price for the order.</p></li>
<li><p><strong>style</strong> (<a class="reference internal" href="#zipline.finance.execution.ExecutionStyle" title="zipline.finance.execution.ExecutionStyle"><em>ExecutionStyle</em></a>) – The execution style for the order.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>order_id</strong> – The unique identifier for this order.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a></p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p><code class="docutils literal notranslate"><span class="pre">order_target_value</span></code> does not take into account any open orders. For
example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">order_target_percent</span><span class="p">(</span><span class="n">sid</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">order_target_percent</span><span class="p">(</span><span class="n">sid</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<p>This code will result in 20% of the portfolio being allocated to sid(0)
because the first call to <code class="docutils literal notranslate"><span class="pre">order_target_percent</span></code> will not have been
filled when the second <code class="docutils literal notranslate"><span class="pre">order_target_percent</span></code> call is made.</p>
<p>See <a class="reference internal" href="#zipline.api.order" title="zipline.api.order"><code class="xref py py-func docutils literal notranslate"><span class="pre">zipline.api.order()</span></code></a> for more information about
<code class="docutils literal notranslate"><span class="pre">limit_price</span></code>, <code class="docutils literal notranslate"><span class="pre">stop_price</span></code>, and <code class="docutils literal notranslate"><span class="pre">style</span></code></p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#zipline.finance.execution.ExecutionStyle" title="zipline.finance.execution.ExecutionStyle"><code class="xref py py-class docutils literal notranslate"><span class="pre">zipline.finance.execution.ExecutionStyle</span></code></a>, <a class="reference internal" href="#zipline.api.order" title="zipline.api.order"><code class="xref py py-func docutils literal notranslate"><span class="pre">zipline.api.order()</span></code></a>, <a class="reference internal" href="#zipline.api.order_target" title="zipline.api.order_target"><code class="xref py py-func docutils literal notranslate"><span class="pre">zipline.api.order_target()</span></code></a>, <a class="reference internal" href="#zipline.api.order_target_value" title="zipline.api.order_target_value"><code class="xref py py-func docutils literal notranslate"><span class="pre">zipline.api.order_target_value()</span></code></a></p>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.finance.execution.ExecutionStyle">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.finance.execution.</span></span><span class="sig-name descname"><span class="pre">ExecutionStyle</span></span><a class="reference internal" href="_modules/zipline/finance/execution.html#ExecutionStyle"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.finance.execution.ExecutionStyle" title="Permalink to this definition">#</a></dt>
<dd><p>Base class for order execution styles.</p>
<dl class="py property">
<dt class="sig sig-object py" id="zipline.finance.execution.ExecutionStyle.exchange">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">exchange</span></span><a class="headerlink" href="#zipline.finance.execution.ExecutionStyle.exchange" title="Permalink to this definition">#</a></dt>
<dd><p>The exchange to which this order should be routed.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.finance.execution.ExecutionStyle.get_limit_price">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_limit_price</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">is_buy</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/execution.html#ExecutionStyle.get_limit_price"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.finance.execution.ExecutionStyle.get_limit_price" title="Permalink to this definition">#</a></dt>
<dd><p>Get the limit price for this order.
Returns either None or a numerical value &gt;= 0.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.finance.execution.ExecutionStyle.get_stop_price">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_stop_price</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">is_buy</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/execution.html#ExecutionStyle.get_stop_price"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.finance.execution.ExecutionStyle.get_stop_price" title="Permalink to this definition">#</a></dt>
<dd><p>Get the stop price for this order.
Returns either None or a numerical value &gt;= 0.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.finance.execution.MarketOrder">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.finance.execution.</span></span><span class="sig-name descname"><span class="pre">MarketOrder</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">exchange</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/execution.html#MarketOrder"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.finance.execution.MarketOrder" title="Permalink to this definition">#</a></dt>
<dd><p>Execution style for orders to be filled at current market price.</p>
<p>This is the default for orders placed with <a class="reference internal" href="#zipline.api.order" title="zipline.api.order"><code class="xref py py-func docutils literal notranslate"><span class="pre">order()</span></code></a>.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.finance.execution.LimitOrder">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.finance.execution.</span></span><span class="sig-name descname"><span class="pre">LimitOrder</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">limit_price</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">asset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exchange</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/execution.html#LimitOrder"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.finance.execution.LimitOrder" title="Permalink to this definition">#</a></dt>
<dd><p>Execution style for orders to be filled at a price equal to or better than
a specified limit price.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>limit_price</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Maximum price for buys, or minimum price for sells, at which the order
should be filled.</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.finance.execution.StopOrder">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.finance.execution.</span></span><span class="sig-name descname"><span class="pre">StopOrder</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stop_price</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">asset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exchange</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/execution.html#StopOrder"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.finance.execution.StopOrder" title="Permalink to this definition">#</a></dt>
<dd><p>Execution style representing a market order to be placed if market price
reaches a threshold.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>stop_price</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Price threshold at which the order should be placed. For sells, the
order will be placed if market price falls below this value. For buys,
the order will be placed if market price rises above this value.</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.finance.execution.StopLimitOrder">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.finance.execution.</span></span><span class="sig-name descname"><span class="pre">StopLimitOrder</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">limit_price</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stop_price</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">asset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exchange</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/execution.html#StopLimitOrder"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.finance.execution.StopLimitOrder" title="Permalink to this definition">#</a></dt>
<dd><p>Execution style representing a limit order to be placed if market price
reaches a threshold.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>limit_price</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Maximum price for buys, or minimum price for sells, at which the order
should be filled, if placed.</p></li>
<li><p><strong>stop_price</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Price threshold at which the order should be placed. For sells, the
order will be placed if market price falls below this value. For buys,
the order will be placed if market price rises above this value.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="zipline.api.get_order">
<span class="sig-prename descclassname"><span class="pre">zipline.api.</span></span><span class="sig-name descname"><span class="pre">get_order</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">order_id</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.api.get_order" title="Permalink to this definition">#</a></dt>
<dd><p>Lookup an order based on the order id returned from one of the
order functions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>order_id</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – The unique identifier for the order.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>order</strong> – The order object.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Order</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="zipline.api.get_open_orders">
<span class="sig-prename descclassname"><span class="pre">zipline.api.</span></span><span class="sig-name descname"><span class="pre">get_open_orders</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">asset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.api.get_open_orders" title="Permalink to this definition">#</a></dt>
<dd><p>Retrieve all of the current open orders.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>asset</strong> (<a class="reference internal" href="#zipline.assets.Asset" title="zipline.assets.Asset"><em>Asset</em></a>) – If passed and not None, return only the open orders for the given
asset instead of all open orders.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>open_orders</strong> – If no asset is passed this will return a dict mapping Assets
to a list containing all the open orders for the asset.
If an asset is passed then this will return a list of the open
orders for this asset.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)">dict</a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.11)">list</a>[Order]] or <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.11)">list</a>[Order]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="zipline.api.cancel_order">
<span class="sig-prename descclassname"><span class="pre">zipline.api.</span></span><span class="sig-name descname"><span class="pre">cancel_order</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">order_param</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.api.cancel_order" title="Permalink to this definition">#</a></dt>
<dd><p>Cancel an open order.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>order_param</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em> or </em><em>Order</em>) – The order_id or order object to cancel.</p>
</dd>
</dl>
</dd></dl>

<section id="order-cancellation-policies">
<h4>Order Cancellation Policies<a class="headerlink" href="#order-cancellation-policies" title="Permalink to this heading">#</a></h4>
<dl class="py function">
<dt class="sig sig-object py" id="zipline.api.set_cancel_policy">
<span class="sig-prename descclassname"><span class="pre">zipline.api.</span></span><span class="sig-name descname"><span class="pre">set_cancel_policy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cancel_policy</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.api.set_cancel_policy" title="Permalink to this definition">#</a></dt>
<dd><p>Sets the order cancellation policy for the simulation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>cancel_policy</strong> (<a class="reference internal" href="#zipline.finance.cancel_policy.CancelPolicy" title="zipline.finance.cancel_policy.CancelPolicy"><em>CancelPolicy</em></a>) – The cancellation policy to use.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#zipline.api.EODCancel" title="zipline.api.EODCancel"><code class="xref py py-class docutils literal notranslate"><span class="pre">zipline.api.EODCancel</span></code></a>, <a class="reference internal" href="#zipline.api.NeverCancel" title="zipline.api.NeverCancel"><code class="xref py py-class docutils literal notranslate"><span class="pre">zipline.api.NeverCancel</span></code></a></p>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.finance.cancel_policy.CancelPolicy">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.finance.cancel_policy.</span></span><span class="sig-name descname"><span class="pre">CancelPolicy</span></span><a class="reference internal" href="_modules/zipline/finance/cancel_policy.html#CancelPolicy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.finance.cancel_policy.CancelPolicy" title="Permalink to this definition">#</a></dt>
<dd><p>Abstract cancellation policy interface.</p>
<dl class="py method">
<dt class="sig sig-object py" id="zipline.finance.cancel_policy.CancelPolicy.should_cancel">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">should_cancel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">event</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/cancel_policy.html#CancelPolicy.should_cancel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.finance.cancel_policy.CancelPolicy.should_cancel" title="Permalink to this definition">#</a></dt>
<dd><p>Should all open orders be cancelled?</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>event</strong> (<em>enum-value</em>) – <dl class="simple">
<dt>An event type, one of:</dt><dd><ul class="simple">
<li><p><code class="xref py py-data docutils literal notranslate"><span class="pre">zipline.gens.sim_engine.BAR</span></code></p></li>
<li><p><code class="xref py py-data docutils literal notranslate"><span class="pre">zipline.gens.sim_engine.DAY_START</span></code></p></li>
<li><p><code class="xref py py-data docutils literal notranslate"><span class="pre">zipline.gens.sim_engine.DAY_END</span></code></p></li>
<li><p><code class="xref py py-data docutils literal notranslate"><span class="pre">zipline.gens.sim_engine.MINUTE_END</span></code></p></li>
</ul>
</dd>
</dl>
</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>should_cancel</strong> – Should all open orders be cancelled?</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)">bool</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="zipline.api.EODCancel">
<span class="sig-prename descclassname"><span class="pre">zipline.api.</span></span><span class="sig-name descname"><span class="pre">EODCancel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">warn_on_cancel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/cancel_policy.html#EODCancel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.api.EODCancel" title="Permalink to this definition">#</a></dt>
<dd><p>This policy cancels open orders at the end of the day.  For now,
Zipline will only apply this policy to minutely simulations.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>warn_on_cancel</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><em>optional</em>) – Should a warning be raised if this causes an order to be cancelled?</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="zipline.api.NeverCancel">
<span class="sig-prename descclassname"><span class="pre">zipline.api.</span></span><span class="sig-name descname"><span class="pre">NeverCancel</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/cancel_policy.html#NeverCancel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.api.NeverCancel" title="Permalink to this definition">#</a></dt>
<dd><p>Orders are never automatically canceled.</p>
</dd></dl>

</section>
</section>
<section id="assets">
<h3>Assets<a class="headerlink" href="#assets" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="zipline.api.symbol">
<span class="sig-prename descclassname"><span class="pre">zipline.api.</span></span><span class="sig-name descname"><span class="pre">symbol</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">symbol_str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">country_code</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.api.symbol" title="Permalink to this definition">#</a></dt>
<dd><p>Lookup an Equity by its ticker symbol.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>symbol_str</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – The ticker symbol for the equity to lookup.</p></li>
<li><p><strong>country_code</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em> or </em><em>None</em><em>, </em><em>optional</em>) – A country to limit symbol searches to.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>equity</strong> – The equity that held the ticker symbol on the current
symbol lookup date.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#zipline.assets.Equity" title="zipline.assets.Equity">zipline.assets.Equity</a></p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>SymbolNotFound</strong> – Raised when the symbols was not held on the current lookup date.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#zipline.api.set_symbol_lookup_date" title="zipline.api.set_symbol_lookup_date"><code class="xref py py-func docutils literal notranslate"><span class="pre">zipline.api.set_symbol_lookup_date()</span></code></a></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="zipline.api.symbols">
<span class="sig-prename descclassname"><span class="pre">zipline.api.</span></span><span class="sig-name descname"><span class="pre">symbols</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.api.symbols" title="Permalink to this definition">#</a></dt>
<dd><p>Lookup multuple Equities as a list.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>*args</strong> (<em>iterable</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>]</em>) – The ticker symbols to lookup.</p></li>
<li><p><strong>country_code</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em> or </em><em>None</em><em>, </em><em>optional</em>) – A country to limit symbol searches to.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>equities</strong> – The equities that held the given ticker symbols on the current
symbol lookup date.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.11)">list</a>[<a class="reference internal" href="#zipline.assets.Equity" title="zipline.assets.Equity">zipline.assets.Equity</a>]</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>SymbolNotFound</strong> – Raised when one of the symbols was not held on the current
    lookup date.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#zipline.api.set_symbol_lookup_date" title="zipline.api.set_symbol_lookup_date"><code class="xref py py-func docutils literal notranslate"><span class="pre">zipline.api.set_symbol_lookup_date()</span></code></a></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="zipline.api.future_symbol">
<span class="sig-prename descclassname"><span class="pre">zipline.api.</span></span><span class="sig-name descname"><span class="pre">future_symbol</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">symbol</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.api.future_symbol" title="Permalink to this definition">#</a></dt>
<dd><p>Lookup a futures contract with a given symbol.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>symbol</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – The symbol of the desired contract.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>future</strong> – The future that trades with the name <code class="docutils literal notranslate"><span class="pre">symbol</span></code>.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#zipline.assets.Future" title="zipline.assets.Future">zipline.assets.Future</a></p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>SymbolNotFound</strong> – Raised when no contract named ‘symbol’ is found.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="zipline.api.set_symbol_lookup_date">
<span class="sig-prename descclassname"><span class="pre">zipline.api.</span></span><span class="sig-name descname"><span class="pre">set_symbol_lookup_date</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dt</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.api.set_symbol_lookup_date" title="Permalink to this definition">#</a></dt>
<dd><p>Set the date for which symbols will be resolved to their assets
(symbols may map to different firms or underlying assets at
different times)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>dt</strong> (<em>datetime</em>) – The new symbol lookup date.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="zipline.api.sid">
<span class="sig-prename descclassname"><span class="pre">zipline.api.</span></span><span class="sig-name descname"><span class="pre">sid</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sid</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.api.sid" title="Permalink to this definition">#</a></dt>
<dd><p>Lookup an Asset by its unique asset identifier.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>sid</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – The unique integer that identifies an asset.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>asset</strong> – The asset with the given <code class="docutils literal notranslate"><span class="pre">sid</span></code>.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#zipline.assets.Asset" title="zipline.assets.Asset">zipline.assets.Asset</a></p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>SidsNotFound</strong> – When a requested <code class="docutils literal notranslate"><span class="pre">sid</span></code> does not map to any asset.</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="trading-controls">
<h3>Trading Controls<a class="headerlink" href="#trading-controls" title="Permalink to this heading">#</a></h3>
<p>Zipline provides trading controls to ensure that the algorithm
performs as expected. The functions help protect the algorithm from
undesirable consequences of unintended behavior,
especially when trading with real money.</p>
<dl class="py function">
<dt class="sig sig-object py" id="zipline.api.set_do_not_order_list">
<span class="sig-prename descclassname"><span class="pre">zipline.api.</span></span><span class="sig-name descname"><span class="pre">set_do_not_order_list</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">restricted_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">on_error</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'fail'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.api.set_do_not_order_list" title="Permalink to this definition">#</a></dt>
<dd><p>Set a restriction on which assets can be ordered.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>restricted_list</strong> (<em>container</em><em>[</em><a class="reference internal" href="#zipline.assets.Asset" title="zipline.assets.Asset"><em>Asset</em></a><em>]</em><em>, </em><em>SecurityList</em>) – The assets that cannot be ordered.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="zipline.api.set_long_only">
<span class="sig-prename descclassname"><span class="pre">zipline.api.</span></span><span class="sig-name descname"><span class="pre">set_long_only</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">on_error</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'fail'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.api.set_long_only" title="Permalink to this definition">#</a></dt>
<dd><p>Set a rule specifying that this algorithm cannot take short
positions.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="zipline.api.set_max_leverage">
<span class="sig-prename descclassname"><span class="pre">zipline.api.</span></span><span class="sig-name descname"><span class="pre">set_max_leverage</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_leverage</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.api.set_max_leverage" title="Permalink to this definition">#</a></dt>
<dd><p>Set a limit on the maximum leverage of the algorithm.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>max_leverage</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – The maximum leverage for the algorithm. If not provided there will
be no maximum.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="zipline.api.set_max_order_count">
<span class="sig-prename descclassname"><span class="pre">zipline.api.</span></span><span class="sig-name descname"><span class="pre">set_max_order_count</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_count</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">on_error</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'fail'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.api.set_max_order_count" title="Permalink to this definition">#</a></dt>
<dd><p>Set a limit on the number of orders that can be placed in a single
day.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>max_count</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – The maximum number of orders that can be placed on any single day.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="zipline.api.set_max_order_size">
<span class="sig-prename descclassname"><span class="pre">zipline.api.</span></span><span class="sig-name descname"><span class="pre">set_max_order_size</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">asset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_shares</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_notional</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">on_error</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'fail'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.api.set_max_order_size" title="Permalink to this definition">#</a></dt>
<dd><p>Set a limit on the number of shares and/or dollar value of any single
order placed for sid.  Limits are treated as absolute values and are
enforced at the time that the algo attempts to place an order for sid.</p>
<p>If an algorithm attempts to place an order that would result in
exceeding one of these limits, raise a TradingControlException.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>asset</strong> (<a class="reference internal" href="#zipline.assets.Asset" title="zipline.assets.Asset"><em>Asset</em></a><em>, </em><em>optional</em>) – If provided, this sets the guard only on positions in the given
asset.</p></li>
<li><p><strong>max_shares</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>, </em><em>optional</em>) – The maximum number of shares that can be ordered at one time.</p></li>
<li><p><strong>max_notional</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>, </em><em>optional</em>) – The maximum value that can be ordered at one time.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="zipline.api.set_max_position_size">
<span class="sig-prename descclassname"><span class="pre">zipline.api.</span></span><span class="sig-name descname"><span class="pre">set_max_position_size</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">asset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_shares</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_notional</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">on_error</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'fail'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.api.set_max_position_size" title="Permalink to this definition">#</a></dt>
<dd><p>Set a limit on the number of shares and/or dollar value held for the
given sid. Limits are treated as absolute values and are enforced at
the time that the algo attempts to place an order for sid. This means
that it’s possible to end up with more than the max number of shares
due to splits/dividends, and more than the max notional due to price
improvement.</p>
<p>If an algorithm attempts to place an order that would result in
increasing the absolute value of shares/dollar value exceeding one of
these limits, raise a TradingControlException.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>asset</strong> (<a class="reference internal" href="#zipline.assets.Asset" title="zipline.assets.Asset"><em>Asset</em></a><em>, </em><em>optional</em>) – If provided, this sets the guard only on positions in the given
asset.</p></li>
<li><p><strong>max_shares</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>, </em><em>optional</em>) – The maximum number of shares to hold for an asset.</p></li>
<li><p><strong>max_notional</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>, </em><em>optional</em>) – The maximum value to hold for an asset.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
<section id="simulation-parameters">
<h3>Simulation Parameters<a class="headerlink" href="#simulation-parameters" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="zipline.api.set_benchmark">
<span class="sig-prename descclassname"><span class="pre">zipline.api.</span></span><span class="sig-name descname"><span class="pre">set_benchmark</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">benchmark</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.api.set_benchmark" title="Permalink to this definition">#</a></dt>
<dd><p>Set the benchmark asset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>benchmark</strong> (<a class="reference internal" href="#zipline.assets.Asset" title="zipline.assets.Asset"><em>zipline.assets.Asset</em></a>) – The asset to set as the new benchmark.</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>Any dividends payed out for that new benchmark asset will be
automatically reinvested.</p>
</dd></dl>

<section id="commission-models">
<h4>Commission Models<a class="headerlink" href="#commission-models" title="Permalink to this heading">#</a></h4>
<dl class="py function">
<dt class="sig sig-object py" id="zipline.api.set_commission">
<span class="sig-prename descclassname"><span class="pre">zipline.api.</span></span><span class="sig-name descname"><span class="pre">set_commission</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">us_equities</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">us_futures</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.api.set_commission" title="Permalink to this definition">#</a></dt>
<dd><p>Sets the commission models for the simulation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>us_equities</strong> (<em>EquityCommissionModel</em>) – The commission model to use for trading US equities.</p></li>
<li><p><strong>us_futures</strong> (<em>FutureCommissionModel</em>) – The commission model to use for trading US futures.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>This function can only be called during
<code class="xref py py-func docutils literal notranslate"><span class="pre">initialize()</span></code>.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#zipline.finance.commission.PerShare" title="zipline.finance.commission.PerShare"><code class="xref py py-class docutils literal notranslate"><span class="pre">zipline.finance.commission.PerShare</span></code></a>, <a class="reference internal" href="#zipline.finance.commission.PerTrade" title="zipline.finance.commission.PerTrade"><code class="xref py py-class docutils literal notranslate"><span class="pre">zipline.finance.commission.PerTrade</span></code></a>, <a class="reference internal" href="#zipline.finance.commission.PerDollar" title="zipline.finance.commission.PerDollar"><code class="xref py py-class docutils literal notranslate"><span class="pre">zipline.finance.commission.PerDollar</span></code></a></p>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.finance.commission.CommissionModel">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.finance.commission.</span></span><span class="sig-name descname"><span class="pre">CommissionModel</span></span><a class="reference internal" href="_modules/zipline/finance/commission.html#CommissionModel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.finance.commission.CommissionModel" title="Permalink to this definition">#</a></dt>
<dd><p>Abstract base class for commission models.</p>
<p>Commission models are responsible for accepting order/transaction pairs and
calculating how much commission should be charged to an algorithm’s account
on each transaction.</p>
<p>To implement a new commission model, create a subclass of
<a class="reference internal" href="#zipline.finance.commission.CommissionModel" title="zipline.finance.commission.CommissionModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">CommissionModel</span></code></a> and implement
<a class="reference internal" href="#zipline.finance.commission.CommissionModel.calculate" title="zipline.finance.commission.CommissionModel.calculate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">calculate()</span></code></a>.</p>
<dl class="py method">
<dt class="sig sig-object py" id="zipline.finance.commission.CommissionModel.calculate">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">calculate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">order</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transaction</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/commission.html#CommissionModel.calculate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.finance.commission.CommissionModel.calculate" title="Permalink to this definition">#</a></dt>
<dd><p>Calculate the amount of commission to charge on <code class="docutils literal notranslate"><span class="pre">order</span></code> as a result
of <code class="docutils literal notranslate"><span class="pre">transaction</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>order</strong> (<em>zipline.finance.order.Order</em>) – <p>The order being processed.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">commission</span></code> field of <code class="docutils literal notranslate"><span class="pre">order</span></code> is a float indicating the
amount of commission already charged on this order.</p>
</p></li>
<li><p><strong>transaction</strong> (<em>zipline.finance.transaction.Transaction</em>) – The transaction being processed. A single order may generate
multiple transactions if there isn’t enough volume in a given bar
to fill the full amount requested in the order.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>amount_charged</strong> – The additional commission, in dollars, that we should attribute to
this order.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)">float</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.finance.commission.PerShare">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.finance.commission.</span></span><span class="sig-name descname"><span class="pre">PerShare</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cost</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.001</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_trade_cost</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/commission.html#PerShare"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.finance.commission.PerShare" title="Permalink to this definition">#</a></dt>
<dd><p>Calculates a commission for a transaction based on a per share cost with
an optional minimum cost per trade.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cost</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>, </em><em>optional</em>) – The amount of commissions paid per share traded. Default is one tenth
of a cent per share.</p></li>
<li><p><strong>min_trade_cost</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>, </em><em>optional</em>) – The minimum amount of commissions paid per trade. Default is no
minimum.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>This is zipline’s default commission model for equities.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.finance.commission.PerTrade">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.finance.commission.</span></span><span class="sig-name descname"><span class="pre">PerTrade</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cost</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/commission.html#PerTrade"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.finance.commission.PerTrade" title="Permalink to this definition">#</a></dt>
<dd><p>Calculates a commission for a transaction based on a per trade cost.</p>
<p>For orders that require multiple fills, the full commission is charged to
the first fill.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>cost</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>, </em><em>optional</em>) – The flat amount of commissions paid per equity trade.</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.finance.commission.PerDollar">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.finance.commission.</span></span><span class="sig-name descname"><span class="pre">PerDollar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cost</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0015</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/commission.html#PerDollar"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.finance.commission.PerDollar" title="Permalink to this definition">#</a></dt>
<dd><p>Model commissions by applying a fixed cost per dollar transacted.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>cost</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>, </em><em>optional</em>) – The flat amount of commissions paid per dollar of equities
traded. Default is a commission of $0.0015 per dollar transacted.</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="slippage-models">
<h4>Slippage Models<a class="headerlink" href="#slippage-models" title="Permalink to this heading">#</a></h4>
<dl class="py function">
<dt class="sig sig-object py" id="zipline.api.set_slippage">
<span class="sig-prename descclassname"><span class="pre">zipline.api.</span></span><span class="sig-name descname"><span class="pre">set_slippage</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">us_equities</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">us_futures</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.api.set_slippage" title="Permalink to this definition">#</a></dt>
<dd><p>Set the slippage models for the simulation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>us_equities</strong> (<em>EquitySlippageModel</em>) – The slippage model to use for trading US equities.</p></li>
<li><p><strong>us_futures</strong> (<em>FutureSlippageModel</em>) – The slippage model to use for trading US futures.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>This function can only be called during
<code class="xref py py-func docutils literal notranslate"><span class="pre">initialize()</span></code>.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#zipline.finance.slippage.SlippageModel" title="zipline.finance.slippage.SlippageModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">zipline.finance.slippage.SlippageModel</span></code></a></p>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.finance.slippage.SlippageModel">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.finance.slippage.</span></span><span class="sig-name descname"><span class="pre">SlippageModel</span></span><a class="reference internal" href="_modules/zipline/finance/slippage.html#SlippageModel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.finance.slippage.SlippageModel" title="Permalink to this definition">#</a></dt>
<dd><p>Abstract base class for slippage models.</p>
<p>Slippage models are responsible for the rates and prices at which orders
fill during a simulation.</p>
<p>To implement a new slippage model, create a subclass of
<a class="reference internal" href="#zipline.finance.slippage.SlippageModel" title="zipline.finance.slippage.SlippageModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">SlippageModel</span></code></a> and implement
<a class="reference internal" href="#id0" title="zipline.finance.slippage.SlippageModel.process_order"><code class="xref py py-meth docutils literal notranslate"><span class="pre">process_order()</span></code></a>.</p>
<dl class="py method">
<dt class="sig sig-object py" id="zipline.finance.slippage.SlippageModel.process_order">
<span class="sig-name descname"><span class="pre">process_order</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">order</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/slippage.html#SlippageModel.process_order"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.finance.slippage.SlippageModel.process_order" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="zipline.finance.slippage.SlippageModel.volume_for_bar">
<span class="sig-name descname"><span class="pre">volume_for_bar</span></span><a class="headerlink" href="#zipline.finance.slippage.SlippageModel.volume_for_bar" title="Permalink to this definition">#</a></dt>
<dd><p>Number of shares that have already been filled for the
currently-filling asset in the current minute. This attribute is
maintained automatically by the base class. It can be used by
subclasses to keep track of the total amount filled if there are
multiple open orders for a single asset.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)">int</a></p>
</dd>
</dl>
</dd></dl>

<p class="rubric">Notes</p>
<p>Subclasses that define their own constructors should call
<code class="docutils literal notranslate"><span class="pre">super(&lt;subclass</span> <span class="pre">name&gt;,</span> <span class="pre">self).__init__()</span></code> before performing other
initialization.</p>
<dl class="py method">
<dt class="sig sig-object py" id="id0">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">process_order</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">order</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/slippage.html#SlippageModel.process_order"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id0" title="Permalink to this definition">#</a></dt>
<dd><p>Compute the number of shares and price to fill for <code class="docutils literal notranslate"><span class="pre">order</span></code> in the
current minute.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<a class="reference internal" href="#zipline.protocol.BarData" title="zipline.protocol.BarData"><em>zipline.protocol.BarData</em></a>) – The data for the given bar.</p></li>
<li><p><strong>order</strong> (<em>zipline.finance.order.Order</em>) – The order to simulate.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>execution_price</strong> (<em>float</em>) – The price of the fill.</p></li>
<li><p><strong>execution_volume</strong> (<em>int</em>) – The number of shares that should be filled. Must be between <code class="docutils literal notranslate"><span class="pre">0</span></code>
and <code class="docutils literal notranslate"><span class="pre">order.amount</span> <span class="pre">-</span> <span class="pre">order.filled</span></code>. If the amount filled is less
than the amount remaining, <code class="docutils literal notranslate"><span class="pre">order</span></code> will remain open and will be
passed again to this method in the next minute.</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>zipline.finance.slippage.LiquidityExceeded</strong> – May be raised if no more orders should be processed for the current
    asset during the current bar.</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>Before this method is called, <a class="reference internal" href="#zipline.finance.slippage.SlippageModel.volume_for_bar" title="zipline.finance.slippage.SlippageModel.volume_for_bar"><code class="xref py py-attr docutils literal notranslate"><span class="pre">volume_for_bar</span></code></a> will be set to the
number of shares that have already been filled for <code class="docutils literal notranslate"><span class="pre">order.asset</span></code> in
the current minute.</p>
<p><a class="reference internal" href="#id0" title="zipline.finance.slippage.SlippageModel.process_order"><code class="xref py py-meth docutils literal notranslate"><span class="pre">process_order()</span></code></a> is not called by the base class on bars for which
there was no historical volume.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.finance.slippage.FixedSlippage">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.finance.slippage.</span></span><span class="sig-name descname"><span class="pre">FixedSlippage</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">spread</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/slippage.html#FixedSlippage"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.finance.slippage.FixedSlippage" title="Permalink to this definition">#</a></dt>
<dd><p>Simple model assuming a fixed-size spread for all assets.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>spread</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>, </em><em>optional</em>) – Size of the assumed spread for all assets.
Orders to buy will be filled at <code class="docutils literal notranslate"><span class="pre">close</span> <span class="pre">+</span> <span class="pre">(spread</span> <span class="pre">/</span> <span class="pre">2)</span></code>.
Orders to sell will be filled at <code class="docutils literal notranslate"><span class="pre">close</span> <span class="pre">-</span> <span class="pre">(spread</span> <span class="pre">/</span> <span class="pre">2)</span></code>.</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>This model does not impose limits on the size of fills. An order for an
asset will always be filled as soon as any trading activity occurs in the
order’s asset, even if the size of the order is greater than the historical
volume.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.finance.slippage.VolumeShareSlippage">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.finance.slippage.</span></span><span class="sig-name descname"><span class="pre">VolumeShareSlippage</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">volume_limit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.025</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">price_impact</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/slippage.html#VolumeShareSlippage"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.finance.slippage.VolumeShareSlippage" title="Permalink to this definition">#</a></dt>
<dd><p>Model slippage as a quadratic function of percentage of historical volume.</p>
<p>Orders to buy will be filled at:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">price</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">price_impact</span> <span class="o">*</span> <span class="p">(</span><span class="n">volume_share</span> <span class="o">**</span> <span class="mi">2</span><span class="p">))</span>
</pre></div>
</div>
<p>Orders to sell will be filled at:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">price</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">price_impact</span> <span class="o">*</span> <span class="p">(</span><span class="n">volume_share</span> <span class="o">**</span> <span class="mi">2</span><span class="p">))</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">price</span></code> is the close price for the bar, and <code class="docutils literal notranslate"><span class="pre">volume_share</span></code> is the
percentage of minutely volume filled, up to a max of <code class="docutils literal notranslate"><span class="pre">volume_limit</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>volume_limit</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>, </em><em>optional</em>) – Maximum percent of historical volume that can fill in each bar. 0.5
means 50% of historical volume. 1.0 means 100%. Default is 0.025 (i.e.,
2.5%).</p></li>
<li><p><strong>price_impact</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>, </em><em>optional</em>) – Scaling coefficient for price impact. Larger values will result in more
simulated price impact. Smaller values will result in less simulated
price impact. Default is 0.1.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
</section>
<section id="pipeline">
<h3>Pipeline<a class="headerlink" href="#pipeline" title="Permalink to this heading">#</a></h3>
<p>For more information, see <a class="reference internal" href="#pipeline-api"><span class="std std-ref">Pipeline API</span></a></p>
<dl class="py function">
<dt class="sig sig-object py" id="zipline.api.attach_pipeline">
<span class="sig-prename descclassname"><span class="pre">zipline.api.</span></span><span class="sig-name descname"><span class="pre">attach_pipeline</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pipeline</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chunks</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.api.attach_pipeline" title="Permalink to this definition">#</a></dt>
<dd><p>Register a pipeline to be computed at the start of each day.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pipeline</strong> (<a class="reference internal" href="#zipline.pipeline.Pipeline" title="zipline.pipeline.Pipeline"><em>Pipeline</em></a>) – The pipeline to have computed.</p></li>
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – The name of the pipeline.</p></li>
<li><p><strong>chunks</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em> or </em><em>iterator</em><em>, </em><em>optional</em>) – The number of days to compute pipeline results for. Increasing
this number will make it longer to get the first results but
may improve the total runtime of the simulation. If an iterator
is passed, we will run in chunks based on values of the iterator.
Default is True.</p></li>
<li><p><strong>eager</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><em>optional</em>) – Whether or not to compute this pipeline prior to
before_trading_start.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>pipeline</strong> – Returns the pipeline that was attached unchanged.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#zipline.pipeline.Pipeline" title="zipline.pipeline.Pipeline">Pipeline</a></p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#zipline.api.pipeline_output" title="zipline.api.pipeline_output"><code class="xref py py-func docutils literal notranslate"><span class="pre">zipline.api.pipeline_output()</span></code></a></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="zipline.api.pipeline_output">
<span class="sig-prename descclassname"><span class="pre">zipline.api.</span></span><span class="sig-name descname"><span class="pre">pipeline_output</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.api.pipeline_output" title="Permalink to this definition">#</a></dt>
<dd><p>Get results of the pipeline attached by with name <code class="docutils literal notranslate"><span class="pre">name</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – Name of the pipeline from which to fetch results.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>results</strong> – DataFrame containing the results of the requested pipeline for
the current simulation date.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pd.DataFrame</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>NoSuchPipeline</strong> – Raised when no pipeline with the name <cite>name</cite> has been registered.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#zipline.api.attach_pipeline" title="zipline.api.attach_pipeline"><code class="xref py py-func docutils literal notranslate"><span class="pre">zipline.api.attach_pipeline()</span></code></a>, <a class="reference internal" href="#zipline.pipeline.engine.PipelineEngine.run_pipeline" title="zipline.pipeline.engine.PipelineEngine.run_pipeline"><code class="xref py py-meth docutils literal notranslate"><span class="pre">zipline.pipeline.engine.PipelineEngine.run_pipeline()</span></code></a></p>
</div>
</dd></dl>

</section>
<section id="miscellaneous">
<h3>Miscellaneous<a class="headerlink" href="#miscellaneous" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="zipline.api.record">
<span class="sig-prename descclassname"><span class="pre">zipline.api.</span></span><span class="sig-name descname"><span class="pre">record</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.api.record" title="Permalink to this definition">#</a></dt>
<dd><p>Track and record values each day.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>**kwargs</strong> – The names and values to record.</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>These values will appear in the performance packets and the performance
dataframe passed to <code class="docutils literal notranslate"><span class="pre">analyze</span></code> and returned from
<a class="reference internal" href="#zipline.run_algorithm" title="zipline.run_algorithm"><code class="xref py py-func docutils literal notranslate"><span class="pre">run_algorithm()</span></code></a>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="zipline.api.get_environment">
<span class="sig-prename descclassname"><span class="pre">zipline.api.</span></span><span class="sig-name descname"><span class="pre">get_environment</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'platform'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.api.get_environment" title="Permalink to this definition">#</a></dt>
<dd><p>Query the execution environment.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>field</strong> (<em>{'platform'</em><em>, </em><em>'arena'</em><em>, </em><em>'data_frequency'</em><em>, </em><em>'start'</em><em>, </em><em>'end'</em><em>,</em>) – </p></li>
<li><p><strong>'capital_base'</strong> – </p></li>
<li><p><strong>'platform'</strong> – </p></li>
<li><p><strong>'*'}</strong> – </p></li>
<li><p><strong>meanings</strong> (<em>The field to query. The options have the following</em>) – </p></li>
<li><p><strong>arena</strong> (<em>-</em>) – The arena from the simulation parameters. This will normally
be <code class="docutils literal notranslate"><span class="pre">'backtest'</span></code> but some systems may use this distinguish
live trading from backtesting.</p></li>
<li><p><strong>data_frequency</strong> (<em>-</em>) – data_frequency tells the algorithm if it is running with
daily data or minute data.</p></li>
<li><p><strong>start</strong> (<em>-</em>) – The start date for the simulation.</p></li>
<li><p><strong>end</strong> (<em>-</em>) – The end date for the simulation.</p></li>
<li><p><strong>capital_base</strong> (<em>-</em>) – The starting capital for the simulation.</p></li>
<li><p><strong>-platform</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – The platform that the code is running on. By default, this
will be the string ‘zipline’. This can allow algorithms to
know if they are running on the Quantopian platform instead.</p></li>
<li><p><strong>*</strong> (<em>-</em>) – Returns all the fields in a dictionary.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>val</strong> – The value for the field queried. See above for more information.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>any</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.11)"><strong>ValueError</strong></a> – Raised when <code class="docutils literal notranslate"><span class="pre">field</span></code> is not a valid option.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="zipline.api.fetch_csv">
<span class="sig-prename descclassname"><span class="pre">zipline.api.</span></span><span class="sig-name descname"><span class="pre">fetch_csv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">url</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pre_func</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">post_func</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">date_column</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'date'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">date_format</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timezone</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'UTC'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">symbol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">symbol_column</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">special_params_checker</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">country_code</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.api.fetch_csv" title="Permalink to this definition">#</a></dt>
<dd><p>Fetch a csv from a remote url and register the data so that it is
queryable from the <code class="docutils literal notranslate"><span class="pre">data</span></code> object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>url</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – The url of the csv file to load.</p></li>
<li><p><strong>pre_func</strong> (<em>callable</em><em>[</em><em>pd.DataFrame -&gt; pd.DataFrame</em><em>]</em><em>, </em><em>optional</em>) – A callback to allow preprocessing the raw data returned from
fetch_csv before dates are paresed or symbols are mapped.</p></li>
<li><p><strong>post_func</strong> (<em>callable</em><em>[</em><em>pd.DataFrame -&gt; pd.DataFrame</em><em>]</em><em>, </em><em>optional</em>) – A callback to allow postprocessing of the data after dates and
symbols have been mapped.</p></li>
<li><p><strong>date_column</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>optional</em>) – The name of the column in the preprocessed dataframe containing
datetime information to map the data.</p></li>
<li><p><strong>date_format</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>optional</em>) – The format of the dates in the <code class="docutils literal notranslate"><span class="pre">date_column</span></code>. If not provided
<code class="docutils literal notranslate"><span class="pre">fetch_csv</span></code> will attempt to infer the format. For information
about the format of this string, see <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_csv.html#pandas.read_csv" title="(in pandas v2.0.3)"><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.read_csv()</span></code></a>.</p></li>
<li><p><strong>timezone</strong> (<em>tzinfo</em><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>optional</em>) – The timezone for the datetime in the <code class="docutils literal notranslate"><span class="pre">date_column</span></code>.</p></li>
<li><p><strong>symbol</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>optional</em>) – If the data is about a new asset or index then this string will
be the name used to identify the values in <code class="docutils literal notranslate"><span class="pre">data</span></code>. For example,
one may use <code class="docutils literal notranslate"><span class="pre">fetch_csv</span></code> to load data for VIX, then this field
could be the string <code class="docutils literal notranslate"><span class="pre">'VIX'</span></code>.</p></li>
<li><p><strong>mask</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><em>optional</em>) – Drop any rows which cannot be symbol mapped.</p></li>
<li><p><strong>symbol_column</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – If the data is attaching some new attribute to each asset then this
argument is the name of the column in the preprocessed dataframe
containing the symbols. This will be used along with the date
information to map the sids in the asset finder.</p></li>
<li><p><strong>country_code</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>optional</em>) – Country code to use to disambiguate symbol lookups.</p></li>
<li><p><strong>**kwargs</strong> – Forwarded to <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_csv.html#pandas.read_csv" title="(in pandas v2.0.3)"><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.read_csv()</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>csv_data_source</strong> – A requests source that will pull data from the url specified.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>zipline.sources.requests_csv.PandasRequestsCSV</p>
</dd>
</dl>
</dd></dl>

</section>
</section>
<section id="blotters">
<h2>Blotters<a class="headerlink" href="#blotters" title="Permalink to this heading">#</a></h2>
<p>A <a class="reference external" href="https://www.investopedia.com/terms/b/blotter.asp">blotter</a> documents trades and their details over a period of time, typically one trading day. Trade details include
such things as the time, price, order size, and whether it was a buy or sell order. It is is usually created by a
trading software that records the trades made through a data feed.</p>
<dl class="py class">
<dt class="sig sig-object py" id="zipline.finance.blotter.blotter.Blotter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.finance.blotter.blotter.</span></span><span class="sig-name descname"><span class="pre">Blotter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cancel_policy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/blotter/blotter.html#Blotter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.finance.blotter.blotter.Blotter" title="Permalink to this definition">#</a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="zipline.finance.blotter.blotter.Blotter.batch_order">
<span class="sig-name descname"><span class="pre">batch_order</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">order_arg_lists</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/blotter/blotter.html#Blotter.batch_order"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.finance.blotter.blotter.Blotter.batch_order" title="Permalink to this definition">#</a></dt>
<dd><p>Place a batch of orders.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>order_arg_lists</strong> (<em>iterable</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.11)"><em>tuple</em></a><em>]</em>) – Tuples of args that <cite>order</cite> expects.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>order_ids</strong> – The unique identifier (or None) for each of the orders placed
(or not placed).</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.11)">list</a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a> or None]</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>This is required for <cite>Blotter</cite> subclasses to be able to place a batch
of orders, instead of being passed the order requests one at a time.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.finance.blotter.blotter.Blotter.cancel">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">cancel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">order_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">relay_status</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/blotter/blotter.html#Blotter.cancel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.finance.blotter.blotter.Blotter.cancel" title="Permalink to this definition">#</a></dt>
<dd><p>Cancel a single order</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>order_id</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – The id of the order</p></li>
<li><p><strong>relay_status</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Whether or not to record the status of the order</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.finance.blotter.blotter.Blotter.cancel_all_orders_for_asset">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">cancel_all_orders_for_asset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">asset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">warn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">relay_status</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/blotter/blotter.html#Blotter.cancel_all_orders_for_asset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.finance.blotter.blotter.Blotter.cancel_all_orders_for_asset" title="Permalink to this definition">#</a></dt>
<dd><p>Cancel all open orders for a given asset.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.finance.blotter.blotter.Blotter.get_transactions">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_transactions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bar_data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/blotter/blotter.html#Blotter.get_transactions"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.finance.blotter.blotter.Blotter.get_transactions" title="Permalink to this definition">#</a></dt>
<dd><p>Creates a list of transactions based on the current open orders,
slippage model, and commission model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>bar_data</strong> (<a class="reference internal" href="#zipline.protocol.BarData" title="zipline._protocol.BarData"><em>zipline._protocol.BarData</em></a>) – </p>
</dd>
</dl>
<p class="rubric">Notes</p>
<dl class="simple">
<dt>This method book-keeps the blotter’s open_orders dictionary, so that</dt><dd><p>it is accurate by the time we’re done processing open orders.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><strong>transactions_list</strong> (<em>List</em>) – transactions_list: list of transactions resulting from the current
open orders.  If there were no open orders, an empty list is
returned.</p></li>
<li><p><strong>commissions_list</strong> (<em>List</em>) – commissions_list: list of commissions resulting from filling the
open orders.  A commission is an object with “asset” and “cost”
parameters.</p></li>
<li><p><strong>closed_orders</strong> (<em>List</em>) – closed_orders: list of all the orders that have filled.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.finance.blotter.blotter.Blotter.hold">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">hold</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">order_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reason</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/blotter/blotter.html#Blotter.hold"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.finance.blotter.blotter.Blotter.hold" title="Permalink to this definition">#</a></dt>
<dd><p>Mark the order with order_id as ‘held’. Held is functionally similar
to ‘open’. When a fill (full or partial) arrives, the status
will automatically change back to open/filled as necessary.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.finance.blotter.blotter.Blotter.order">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">order</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">asset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">amount</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">style</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">order_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/blotter/blotter.html#Blotter.order"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.finance.blotter.blotter.Blotter.order" title="Permalink to this definition">#</a></dt>
<dd><p>Place an order.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>asset</strong> (<a class="reference internal" href="#zipline.assets.Asset" title="zipline.assets.Asset"><em>zipline.assets.Asset</em></a>) – The asset that this order is for.</p></li>
<li><p><strong>amount</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – The amount of shares to order. If <code class="docutils literal notranslate"><span class="pre">amount</span></code> is positive, this is
the number of shares to buy or cover. If <code class="docutils literal notranslate"><span class="pre">amount</span></code> is negative,
this is the number of shares to sell or short.</p></li>
<li><p><strong>style</strong> (<a class="reference internal" href="#zipline.finance.execution.ExecutionStyle" title="zipline.finance.execution.ExecutionStyle"><em>zipline.finance.execution.ExecutionStyle</em></a>) – The execution style for the order.</p></li>
<li><p><strong>order_id</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>optional</em>) – The unique identifier for this order.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>order_id</strong> – The unique identifier for this order, or None if no order was
placed.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a> or None</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>amount &gt; 0 : Buy/Cover
amount &lt; 0 : Sell/Short
Market order : order(asset, amount)
Limit order : order(asset, amount, style=LimitOrder(limit_price))
Stop order : order(asset, amount, style=StopOrder(stop_price))
StopLimit order : order(asset, amount,
style=StopLimitOrder(limit_price, stop_price))</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.finance.blotter.blotter.Blotter.process_splits">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">process_splits</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">splits</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/blotter/blotter.html#Blotter.process_splits"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.finance.blotter.blotter.Blotter.process_splits" title="Permalink to this definition">#</a></dt>
<dd><p>Processes a list of splits by modifying any open orders as needed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>splits</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.11)"><em>list</em></a>) – A list of splits.  Each split is a tuple of (asset, ratio).</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.finance.blotter.blotter.Blotter.prune_orders">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">prune_orders</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">closed_orders</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/blotter/blotter.html#Blotter.prune_orders"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.finance.blotter.blotter.Blotter.prune_orders" title="Permalink to this definition">#</a></dt>
<dd><p>Removes all given orders from the blotter’s open_orders list.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>closed_orders</strong> (<em>iterable</em><em> of </em><em>orders that are closed.</em>) – </p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.finance.blotter.blotter.Blotter.reject">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">reject</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">order_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reason</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/blotter/blotter.html#Blotter.reject"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.finance.blotter.blotter.Blotter.reject" title="Permalink to this definition">#</a></dt>
<dd><p>Mark the given order as ‘rejected’, which is functionally similar to
cancelled. The distinction is that rejections are involuntary (and
usually include a message from a broker indicating why the order was
rejected) while cancels are typically user-driven.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.finance.blotter.SimulationBlotter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.finance.blotter.</span></span><span class="sig-name descname"><span class="pre">SimulationBlotter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">equity_slippage</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">future_slippage</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">equity_commission</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">future_commission</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cancel_policy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/blotter/simulation_blotter.html#SimulationBlotter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.finance.blotter.SimulationBlotter" title="Permalink to this definition">#</a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="zipline.finance.blotter.SimulationBlotter.cancel">
<span class="sig-name descname"><span class="pre">cancel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">order_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">relay_status</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/blotter/simulation_blotter.html#SimulationBlotter.cancel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.finance.blotter.SimulationBlotter.cancel" title="Permalink to this definition">#</a></dt>
<dd><p>Cancel a single order</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>order_id</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – The id of the order</p></li>
<li><p><strong>relay_status</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Whether or not to record the status of the order</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.finance.blotter.SimulationBlotter.cancel_all_orders_for_asset">
<span class="sig-name descname"><span class="pre">cancel_all_orders_for_asset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">asset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">warn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">relay_status</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/blotter/simulation_blotter.html#SimulationBlotter.cancel_all_orders_for_asset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.finance.blotter.SimulationBlotter.cancel_all_orders_for_asset" title="Permalink to this definition">#</a></dt>
<dd><p>Cancel all open orders for a given asset.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.finance.blotter.SimulationBlotter.get_transactions">
<span class="sig-name descname"><span class="pre">get_transactions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bar_data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/blotter/simulation_blotter.html#SimulationBlotter.get_transactions"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.finance.blotter.SimulationBlotter.get_transactions" title="Permalink to this definition">#</a></dt>
<dd><p>Creates a list of transactions based on the current open orders,
slippage model, and commission model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>bar_data</strong> (<a class="reference internal" href="#zipline.protocol.BarData" title="zipline._protocol.BarData"><em>zipline._protocol.BarData</em></a>) – </p>
</dd>
</dl>
<p class="rubric">Notes</p>
<dl class="simple">
<dt>This method book-keeps the blotter’s open_orders dictionary, so that</dt><dd><p>it is accurate by the time we’re done processing open orders.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><strong>transactions_list</strong> (<em>List</em>) – transactions_list: list of transactions resulting from the current
open orders.  If there were no open orders, an empty list is
returned.</p></li>
<li><p><strong>commissions_list</strong> (<em>List</em>) – commissions_list: list of commissions resulting from filling the
open orders.  A commission is an object with “asset” and “cost”
parameters.</p></li>
<li><p><strong>closed_orders</strong> (<em>List</em>) – closed_orders: list of all the orders that have filled.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.finance.blotter.SimulationBlotter.hold">
<span class="sig-name descname"><span class="pre">hold</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">order_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reason</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/blotter/simulation_blotter.html#SimulationBlotter.hold"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.finance.blotter.SimulationBlotter.hold" title="Permalink to this definition">#</a></dt>
<dd><p>Mark the order with order_id as ‘held’. Held is functionally similar
to ‘open’. When a fill (full or partial) arrives, the status
will automatically change back to open/filled as necessary.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.finance.blotter.SimulationBlotter.order">
<span class="sig-name descname"><span class="pre">order</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">asset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">amount</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">style</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">order_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/blotter/simulation_blotter.html#SimulationBlotter.order"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.finance.blotter.SimulationBlotter.order" title="Permalink to this definition">#</a></dt>
<dd><p>Place an order.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>asset</strong> (<a class="reference internal" href="#zipline.assets.Asset" title="zipline.assets.Asset"><em>zipline.assets.Asset</em></a>) – The asset that this order is for.</p></li>
<li><p><strong>amount</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – The amount of shares to order. If <code class="docutils literal notranslate"><span class="pre">amount</span></code> is positive, this is
the number of shares to buy or cover. If <code class="docutils literal notranslate"><span class="pre">amount</span></code> is negative,
this is the number of shares to sell or short.</p></li>
<li><p><strong>style</strong> (<a class="reference internal" href="#zipline.finance.execution.ExecutionStyle" title="zipline.finance.execution.ExecutionStyle"><em>zipline.finance.execution.ExecutionStyle</em></a>) – The execution style for the order.</p></li>
<li><p><strong>order_id</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>optional</em>) – The unique identifier for this order.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>order_id</strong> – The unique identifier for this order, or None if no order was
placed.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a> or None</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>amount &gt; 0 :: Buy/Cover
amount &lt; 0 :: Sell/Short
Market order:    order(asset, amount)
Limit order:     order(asset, amount, style=LimitOrder(limit_price))
Stop order:      order(asset, amount, style=StopOrder(stop_price))
StopLimit order: order(asset, amount, style=StopLimitOrder(limit_price,
stop_price))</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.finance.blotter.SimulationBlotter.process_splits">
<span class="sig-name descname"><span class="pre">process_splits</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">splits</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/blotter/simulation_blotter.html#SimulationBlotter.process_splits"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.finance.blotter.SimulationBlotter.process_splits" title="Permalink to this definition">#</a></dt>
<dd><p>Processes a list of splits by modifying any open orders as needed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>splits</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.11)"><em>list</em></a>) – A list of splits.  Each split is a tuple of (asset, ratio).</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.finance.blotter.SimulationBlotter.prune_orders">
<span class="sig-name descname"><span class="pre">prune_orders</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">closed_orders</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/blotter/simulation_blotter.html#SimulationBlotter.prune_orders"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.finance.blotter.SimulationBlotter.prune_orders" title="Permalink to this definition">#</a></dt>
<dd><p>Removes all given orders from the blotter’s open_orders list.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>closed_orders</strong> (<em>iterable</em><em> of </em><em>orders that are closed.</em>) – </p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.finance.blotter.SimulationBlotter.reject">
<span class="sig-name descname"><span class="pre">reject</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">order_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reason</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/blotter/simulation_blotter.html#SimulationBlotter.reject"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.finance.blotter.SimulationBlotter.reject" title="Permalink to this definition">#</a></dt>
<dd><p>Mark the given order as ‘rejected’, which is functionally similar to
cancelled. The distinction is that rejections are involuntary (and
usually include a message from a broker indicating why the order was
rejected) while cancels are typically user-driven.</p>
</dd></dl>

</dd></dl>

</section>
<section id="pipeline-api">
<span id="id1"></span><h2>Pipeline API<a class="headerlink" href="#pipeline-api" title="Permalink to this heading">#</a></h2>
<p>A <a class="reference internal" href="#zipline.pipeline.Pipeline" title="zipline.pipeline.Pipeline"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pipeline</span></code></a> enables faster and more memory-efficient execution by optimizing the computation
of factors during a backtest.</p>
<dl class="py class">
<dt class="sig sig-object py" id="zipline.pipeline.Pipeline">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.pipeline.</span></span><span class="sig-name descname"><span class="pre">Pipeline</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">screen</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">domain</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">GENERIC</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/pipeline.html#Pipeline"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.Pipeline" title="Permalink to this definition">#</a></dt>
<dd><p>A Pipeline object represents a collection of named expressions to be
compiled and executed by a PipelineEngine.</p>
<p>A Pipeline has two important attributes: ‘columns’, a dictionary of named
<a class="reference internal" href="#zipline.pipeline.Term" title="zipline.pipeline.Term"><code class="xref py py-class docutils literal notranslate"><span class="pre">Term</span></code></a> instances, and ‘screen’, a
<a class="reference internal" href="#zipline.pipeline.Filter" title="zipline.pipeline.Filter"><code class="xref py py-class docutils literal notranslate"><span class="pre">Filter</span></code></a> representing criteria for
including an asset in the results of a Pipeline.</p>
<p>To compute a pipeline in the context of a TradingAlgorithm, users must call
<code class="docutils literal notranslate"><span class="pre">attach_pipeline</span></code> in their <code class="docutils literal notranslate"><span class="pre">initialize</span></code> function to register that the
pipeline should be computed each trading day. The most recent outputs of an
attached pipeline can be retrieved by calling <code class="docutils literal notranslate"><span class="pre">pipeline_output</span></code> from
<code class="docutils literal notranslate"><span class="pre">handle_data</span></code>, <code class="docutils literal notranslate"><span class="pre">before_trading_start</span></code>, or a scheduled function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>columns</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)"><em>dict</em></a><em>, </em><em>optional</em>) – Initial columns.</p></li>
<li><p><strong>screen</strong> (<a class="reference internal" href="#zipline.pipeline.Filter" title="zipline.pipeline.Filter"><em>zipline.pipeline.Filter</em></a><em>, </em><em>optional</em>) – Initial screen.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.Pipeline.add">
<span class="sig-name descname"><span class="pre">add</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">term</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/pipeline.html#Pipeline.add"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.Pipeline.add" title="Permalink to this definition">#</a></dt>
<dd><p>Add a column.</p>
<p>The results of computing <code class="docutils literal notranslate"><span class="pre">term</span></code> will show up as a column in the
DataFrame produced by running this pipeline.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>column</strong> (<a class="reference internal" href="#zipline.pipeline.Term" title="zipline.pipeline.Term"><em>zipline.pipeline.Term</em></a>) – A Filter, Factor, or Classifier to add to the pipeline.</p></li>
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – Name of the column to add.</p></li>
<li><p><strong>overwrite</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Whether to overwrite the existing entry if we already have a column
named <cite>name</cite>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.Pipeline.domain">
<span class="sig-name descname"><span class="pre">domain</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">default</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/pipeline.html#Pipeline.domain"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.Pipeline.domain" title="Permalink to this definition">#</a></dt>
<dd><p>Get the domain for this pipeline.</p>
<ul class="simple">
<li><p>If an explicit domain was provided at construction time, use it.</p></li>
<li><p>Otherwise, infer a domain from the registered columns.</p></li>
<li><p>If no domain can be inferred, return <code class="docutils literal notranslate"><span class="pre">default</span></code>.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>default</strong> (<em>zipline.pipeline.domain.Domain</em>) – Domain to use if no domain can be inferred from this pipeline by
itself.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>domain</strong> – The domain for the pipeline.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>zipline.pipeline.domain.Domain</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>AmbiguousDomain</strong> – </p></li>
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.11)"><strong>ValueError</strong></a> – If the terms in <code class="docutils literal notranslate"><span class="pre">self</span></code> conflict with self._domain.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.Pipeline.remove">
<span class="sig-name descname"><span class="pre">remove</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/pipeline.html#Pipeline.remove"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.Pipeline.remove" title="Permalink to this definition">#</a></dt>
<dd><p>Remove a column.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – The name of the column to remove.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#KeyError" title="(in Python v3.11)"><strong>KeyError</strong></a> – If <cite>name</cite> is not in self.columns.</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>removed</strong> – The removed term.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#zipline.pipeline.Term" title="zipline.pipeline.Term">zipline.pipeline.Term</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.Pipeline.set_screen">
<span class="sig-name descname"><span class="pre">set_screen</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">screen</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/pipeline.html#Pipeline.set_screen"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.Pipeline.set_screen" title="Permalink to this definition">#</a></dt>
<dd><p>Set a screen on this Pipeline.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filter</strong> (<a class="reference internal" href="#zipline.pipeline.Filter" title="zipline.pipeline.Filter"><em>zipline.pipeline.Filter</em></a>) – The filter to apply as a screen.</p></li>
<li><p><strong>overwrite</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Whether to overwrite any existing screen.  If overwrite is False
and self.screen is not None, we raise an error.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.Pipeline.show_graph">
<span class="sig-name descname"><span class="pre">show_graph</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">format</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'svg'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/pipeline.html#Pipeline.show_graph"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.Pipeline.show_graph" title="Permalink to this definition">#</a></dt>
<dd><p>Render this Pipeline as a DAG.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>format</strong> (<em>{'svg'</em><em>, </em><em>'png'</em><em>, </em><em>'jpeg'}</em>) – Image format to render with.  Default is ‘svg’.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.Pipeline.to_execution_plan">
<span class="sig-name descname"><span class="pre">to_execution_plan</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">domain</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_screen</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_date</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_date</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/pipeline.html#Pipeline.to_execution_plan"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.Pipeline.to_execution_plan" title="Permalink to this definition">#</a></dt>
<dd><p>Compile into an ExecutionPlan.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>domain</strong> (<em>zipline.pipeline.domain.Domain</em>) – Domain on which the pipeline will be executed.</p></li>
<li><p><strong>default_screen</strong> (<a class="reference internal" href="#zipline.pipeline.Term" title="zipline.pipeline.Term"><em>zipline.pipeline.Term</em></a>) – Term to use as a screen if self.screen is None.</p></li>
<li><p><strong>all_dates</strong> (<em>pd.DatetimeIndex</em>) – A calendar of dates to use to calculate starts and ends for each
term.</p></li>
<li><p><strong>start_date</strong> (<em>pd.Timestamp</em>) – The first date of requested output.</p></li>
<li><p><strong>end_date</strong> (<em>pd.Timestamp</em>) – The last date of requested output.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>graph</strong> – Graph encoding term dependencies, including metadata about extra
row requirements.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>zipline.pipeline.graph.ExecutionPlan</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.Pipeline.to_simple_graph">
<span class="sig-name descname"><span class="pre">to_simple_graph</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">default_screen</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/pipeline.html#Pipeline.to_simple_graph"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.Pipeline.to_simple_graph" title="Permalink to this definition">#</a></dt>
<dd><p>Compile into a simple TermGraph with no extra row metadata.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>default_screen</strong> (<a class="reference internal" href="#zipline.pipeline.Term" title="zipline.pipeline.Term"><em>zipline.pipeline.Term</em></a>) – Term to use as a screen if self.screen is None.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>graph</strong> – Graph encoding term dependencies.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>zipline.pipeline.graph.TermGraph</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="zipline.pipeline.Pipeline.columns">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">columns</span></span><a class="headerlink" href="#zipline.pipeline.Pipeline.columns" title="Permalink to this definition">#</a></dt>
<dd><p>The output columns of this pipeline.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>columns</strong> – Map from column name to expression computing that column’s output.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)">dict</a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a>, zipline.pipeline.ComputableTerm]</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="zipline.pipeline.Pipeline.screen">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">screen</span></span><a class="headerlink" href="#zipline.pipeline.Pipeline.screen" title="Permalink to this definition">#</a></dt>
<dd><p>The screen of this pipeline.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>screen</strong> – Term defining the screen for this pipeline. If <code class="docutils literal notranslate"><span class="pre">screen</span></code> is a
filter, rows that do not pass the filter (i.e., rows for which the
filter computed <code class="docutils literal notranslate"><span class="pre">False</span></code>) will be dropped from the output of this
pipeline before returning results.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#zipline.pipeline.Filter" title="zipline.pipeline.Filter">zipline.pipeline.Filter</a> or None</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>Setting a screen on a Pipeline does not change the values produced for
any rows: it only affects whether a given row is returned. Computing a
pipeline with a screen is logically equivalent to computing the
pipeline without the screen and then, as a post-processing-step,
filtering out any rows for which the screen computed <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.pipeline.CustomFactor">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.pipeline.</span></span><span class="sig-name descname"><span class="pre">CustomFactor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">missing_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ndim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/factor.html#CustomFactor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.CustomFactor" title="Permalink to this definition">#</a></dt>
<dd><p>Base class for user-defined Factors.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>inputs</strong> (<em>iterable</em><em>, </em><em>optional</em>) – An iterable of <cite>BoundColumn</cite> instances (e.g. USEquityPricing.close),
describing the data to load and pass to <cite>self.compute</cite>.  If this
argument is not passed to the CustomFactor constructor, we look for a
class-level attribute named <cite>inputs</cite>.</p></li>
<li><p><strong>outputs</strong> (<em>iterable</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>]</em><em>, </em><em>optional</em>) – An iterable of strings which represent the names of each output this
factor should compute and return. If this argument is not passed to the
CustomFactor constructor, we look for a class-level attribute named
<cite>outputs</cite>.</p></li>
<li><p><strong>window_length</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>, </em><em>optional</em>) – Number of rows to pass for each input.  If this argument is not passed
to the CustomFactor constructor, we look for a class-level attribute
named <cite>window_length</cite>.</p></li>
<li><p><strong>mask</strong> (<a class="reference internal" href="#zipline.pipeline.Filter" title="zipline.pipeline.Filter"><em>zipline.pipeline.Filter</em></a><em>, </em><em>optional</em>) – A Filter describing the assets on which we should compute each day.
Each call to <code class="docutils literal notranslate"><span class="pre">CustomFactor.compute</span></code> will only receive assets for
which <code class="docutils literal notranslate"><span class="pre">mask</span></code> produced True on the day for which compute is being
called.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>Users implementing their own Factors should subclass CustomFactor and
implement a method named <cite>compute</cite> with the following signature:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">compute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">today</span><span class="p">,</span> <span class="n">assets</span><span class="p">,</span> <span class="n">out</span><span class="p">,</span> <span class="o">*</span><span class="n">inputs</span><span class="p">):</span>
   <span class="o">...</span>
</pre></div>
</div>
<p>On each simulation date, <code class="docutils literal notranslate"><span class="pre">compute</span></code> will be called with the current date,
an array of sids, an output array, and an input array for each expression
passed as inputs to the CustomFactor constructor.</p>
<p>The specific types of the values passed to <cite>compute</cite> are as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>today : np.datetime64[ns]
    Row label for the last row of all arrays passed as `inputs`.
assets : np.array[int64, ndim=1]
    Column labels for `out` and`inputs`.
out : np.array[self.dtype, ndim=1]
    Output array of the same shape as `assets`.  `compute` should write
    its desired return values into `out`. If multiple outputs are
    specified, `compute` should write its desired return values into
    `out.&lt;output_name&gt;` for each output name in `self.outputs`.
*inputs : tuple of np.array
    Raw data arrays corresponding to the values of `self.inputs`.
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">compute</span></code> functions should expect to be passed NaN values for dates on
which no data was available for an asset.  This may include dates on which
an asset did not yet exist.</p>
<p>For example, if a CustomFactor requires 10 rows of close price data, and
asset A started trading on Monday June 2nd, 2014, then on Tuesday, June
3rd, 2014, the column of input data for asset A will have 9 leading NaNs
for the preceding days on which data was not yet available.</p>
<p class="rubric">Examples</p>
<p>A CustomFactor with pre-declared defaults:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">TenDayRange</span><span class="p">(</span><span class="n">CustomFactor</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Computes the difference between the highest high in the last 10</span>
<span class="sd">    days and the lowest low.</span>

<span class="sd">    Pre-declares high and low as default inputs and `window_length` as</span>
<span class="sd">    10.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">inputs</span> <span class="o">=</span> <span class="p">[</span><span class="n">USEquityPricing</span><span class="o">.</span><span class="n">high</span><span class="p">,</span> <span class="n">USEquityPricing</span><span class="o">.</span><span class="n">low</span><span class="p">]</span>
    <span class="n">window_length</span> <span class="o">=</span> <span class="mi">10</span>

    <span class="k">def</span> <span class="nf">compute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">today</span><span class="p">,</span> <span class="n">assets</span><span class="p">,</span> <span class="n">out</span><span class="p">,</span> <span class="n">highs</span><span class="p">,</span> <span class="n">lows</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">numpy</span> <span class="kn">import</span> <span class="n">nanmin</span><span class="p">,</span> <span class="n">nanmax</span>

        <span class="n">highest_highs</span> <span class="o">=</span> <span class="n">nanmax</span><span class="p">(</span><span class="n">highs</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">lowest_lows</span> <span class="o">=</span> <span class="n">nanmin</span><span class="p">(</span><span class="n">lows</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">out</span><span class="p">[:]</span> <span class="o">=</span> <span class="n">highest_highs</span> <span class="o">-</span> <span class="n">lowest_lows</span>

<span class="c1"># Doesn&#39;t require passing inputs or window_length because they&#39;re</span>
<span class="c1"># pre-declared as defaults for the TenDayRange class.</span>
<span class="n">ten_day_range</span> <span class="o">=</span> <span class="n">TenDayRange</span><span class="p">()</span>
</pre></div>
</div>
<p>A CustomFactor without defaults:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MedianValue</span><span class="p">(</span><span class="n">CustomFactor</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Computes the median value of an arbitrary single input over an</span>
<span class="sd">    arbitrary window..</span>

<span class="sd">    Does not declare any defaults, so values for `window_length` and</span>
<span class="sd">    `inputs` must be passed explicitly on every construction.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">compute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">today</span><span class="p">,</span> <span class="n">assets</span><span class="p">,</span> <span class="n">out</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">numpy</span> <span class="kn">import</span> <span class="n">nanmedian</span>
        <span class="n">out</span><span class="p">[:]</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">nanmedian</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="c1"># Values for `inputs` and `window_length` must be passed explicitly to</span>
<span class="c1"># MedianValue.</span>
<span class="n">median_close10</span> <span class="o">=</span> <span class="n">MedianValue</span><span class="p">([</span><span class="n">USEquityPricing</span><span class="o">.</span><span class="n">close</span><span class="p">],</span> <span class="n">window_length</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">median_low15</span> <span class="o">=</span> <span class="n">MedianValue</span><span class="p">([</span><span class="n">USEquityPricing</span><span class="o">.</span><span class="n">low</span><span class="p">],</span> <span class="n">window_length</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
</pre></div>
</div>
<p>A CustomFactor with multiple outputs:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MultipleOutputs</span><span class="p">(</span><span class="n">CustomFactor</span><span class="p">):</span>
    <span class="n">inputs</span> <span class="o">=</span> <span class="p">[</span><span class="n">USEquityPricing</span><span class="o">.</span><span class="n">close</span><span class="p">]</span>
    <span class="n">outputs</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;alpha&#39;</span><span class="p">,</span> <span class="s1">&#39;beta&#39;</span><span class="p">]</span>
    <span class="n">window_length</span> <span class="o">=</span> <span class="n">N</span>

    <span class="k">def</span> <span class="nf">compute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">today</span><span class="p">,</span> <span class="n">assets</span><span class="p">,</span> <span class="n">out</span><span class="p">,</span> <span class="n">close</span><span class="p">):</span>
        <span class="n">computed_alpha</span><span class="p">,</span> <span class="n">computed_beta</span> <span class="o">=</span> <span class="n">some_function</span><span class="p">(</span><span class="n">close</span><span class="p">)</span>
        <span class="n">out</span><span class="o">.</span><span class="n">alpha</span><span class="p">[:]</span> <span class="o">=</span> <span class="n">computed_alpha</span>
        <span class="n">out</span><span class="o">.</span><span class="n">beta</span><span class="p">[:]</span> <span class="o">=</span> <span class="n">computed_beta</span>

<span class="c1"># Each output is returned as its own Factor upon instantiation.</span>
<span class="n">alpha</span><span class="p">,</span> <span class="n">beta</span> <span class="o">=</span> <span class="n">MultipleOutputs</span><span class="p">()</span>

<span class="c1"># Equivalently, we can create a single factor instance and access each</span>
<span class="c1"># output as an attribute of that instance.</span>
<span class="n">multiple_outputs</span> <span class="o">=</span> <span class="n">MultipleOutputs</span><span class="p">()</span>
<span class="n">alpha</span> <span class="o">=</span> <span class="n">multiple_outputs</span><span class="o">.</span><span class="n">alpha</span>
<span class="n">beta</span> <span class="o">=</span> <span class="n">multiple_outputs</span><span class="o">.</span><span class="n">beta</span>
</pre></div>
</div>
<p>Note: If a CustomFactor has multiple outputs, all outputs must have the
same dtype. For instance, in the example above, if alpha is a float then
beta must also be a float.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="zipline.pipeline.CustomFactor.dtype">
<span class="sig-name descname"><span class="pre">dtype</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">dtype('float64')</span></em><a class="headerlink" href="#zipline.pipeline.CustomFactor.dtype" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.pipeline.Filter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.pipeline.</span></span><span class="sig-name descname"><span class="pre">Filter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">domain</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/filters/filter.html#Filter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.Filter" title="Permalink to this definition">#</a></dt>
<dd><p>Pipeline expression computing a boolean output.</p>
<p>Filters are most commonly useful for describing sets of assets to include
or exclude for some particular purpose. Many Pipeline API functions accept
a <code class="docutils literal notranslate"><span class="pre">mask</span></code> argument, which can be supplied a Filter indicating that only
values passing the Filter should be considered when performing the
requested computation. For example, <a class="reference internal" href="#zipline.pipeline.Factor.top" title="zipline.pipeline.Factor.top"><code class="xref py py-meth docutils literal notranslate"><span class="pre">zipline.pipeline.Factor.top()</span></code></a>
accepts a mask indicating that ranks should be computed only on assets that
passed the specified Filter.</p>
<p>The most common way to construct a Filter is via one of the comparison
operators (<code class="docutils literal notranslate"><span class="pre">&lt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;=</span></code>, <code class="docutils literal notranslate"><span class="pre">!=</span></code>, <code class="docutils literal notranslate"><span class="pre">eq</span></code>, <code class="docutils literal notranslate"><span class="pre">&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&gt;=</span></code>) of
<a class="reference internal" href="#zipline.pipeline.Factor" title="zipline.pipeline.Factor"><code class="xref py py-class docutils literal notranslate"><span class="pre">Factor</span></code></a>. For example, a natural way to construct
a Filter for stocks with a 10-day VWAP less than $20.0 is to first
construct a Factor computing 10-day VWAP and compare it to the scalar value
20.0:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">zipline.pipeline.factors</span> <span class="kn">import</span> <span class="n">VWAP</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">vwap_10</span> <span class="o">=</span> <span class="n">VWAP</span><span class="p">(</span><span class="n">window_length</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">vwaps_under_20</span> <span class="o">=</span> <span class="p">(</span><span class="n">vwap_10</span> <span class="o">&lt;=</span> <span class="mi">20</span><span class="p">)</span>
</pre></div>
</div>
<p>Filters can also be constructed via comparisons between two Factors.  For
example, to construct a Filter producing True for asset/date pairs where
the asset’s 10-day VWAP was greater than it’s 30-day VWAP:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">short_vwap</span> <span class="o">=</span> <span class="n">VWAP</span><span class="p">(</span><span class="n">window_length</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">long_vwap</span> <span class="o">=</span> <span class="n">VWAP</span><span class="p">(</span><span class="n">window_length</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">higher_short_vwap</span> <span class="o">=</span> <span class="p">(</span><span class="n">short_vwap</span> <span class="o">&gt;</span> <span class="n">long_vwap</span><span class="p">)</span>
</pre></div>
</div>
<p>Filters can be combined via the <code class="docutils literal notranslate"><span class="pre">&amp;</span></code> (and) and <code class="docutils literal notranslate"><span class="pre">|</span></code> (or) operators.</p>
<p><code class="docutils literal notranslate"><span class="pre">&amp;</span></code>-ing together two filters produces a new Filter that produces True if
<strong>both</strong> of the inputs produced True.</p>
<p><code class="docutils literal notranslate"><span class="pre">|</span></code>-ing together two filters produces a new Filter that produces True if
<strong>either</strong> of its inputs produced True.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">~</span></code> operator can be used to invert a Filter, swapping all True values
with Falses and vice-versa.</p>
<p>Filters may be set as the <code class="docutils literal notranslate"><span class="pre">screen</span></code> attribute of a Pipeline, indicating
asset/date pairs for which the filter produces False should be excluded
from the Pipeline’s output.  This is useful both for reducing noise in the
output of a Pipeline and for reducing memory consumption of Pipeline
results.</p>
<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.Filter.__and__">
<span class="sig-name descname"><span class="pre">__and__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.pipeline.Filter.__and__" title="Permalink to this definition">#</a></dt>
<dd><p>Binary Operator: ‘&amp;’</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.Filter.__or__">
<span class="sig-name descname"><span class="pre">__or__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.pipeline.Filter.__or__" title="Permalink to this definition">#</a></dt>
<dd><p>Binary Operator: ‘|’</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.Filter.if_else">
<span class="sig-name descname"><span class="pre">if_else</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">if_true</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">if_false</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/filters/filter.html#Filter.if_else"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.Filter.if_else" title="Permalink to this definition">#</a></dt>
<dd><p>Create a term that selects values from one of two choices.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>if_true</strong> (<em>zipline.pipeline.term.ComputableTerm</em>) – Expression whose values should be used at locations where this
filter outputs True.</p></li>
<li><p><strong>if_false</strong> (<em>zipline.pipeline.term.ComputableTerm</em>) – Expression whose values should be used at locations where this
filter outputs False.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><p><strong>merged</strong> – A term that computes by taking values from either <code class="docutils literal notranslate"><span class="pre">if_true</span></code> or
<code class="docutils literal notranslate"><span class="pre">if_false</span></code>, depending on the values produced by <code class="docutils literal notranslate"><span class="pre">self</span></code>.</p>
<p>The returned term draws from``if_true`` at locations where <code class="docutils literal notranslate"><span class="pre">self</span></code>
produces True, and it draws from <code class="docutils literal notranslate"><span class="pre">if_false</span></code> at locations where
<code class="docutils literal notranslate"><span class="pre">self</span></code> produces False.</p>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>zipline.pipeline.term.ComputableTerm</p>
</dd>
</dl>
<p class="rubric">Example</p>
<p>Let <code class="docutils literal notranslate"><span class="pre">f</span></code> be a Factor that produces the following output:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>             <span class="n">AAPL</span>   <span class="n">MSFT</span>    <span class="n">MCD</span>     <span class="n">BK</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">13</span>    <span class="mf">1.0</span>    <span class="mf">2.0</span>    <span class="mf">3.0</span>    <span class="mf">4.0</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">14</span>    <span class="mf">5.0</span>    <span class="mf">6.0</span>    <span class="mf">7.0</span>    <span class="mf">8.0</span>
</pre></div>
</div>
<p>Let <code class="docutils literal notranslate"><span class="pre">g</span></code> be another Factor that produces the following output:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>             <span class="n">AAPL</span>   <span class="n">MSFT</span>    <span class="n">MCD</span>     <span class="n">BK</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">13</span>   <span class="mf">10.0</span>   <span class="mf">20.0</span>   <span class="mf">30.0</span>   <span class="mf">40.0</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">14</span>   <span class="mf">50.0</span>   <span class="mf">60.0</span>   <span class="mf">70.0</span>   <span class="mf">80.0</span>
</pre></div>
</div>
<p>Finally, let <code class="docutils literal notranslate"><span class="pre">condition</span></code> be a Filter that produces the following
output:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>             <span class="n">AAPL</span>   <span class="n">MSFT</span>    <span class="n">MCD</span>     <span class="n">BK</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">13</span>   <span class="kc">True</span>  <span class="kc">False</span>   <span class="kc">True</span>  <span class="kc">False</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">14</span>   <span class="kc">True</span>   <span class="kc">True</span>  <span class="kc">False</span>  <span class="kc">False</span>
</pre></div>
</div>
<p>Then, the expression <code class="docutils literal notranslate"><span class="pre">condition.if_else(f,</span> <span class="pre">g)</span></code> produces the following
output:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>             <span class="n">AAPL</span>   <span class="n">MSFT</span>    <span class="n">MCD</span>     <span class="n">BK</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">13</span>    <span class="mf">1.0</span>   <span class="mf">20.0</span>    <span class="mf">3.0</span>   <span class="mf">40.0</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">14</span>    <span class="mf">5.0</span>    <span class="mf">6.0</span>   <span class="mf">70.0</span>   <span class="mf">80.0</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.where.html#numpy.where" title="(in NumPy v1.25)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.where</span></code></a>, <a class="reference internal" href="#zipline.pipeline.Factor.fillna" title="zipline.pipeline.Factor.fillna"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Factor.fillna</span></code></a></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.pipeline.Factor">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.pipeline.</span></span><span class="sig-name descname"><span class="pre">Factor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">domain</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/factor.html#Factor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.Factor" title="Permalink to this definition">#</a></dt>
<dd><p>Pipeline API expression producing a numerical or date-valued output.</p>
<p>Factors are the most commonly-used Pipeline term, representing the result
of any computation producing a numerical result.</p>
<p>Factors can be combined, both with other Factors and with scalar values,
via any of the builtin mathematical operators (<code class="docutils literal notranslate"><span class="pre">+</span></code>, <code class="docutils literal notranslate"><span class="pre">-</span></code>, <code class="docutils literal notranslate"><span class="pre">*</span></code>, etc).</p>
<p>This makes it easy to write complex expressions that combine multiple
Factors. For example, constructing a Factor that computes the average of
two other Factors is simply:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f1</span> <span class="o">=</span> <span class="n">SomeFactor</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>  
<span class="gp">&gt;&gt;&gt; </span><span class="n">f2</span> <span class="o">=</span> <span class="n">SomeOtherFactor</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>  
<span class="gp">&gt;&gt;&gt; </span><span class="n">average</span> <span class="o">=</span> <span class="p">(</span><span class="n">f1</span> <span class="o">+</span> <span class="n">f2</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.0</span>  
</pre></div>
</div>
<p>Factors can also be converted into <a class="reference internal" href="#zipline.pipeline.Filter" title="zipline.pipeline.Filter"><code class="xref py py-class docutils literal notranslate"><span class="pre">zipline.pipeline.Filter</span></code></a> objects
via comparison operators: (<code class="docutils literal notranslate"><span class="pre">&lt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;=</span></code>, <code class="docutils literal notranslate"><span class="pre">!=</span></code>, <code class="docutils literal notranslate"><span class="pre">eq</span></code>, <code class="docutils literal notranslate"><span class="pre">&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&gt;=</span></code>).</p>
<p>There are many natural operators defined on Factors besides the basic
numerical operators. These include methods for identifying missing or
extreme-valued outputs (<code class="xref py py-meth docutils literal notranslate"><span class="pre">isnull()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">notnull()</span></code>, <a class="reference internal" href="#zipline.pipeline.Factor.isnan" title="zipline.pipeline.Factor.isnan"><code class="xref py py-meth docutils literal notranslate"><span class="pre">isnan()</span></code></a>,
<a class="reference internal" href="#zipline.pipeline.Factor.notnan" title="zipline.pipeline.Factor.notnan"><code class="xref py py-meth docutils literal notranslate"><span class="pre">notnan()</span></code></a>), methods for normalizing outputs (<a class="reference internal" href="#zipline.pipeline.Factor.rank" title="zipline.pipeline.Factor.rank"><code class="xref py py-meth docutils literal notranslate"><span class="pre">rank()</span></code></a>,
<a class="reference internal" href="#zipline.pipeline.Factor.demean" title="zipline.pipeline.Factor.demean"><code class="xref py py-meth docutils literal notranslate"><span class="pre">demean()</span></code></a>, <a class="reference internal" href="#zipline.pipeline.Factor.zscore" title="zipline.pipeline.Factor.zscore"><code class="xref py py-meth docutils literal notranslate"><span class="pre">zscore()</span></code></a>), and methods for constructing Filters based
on rank-order properties of results (<a class="reference internal" href="#zipline.pipeline.Factor.top" title="zipline.pipeline.Factor.top"><code class="xref py py-meth docutils literal notranslate"><span class="pre">top()</span></code></a>, <a class="reference internal" href="#zipline.pipeline.Factor.bottom" title="zipline.pipeline.Factor.bottom"><code class="xref py py-meth docutils literal notranslate"><span class="pre">bottom()</span></code></a>,
<a class="reference internal" href="#zipline.pipeline.Factor.percentile_between" title="zipline.pipeline.Factor.percentile_between"><code class="xref py py-meth docutils literal notranslate"><span class="pre">percentile_between()</span></code></a>).</p>
<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.Factor.eq">
<span class="sig-name descname"><span class="pre">eq</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.pipeline.Factor.eq" title="Permalink to this definition">#</a></dt>
<dd><p>Construct a <a class="reference internal" href="#zipline.pipeline.Filter" title="zipline.pipeline.Filter"><code class="xref py py-class docutils literal notranslate"><span class="pre">Filter</span></code></a> computing <code class="docutils literal notranslate"><span class="pre">self</span> <span class="pre">==</span> <span class="pre">other</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>other</strong> (<a class="reference internal" href="#zipline.pipeline.Factor" title="zipline.pipeline.Factor"><em>zipline.pipeline.Factor</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Right-hand side of the expression.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>filter</strong> – Filter computing <code class="docutils literal notranslate"><span class="pre">self</span> <span class="pre">==</span> <span class="pre">other</span></code> with the outputs of <code class="docutils literal notranslate"><span class="pre">self</span></code> and
<code class="docutils literal notranslate"><span class="pre">other</span></code>.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#zipline.pipeline.Filter" title="zipline.pipeline.Filter">zipline.pipeline.Filter</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.Factor.demean">
<span class="sig-name descname"><span class="pre">demean</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">groupby</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/factor.html#Factor.demean"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.Factor.demean" title="Permalink to this definition">#</a></dt>
<dd><p>Construct a Factor that computes <code class="docutils literal notranslate"><span class="pre">self</span></code> and subtracts the mean from
row of the result.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">mask</span></code> is supplied, ignore values where <code class="docutils literal notranslate"><span class="pre">mask</span></code> returns False
when computing row means, and output NaN anywhere the mask is False.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">groupby</span></code> is supplied, compute by partitioning each row based on
the values produced by <code class="docutils literal notranslate"><span class="pre">groupby</span></code>, de-meaning the partitioned arrays,
and stitching the sub-results back together.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mask</strong> (<a class="reference internal" href="#zipline.pipeline.Filter" title="zipline.pipeline.Filter"><em>zipline.pipeline.Filter</em></a><em>, </em><em>optional</em>) – A Filter defining values to ignore when computing means.</p></li>
<li><p><strong>groupby</strong> (<em>zipline.pipeline.Classifier</em><em>, </em><em>optional</em>) – A classifier defining partitions over which to compute means.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Let <code class="docutils literal notranslate"><span class="pre">f</span></code> be a Factor which would produce the following output:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>             <span class="n">AAPL</span>   <span class="n">MSFT</span>    <span class="n">MCD</span>     <span class="n">BK</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">13</span>    <span class="mf">1.0</span>    <span class="mf">2.0</span>    <span class="mf">3.0</span>    <span class="mf">4.0</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">14</span>    <span class="mf">1.5</span>    <span class="mf">2.5</span>    <span class="mf">3.5</span>    <span class="mf">1.0</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">15</span>    <span class="mf">2.0</span>    <span class="mf">3.0</span>    <span class="mf">4.0</span>    <span class="mf">1.5</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">16</span>    <span class="mf">2.5</span>    <span class="mf">3.5</span>    <span class="mf">1.0</span>    <span class="mf">2.0</span>
</pre></div>
</div>
<p>Let <code class="docutils literal notranslate"><span class="pre">c</span></code> be a Classifier producing the following output:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>             <span class="n">AAPL</span>   <span class="n">MSFT</span>    <span class="n">MCD</span>     <span class="n">BK</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">13</span>      <span class="mi">1</span>      <span class="mi">1</span>      <span class="mi">2</span>      <span class="mi">2</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">14</span>      <span class="mi">1</span>      <span class="mi">1</span>      <span class="mi">2</span>      <span class="mi">2</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">15</span>      <span class="mi">1</span>      <span class="mi">1</span>      <span class="mi">2</span>      <span class="mi">2</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">16</span>      <span class="mi">1</span>      <span class="mi">1</span>      <span class="mi">2</span>      <span class="mi">2</span>
</pre></div>
</div>
<p>Let <code class="docutils literal notranslate"><span class="pre">m</span></code> be a Filter producing the following output:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>             <span class="n">AAPL</span>   <span class="n">MSFT</span>    <span class="n">MCD</span>     <span class="n">BK</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">13</span>  <span class="kc">False</span>   <span class="kc">True</span>   <span class="kc">True</span>   <span class="kc">True</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">14</span>   <span class="kc">True</span>  <span class="kc">False</span>   <span class="kc">True</span>   <span class="kc">True</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">15</span>   <span class="kc">True</span>   <span class="kc">True</span>  <span class="kc">False</span>   <span class="kc">True</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">16</span>   <span class="kc">True</span>   <span class="kc">True</span>   <span class="kc">True</span>  <span class="kc">False</span>
</pre></div>
</div>
<p>Then <code class="docutils literal notranslate"><span class="pre">f.demean()</span></code> will subtract the mean from each row produced by
<code class="docutils literal notranslate"><span class="pre">f</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>             <span class="n">AAPL</span>   <span class="n">MSFT</span>    <span class="n">MCD</span>     <span class="n">BK</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">13</span> <span class="o">-</span><span class="mf">1.500</span> <span class="o">-</span><span class="mf">0.500</span>  <span class="mf">0.500</span>  <span class="mf">1.500</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">14</span> <span class="o">-</span><span class="mf">0.625</span>  <span class="mf">0.375</span>  <span class="mf">1.375</span> <span class="o">-</span><span class="mf">1.125</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">15</span> <span class="o">-</span><span class="mf">0.625</span>  <span class="mf">0.375</span>  <span class="mf">1.375</span> <span class="o">-</span><span class="mf">1.125</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">16</span>  <span class="mf">0.250</span>  <span class="mf">1.250</span> <span class="o">-</span><span class="mf">1.250</span> <span class="o">-</span><span class="mf">0.250</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">f.demean(mask=m)</span></code> will subtract the mean from each row, but means
will be calculated ignoring values on the diagonal, and NaNs will
written to the diagonal in the output. Diagonal values are ignored
because they are the locations where the mask <code class="docutils literal notranslate"><span class="pre">m</span></code> produced False.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>             <span class="n">AAPL</span>   <span class="n">MSFT</span>    <span class="n">MCD</span>     <span class="n">BK</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">13</span>    <span class="n">NaN</span> <span class="o">-</span><span class="mf">1.000</span>  <span class="mf">0.000</span>  <span class="mf">1.000</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">14</span> <span class="o">-</span><span class="mf">0.500</span>    <span class="n">NaN</span>  <span class="mf">1.500</span> <span class="o">-</span><span class="mf">1.000</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">15</span> <span class="o">-</span><span class="mf">0.166</span>  <span class="mf">0.833</span>    <span class="n">NaN</span> <span class="o">-</span><span class="mf">0.666</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">16</span>  <span class="mf">0.166</span>  <span class="mf">1.166</span> <span class="o">-</span><span class="mf">1.333</span>    <span class="n">NaN</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">f.demean(groupby=c)</span></code> will subtract the group-mean of AAPL/MSFT and
MCD/BK from their respective entries.  The AAPL/MSFT are grouped
together because both assets always produce 1 in the output of the
classifier <code class="docutils literal notranslate"><span class="pre">c</span></code>.  Similarly, MCD/BK are grouped together because they
always produce 2.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>             <span class="n">AAPL</span>   <span class="n">MSFT</span>    <span class="n">MCD</span>     <span class="n">BK</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">13</span> <span class="o">-</span><span class="mf">0.500</span>  <span class="mf">0.500</span> <span class="o">-</span><span class="mf">0.500</span>  <span class="mf">0.500</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">14</span> <span class="o">-</span><span class="mf">0.500</span>  <span class="mf">0.500</span>  <span class="mf">1.250</span> <span class="o">-</span><span class="mf">1.250</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">15</span> <span class="o">-</span><span class="mf">0.500</span>  <span class="mf">0.500</span>  <span class="mf">1.250</span> <span class="o">-</span><span class="mf">1.250</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">16</span> <span class="o">-</span><span class="mf">0.500</span>  <span class="mf">0.500</span> <span class="o">-</span><span class="mf">0.500</span>  <span class="mf">0.500</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">f.demean(mask=m,</span> <span class="pre">groupby=c)</span></code> will also subtract the group-mean of
AAPL/MSFT and MCD/BK, but means will be calculated ignoring values on
the diagonal , and NaNs will be written to the diagonal in the output.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>             <span class="n">AAPL</span>   <span class="n">MSFT</span>    <span class="n">MCD</span>     <span class="n">BK</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">13</span>    <span class="n">NaN</span>  <span class="mf">0.000</span> <span class="o">-</span><span class="mf">0.500</span>  <span class="mf">0.500</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">14</span>  <span class="mf">0.000</span>    <span class="n">NaN</span>  <span class="mf">1.250</span> <span class="o">-</span><span class="mf">1.250</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">15</span> <span class="o">-</span><span class="mf">0.500</span>  <span class="mf">0.500</span>    <span class="n">NaN</span>  <span class="mf">0.000</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">16</span> <span class="o">-</span><span class="mf">0.500</span>  <span class="mf">0.500</span>  <span class="mf">0.000</span>    <span class="n">NaN</span>
</pre></div>
</div>
<p class="rubric">Notes</p>
<p>Mean is sensitive to the magnitudes of outliers. When working with
factor that can potentially produce large outliers, it is often useful
to use the <code class="docutils literal notranslate"><span class="pre">mask</span></code> parameter to discard values at the extremes of the
distribution:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">base</span> <span class="o">=</span> <span class="n">MyFactor</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>  
<span class="gp">&gt;&gt;&gt; </span><span class="n">normalized</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">demean</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">mask</span><span class="o">=</span><span class="n">base</span><span class="o">.</span><span class="n">percentile_between</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">99</span><span class="p">),</span>
<span class="gp">... </span><span class="p">)</span>  
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">demean()</span></code> is only supported on Factors of dtype float64.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.groupby.html#pandas.DataFrame.groupby" title="(in pandas v2.0.3)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pandas.DataFrame.groupby()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.Factor.zscore">
<span class="sig-name descname"><span class="pre">zscore</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">groupby</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/factor.html#Factor.zscore"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.Factor.zscore" title="Permalink to this definition">#</a></dt>
<dd><p>Construct a Factor that Z-Scores each day’s results.</p>
<p>The Z-Score of a row is defined as:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">row</span> <span class="o">-</span> <span class="n">row</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span> <span class="o">/</span> <span class="n">row</span><span class="o">.</span><span class="n">stddev</span><span class="p">()</span>
</pre></div>
</div>
<p>If <code class="docutils literal notranslate"><span class="pre">mask</span></code> is supplied, ignore values where <code class="docutils literal notranslate"><span class="pre">mask</span></code> returns False
when computing row means and standard deviations, and output NaN
anywhere the mask is False.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">groupby</span></code> is supplied, compute by partitioning each row based on
the values produced by <code class="docutils literal notranslate"><span class="pre">groupby</span></code>, z-scoring the partitioned arrays,
and stitching the sub-results back together.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mask</strong> (<a class="reference internal" href="#zipline.pipeline.Filter" title="zipline.pipeline.Filter"><em>zipline.pipeline.Filter</em></a><em>, </em><em>optional</em>) – A Filter defining values to ignore when Z-Scoring.</p></li>
<li><p><strong>groupby</strong> (<em>zipline.pipeline.Classifier</em><em>, </em><em>optional</em>) – A classifier defining partitions over which to compute Z-Scores.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>zscored</strong> – A Factor producing that z-scores the output of self.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#zipline.pipeline.Factor" title="zipline.pipeline.Factor">zipline.pipeline.Factor</a></p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>Mean and standard deviation are sensitive to the magnitudes of
outliers. When working with factor that can potentially produce large
outliers, it is often useful to use the <code class="docutils literal notranslate"><span class="pre">mask</span></code> parameter to discard
values at the extremes of the distribution:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">base</span> <span class="o">=</span> <span class="n">MyFactor</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>  
<span class="gp">&gt;&gt;&gt; </span><span class="n">normalized</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">zscore</span><span class="p">(</span>
<span class="gp">... </span>   <span class="n">mask</span><span class="o">=</span><span class="n">base</span><span class="o">.</span><span class="n">percentile_between</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">99</span><span class="p">),</span>
<span class="gp">... </span><span class="p">)</span>  
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">zscore()</span></code> is only supported on Factors of dtype float64.</p>
<p class="rubric">Examples</p>
<p>See <a class="reference internal" href="#zipline.pipeline.Factor.demean" title="zipline.pipeline.Factor.demean"><code class="xref py py-meth docutils literal notranslate"><span class="pre">demean()</span></code></a> for an in-depth
example of the semantics for <code class="docutils literal notranslate"><span class="pre">mask</span></code> and <code class="docutils literal notranslate"><span class="pre">groupby</span></code>.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.groupby.html#pandas.DataFrame.groupby" title="(in pandas v2.0.3)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pandas.DataFrame.groupby()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.Factor.rank">
<span class="sig-name descname"><span class="pre">rank</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ordinal'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ascending</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">groupby</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/factor.html#Factor.rank"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.Factor.rank" title="Permalink to this definition">#</a></dt>
<dd><p>Construct a new Factor representing the sorted rank of each column
within each row.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>method</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>{'ordinal'</em><em>, </em><em>'min'</em><em>, </em><em>'max'</em><em>, </em><em>'dense'</em><em>, </em><em>'average'}</em>) – The method used to assign ranks to tied elements. See
<cite>scipy.stats.rankdata</cite> for a full description of the semantics for
each ranking method. Default is ‘ordinal’.</p></li>
<li><p><strong>ascending</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><em>optional</em>) – Whether to return sorted rank in ascending or descending order.
Default is True.</p></li>
<li><p><strong>mask</strong> (<a class="reference internal" href="#zipline.pipeline.Filter" title="zipline.pipeline.Filter"><em>zipline.pipeline.Filter</em></a><em>, </em><em>optional</em>) – A Filter representing assets to consider when computing ranks.
If mask is supplied, ranks are computed ignoring any asset/date
pairs for which <cite>mask</cite> produces a value of False.</p></li>
<li><p><strong>groupby</strong> (<em>zipline.pipeline.Classifier</em><em>, </em><em>optional</em>) – A classifier defining partitions over which to perform ranking.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ranks</strong> – A new factor that will compute the ranking of the data produced by
<cite>self</cite>.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#zipline.pipeline.Factor" title="zipline.pipeline.Factor">zipline.pipeline.Factor</a></p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>The default value for <cite>method</cite> is different from the default for
<cite>scipy.stats.rankdata</cite>.  See that function’s documentation for a full
description of the valid inputs to <cite>method</cite>.</p>
<p>Missing or non-existent data on a given day will cause an asset to be
given a rank of NaN for that day.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.rankdata.html#scipy.stats.rankdata" title="(in SciPy v1.11.1)"><code class="xref py py-func docutils literal notranslate"><span class="pre">scipy.stats.rankdata()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.Factor.pearsonr">
<span class="sig-name descname"><span class="pre">pearsonr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">correlation_length</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/factor.html#Factor.pearsonr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.Factor.pearsonr" title="Permalink to this definition">#</a></dt>
<dd><p>Construct a new Factor that computes rolling pearson correlation
coefficients between <code class="docutils literal notranslate"><span class="pre">target</span></code> and the columns of <code class="docutils literal notranslate"><span class="pre">self</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>target</strong> (<a class="reference internal" href="#zipline.pipeline.Term" title="zipline.pipeline.Term"><em>zipline.pipeline.Term</em></a>) – The term used to compute correlations against each column of data
produced by <cite>self</cite>. This may be a Factor, a BoundColumn or a Slice.
If <cite>target</cite> is two-dimensional, correlations are computed
asset-wise.</p></li>
<li><p><strong>correlation_length</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – Length of the lookback window over which to compute each
correlation coefficient.</p></li>
<li><p><strong>mask</strong> (<a class="reference internal" href="#zipline.pipeline.Filter" title="zipline.pipeline.Filter"><em>zipline.pipeline.Filter</em></a><em>, </em><em>optional</em>) – A Filter describing which assets should have their correlation with
the target slice computed each day.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>correlations</strong> – A new Factor that will compute correlations between <code class="docutils literal notranslate"><span class="pre">target</span></code> and
the columns of <code class="docutils literal notranslate"><span class="pre">self</span></code>.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#zipline.pipeline.Factor" title="zipline.pipeline.Factor">zipline.pipeline.Factor</a></p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>This method can only be called on expressions which are deemed safe for use
as inputs to windowed <a class="reference internal" href="#zipline.pipeline.Factor" title="zipline.pipeline.Factor"><code class="xref py py-class docutils literal notranslate"><span class="pre">Factor</span></code></a> objects. Examples
of such expressions include This includes
<a class="reference internal" href="#zipline.pipeline.data.BoundColumn" title="zipline.pipeline.data.BoundColumn"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoundColumn</span></code></a>
<a class="reference internal" href="#zipline.pipeline.factors.Returns" title="zipline.pipeline.factors.Returns"><code class="xref py py-class docutils literal notranslate"><span class="pre">Returns</span></code></a> and any factors created from
<a class="reference internal" href="#zipline.pipeline.Factor.rank" title="zipline.pipeline.Factor.rank"><code class="xref py py-meth docutils literal notranslate"><span class="pre">rank()</span></code></a> or
<a class="reference internal" href="#zipline.pipeline.Factor.zscore" title="zipline.pipeline.Factor.zscore"><code class="xref py py-meth docutils literal notranslate"><span class="pre">zscore()</span></code></a>.</p>
<p class="rubric">Examples</p>
<p>Suppose we want to create a factor that computes the correlation
between AAPL’s 10-day returns and the 10-day returns of all other
assets, computing each correlation over 30 days. This can be achieved
by doing the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">returns</span> <span class="o">=</span> <span class="n">Returns</span><span class="p">(</span><span class="n">window_length</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">returns_slice</span> <span class="o">=</span> <span class="n">returns</span><span class="p">[</span><span class="n">sid</span><span class="p">(</span><span class="mi">24</span><span class="p">)]</span>
<span class="n">aapl_correlations</span> <span class="o">=</span> <span class="n">returns</span><span class="o">.</span><span class="n">pearsonr</span><span class="p">(</span>
    <span class="n">target</span><span class="o">=</span><span class="n">returns_slice</span><span class="p">,</span> <span class="n">correlation_length</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>This is equivalent to doing:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">aapl_correlations</span> <span class="o">=</span> <span class="n">RollingPearsonOfReturns</span><span class="p">(</span>
    <span class="n">target</span><span class="o">=</span><span class="n">sid</span><span class="p">(</span><span class="mi">24</span><span class="p">),</span> <span class="n">returns_length</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">correlation_length</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.pearsonr.html#scipy.stats.pearsonr" title="(in SciPy v1.11.1)"><code class="xref py py-func docutils literal notranslate"><span class="pre">scipy.stats.pearsonr()</span></code></a>, <a class="reference internal" href="#zipline.pipeline.factors.RollingPearsonOfReturns" title="zipline.pipeline.factors.RollingPearsonOfReturns"><code class="xref py py-class docutils literal notranslate"><span class="pre">zipline.pipeline.factors.RollingPearsonOfReturns</span></code></a>, <a class="reference internal" href="#zipline.pipeline.Factor.spearmanr" title="zipline.pipeline.Factor.spearmanr"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Factor.spearmanr()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.Factor.spearmanr">
<span class="sig-name descname"><span class="pre">spearmanr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">correlation_length</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/factor.html#Factor.spearmanr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.Factor.spearmanr" title="Permalink to this definition">#</a></dt>
<dd><p>Construct a new Factor that computes rolling spearman rank correlation
coefficients between <code class="docutils literal notranslate"><span class="pre">target</span></code> and the columns of <code class="docutils literal notranslate"><span class="pre">self</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>target</strong> (<a class="reference internal" href="#zipline.pipeline.Term" title="zipline.pipeline.Term"><em>zipline.pipeline.Term</em></a>) – The term used to compute correlations against each column of data
produced by <cite>self</cite>. This may be a Factor, a BoundColumn or a Slice.
If <cite>target</cite> is two-dimensional, correlations are computed
asset-wise.</p></li>
<li><p><strong>correlation_length</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – Length of the lookback window over which to compute each
correlation coefficient.</p></li>
<li><p><strong>mask</strong> (<a class="reference internal" href="#zipline.pipeline.Filter" title="zipline.pipeline.Filter"><em>zipline.pipeline.Filter</em></a><em>, </em><em>optional</em>) – A Filter describing which assets should have their correlation with
the target slice computed each day.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>correlations</strong> – A new Factor that will compute correlations between <code class="docutils literal notranslate"><span class="pre">target</span></code> and
the columns of <code class="docutils literal notranslate"><span class="pre">self</span></code>.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#zipline.pipeline.Factor" title="zipline.pipeline.Factor">zipline.pipeline.Factor</a></p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>This method can only be called on expressions which are deemed safe for use
as inputs to windowed <a class="reference internal" href="#zipline.pipeline.Factor" title="zipline.pipeline.Factor"><code class="xref py py-class docutils literal notranslate"><span class="pre">Factor</span></code></a> objects. Examples
of such expressions include This includes
<a class="reference internal" href="#zipline.pipeline.data.BoundColumn" title="zipline.pipeline.data.BoundColumn"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoundColumn</span></code></a>
<a class="reference internal" href="#zipline.pipeline.factors.Returns" title="zipline.pipeline.factors.Returns"><code class="xref py py-class docutils literal notranslate"><span class="pre">Returns</span></code></a> and any factors created from
<a class="reference internal" href="#zipline.pipeline.Factor.rank" title="zipline.pipeline.Factor.rank"><code class="xref py py-meth docutils literal notranslate"><span class="pre">rank()</span></code></a> or
<a class="reference internal" href="#zipline.pipeline.Factor.zscore" title="zipline.pipeline.Factor.zscore"><code class="xref py py-meth docutils literal notranslate"><span class="pre">zscore()</span></code></a>.</p>
<p class="rubric">Examples</p>
<p>Suppose we want to create a factor that computes the correlation
between AAPL’s 10-day returns and the 10-day returns of all other
assets, computing each correlation over 30 days. This can be achieved
by doing the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">returns</span> <span class="o">=</span> <span class="n">Returns</span><span class="p">(</span><span class="n">window_length</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">returns_slice</span> <span class="o">=</span> <span class="n">returns</span><span class="p">[</span><span class="n">sid</span><span class="p">(</span><span class="mi">24</span><span class="p">)]</span>
<span class="n">aapl_correlations</span> <span class="o">=</span> <span class="n">returns</span><span class="o">.</span><span class="n">spearmanr</span><span class="p">(</span>
    <span class="n">target</span><span class="o">=</span><span class="n">returns_slice</span><span class="p">,</span> <span class="n">correlation_length</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>This is equivalent to doing:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">aapl_correlations</span> <span class="o">=</span> <span class="n">RollingSpearmanOfReturns</span><span class="p">(</span>
    <span class="n">target</span><span class="o">=</span><span class="n">sid</span><span class="p">(</span><span class="mi">24</span><span class="p">),</span> <span class="n">returns_length</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">correlation_length</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.spearmanr.html#scipy.stats.spearmanr" title="(in SciPy v1.11.1)"><code class="xref py py-func docutils literal notranslate"><span class="pre">scipy.stats.spearmanr()</span></code></a>, <a class="reference internal" href="#zipline.pipeline.Factor.pearsonr" title="zipline.pipeline.Factor.pearsonr"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Factor.pearsonr()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.Factor.linear_regression">
<span class="sig-name descname"><span class="pre">linear_regression</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">regression_length</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/factor.html#Factor.linear_regression"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.Factor.linear_regression" title="Permalink to this definition">#</a></dt>
<dd><p>Construct a new Factor that performs an ordinary least-squares
regression predicting the columns of <cite>self</cite> from <cite>target</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>target</strong> (<a class="reference internal" href="#zipline.pipeline.Term" title="zipline.pipeline.Term"><em>zipline.pipeline.Term</em></a>) – The term to use as the predictor/independent variable in each
regression. This may be a Factor, a BoundColumn or a Slice. If
<cite>target</cite> is two-dimensional, regressions are computed asset-wise.</p></li>
<li><p><strong>regression_length</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – Length of the lookback window over which to compute each
regression.</p></li>
<li><p><strong>mask</strong> (<a class="reference internal" href="#zipline.pipeline.Filter" title="zipline.pipeline.Filter"><em>zipline.pipeline.Filter</em></a><em>, </em><em>optional</em>) – A Filter describing which assets should be regressed with the
target slice each day.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>regressions</strong> – A new Factor that will compute linear regressions of <cite>target</cite>
against the columns of <cite>self</cite>.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#zipline.pipeline.Factor" title="zipline.pipeline.Factor">zipline.pipeline.Factor</a></p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>This method can only be called on expressions which are deemed safe for use
as inputs to windowed <a class="reference internal" href="#zipline.pipeline.Factor" title="zipline.pipeline.Factor"><code class="xref py py-class docutils literal notranslate"><span class="pre">Factor</span></code></a> objects. Examples
of such expressions include This includes
<a class="reference internal" href="#zipline.pipeline.data.BoundColumn" title="zipline.pipeline.data.BoundColumn"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoundColumn</span></code></a>
<a class="reference internal" href="#zipline.pipeline.factors.Returns" title="zipline.pipeline.factors.Returns"><code class="xref py py-class docutils literal notranslate"><span class="pre">Returns</span></code></a> and any factors created from
<a class="reference internal" href="#zipline.pipeline.Factor.rank" title="zipline.pipeline.Factor.rank"><code class="xref py py-meth docutils literal notranslate"><span class="pre">rank()</span></code></a> or
<a class="reference internal" href="#zipline.pipeline.Factor.zscore" title="zipline.pipeline.Factor.zscore"><code class="xref py py-meth docutils literal notranslate"><span class="pre">zscore()</span></code></a>.</p>
<p class="rubric">Examples</p>
<p>Suppose we want to create a factor that regresses AAPL’s 10-day returns
against the 10-day returns of all other assets, computing each
regression over 30 days. This can be achieved by doing the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">returns</span> <span class="o">=</span> <span class="n">Returns</span><span class="p">(</span><span class="n">window_length</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">returns_slice</span> <span class="o">=</span> <span class="n">returns</span><span class="p">[</span><span class="n">sid</span><span class="p">(</span><span class="mi">24</span><span class="p">)]</span>
<span class="n">aapl_regressions</span> <span class="o">=</span> <span class="n">returns</span><span class="o">.</span><span class="n">linear_regression</span><span class="p">(</span>
    <span class="n">target</span><span class="o">=</span><span class="n">returns_slice</span><span class="p">,</span> <span class="n">regression_length</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>This is equivalent to doing:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">aapl_regressions</span> <span class="o">=</span> <span class="n">RollingLinearRegressionOfReturns</span><span class="p">(</span>
    <span class="n">target</span><span class="o">=</span><span class="n">sid</span><span class="p">(</span><span class="mi">24</span><span class="p">),</span> <span class="n">returns_length</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">regression_length</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.linregress.html#scipy.stats.linregress" title="(in SciPy v1.11.1)"><code class="xref py py-func docutils literal notranslate"><span class="pre">scipy.stats.linregress()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.Factor.winsorize">
<span class="sig-name descname"><span class="pre">winsorize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">min_percentile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_percentile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">groupby</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/factor.html#Factor.winsorize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.Factor.winsorize" title="Permalink to this definition">#</a></dt>
<dd><p>Construct a new factor that winsorizes the result of this factor.</p>
<p>Winsorizing changes values ranked less than the minimum percentile to
the value at the minimum percentile. Similarly, values ranking above
the maximum percentile are changed to the value at the maximum
percentile.</p>
<p>Winsorizing is useful for limiting the impact of extreme data points
without completely removing those points.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">mask</span></code> is supplied, ignore values where <code class="docutils literal notranslate"><span class="pre">mask</span></code> returns False
when computing percentile cutoffs, and output NaN anywhere the mask is
False.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">groupby</span></code> is supplied, winsorization is applied separately
separately to each group defined by <code class="docutils literal notranslate"><span class="pre">groupby</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>min_percentile</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – Entries with values at or below this percentile will be replaced
with the (len(input) * min_percentile)th lowest value. If low
values should not be clipped, use 0.</p></li>
<li><p><strong>max_percentile</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – Entries with values at or above this percentile will be replaced
with the (len(input) * max_percentile)th lowest value. If high
values should not be clipped, use 1.</p></li>
<li><p><strong>mask</strong> (<a class="reference internal" href="#zipline.pipeline.Filter" title="zipline.pipeline.Filter"><em>zipline.pipeline.Filter</em></a><em>, </em><em>optional</em>) – A Filter defining values to ignore when winsorizing.</p></li>
<li><p><strong>groupby</strong> (<em>zipline.pipeline.Classifier</em><em>, </em><em>optional</em>) – A classifier defining partitions over which to winsorize.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>winsorized</strong> – A Factor producing a winsorized version of self.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#zipline.pipeline.Factor" title="zipline.pipeline.Factor">zipline.pipeline.Factor</a></p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">price</span> <span class="o">=</span> <span class="n">USEquityPricing</span><span class="o">.</span><span class="n">close</span><span class="o">.</span><span class="n">latest</span>
<span class="n">columns</span><span class="o">=</span><span class="p">{</span>
    <span class="s1">&#39;PRICE&#39;</span><span class="p">:</span> <span class="n">price</span><span class="p">,</span>
    <span class="s1">&#39;WINSOR_1: price.winsorize(</span>
        <span class="n">min_percentile</span><span class="o">=</span><span class="mf">0.25</span><span class="p">,</span> <span class="n">max_percentile</span><span class="o">=</span><span class="mf">0.75</span>
    <span class="p">),</span>
    <span class="s1">&#39;WINSOR_2&#39;</span><span class="p">:</span> <span class="n">price</span><span class="o">.</span><span class="n">winsorize</span><span class="p">(</span>
        <span class="n">min_percentile</span><span class="o">=</span><span class="mf">0.50</span><span class="p">,</span> <span class="n">max_percentile</span><span class="o">=</span><span class="mf">1.0</span>
    <span class="p">),</span>
    <span class="s1">&#39;WINSOR_3&#39;</span><span class="p">:</span> <span class="n">price</span><span class="o">.</span><span class="n">winsorize</span><span class="p">(</span>
        <span class="n">min_percentile</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">max_percentile</span><span class="o">=</span><span class="mf">0.5</span>
    <span class="p">),</span>

<span class="p">}</span>
</pre></div>
</div>
<p>Given a pipeline with columns, defined above, the result for a
given day could look like:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>        <span class="s1">&#39;PRICE&#39;</span> <span class="s1">&#39;WINSOR_1&#39;</span> <span class="s1">&#39;WINSOR_2&#39;</span> <span class="s1">&#39;WINSOR_3&#39;</span>
<span class="n">Asset_1</span>    <span class="mi">1</span>        <span class="mi">2</span>          <span class="mi">4</span>          <span class="mi">3</span>
<span class="n">Asset_2</span>    <span class="mi">2</span>        <span class="mi">2</span>          <span class="mi">4</span>          <span class="mi">3</span>
<span class="n">Asset_3</span>    <span class="mi">3</span>        <span class="mi">3</span>          <span class="mi">4</span>          <span class="mi">3</span>
<span class="n">Asset_4</span>    <span class="mi">4</span>        <span class="mi">4</span>          <span class="mi">4</span>          <span class="mi">4</span>
<span class="n">Asset_5</span>    <span class="mi">5</span>        <span class="mi">5</span>          <span class="mi">5</span>          <span class="mi">4</span>
<span class="n">Asset_6</span>    <span class="mi">6</span>        <span class="mi">5</span>          <span class="mi">5</span>          <span class="mi">4</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.mstats.winsorize.html#scipy.stats.mstats.winsorize" title="(in SciPy v1.11.1)"><code class="xref py py-func docutils literal notranslate"><span class="pre">scipy.stats.mstats.winsorize()</span></code></a>, <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.groupby.html#pandas.DataFrame.groupby" title="(in pandas v2.0.3)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pandas.DataFrame.groupby()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.Factor.quantiles">
<span class="sig-name descname"><span class="pre">quantiles</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bins</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/factor.html#Factor.quantiles"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.Factor.quantiles" title="Permalink to this definition">#</a></dt>
<dd><p>Construct a Classifier computing quantiles of the output of <code class="docutils literal notranslate"><span class="pre">self</span></code>.</p>
<p>Every non-NaN data point the output is labelled with an integer value
from 0 to (bins - 1). NaNs are labelled with -1.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">mask</span></code> is supplied, ignore data points in locations for which
<code class="docutils literal notranslate"><span class="pre">mask</span></code> produces False, and emit a label of -1 at those locations.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>bins</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – Number of bins labels to compute.</p></li>
<li><p><strong>mask</strong> (<a class="reference internal" href="#zipline.pipeline.Filter" title="zipline.pipeline.Filter"><em>zipline.pipeline.Filter</em></a><em>, </em><em>optional</em>) – Mask of values to ignore when computing quantiles.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>quantiles</strong> – A classifier producing integer labels ranging from 0 to (bins - 1).</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>zipline.pipeline.Classifier</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.Factor.quartiles">
<span class="sig-name descname"><span class="pre">quartiles</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/factor.html#Factor.quartiles"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.Factor.quartiles" title="Permalink to this definition">#</a></dt>
<dd><p>Construct a Classifier computing quartiles over the output of <code class="docutils literal notranslate"><span class="pre">self</span></code>.</p>
<p>Every non-NaN data point the output is labelled with a value of either
0, 1, 2, or 3, corresponding to the first, second, third, or fourth
quartile over each row.  NaN data points are labelled with -1.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">mask</span></code> is supplied, ignore data points in locations for which
<code class="docutils literal notranslate"><span class="pre">mask</span></code> produces False, and emit a label of -1 at those locations.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>mask</strong> (<a class="reference internal" href="#zipline.pipeline.Filter" title="zipline.pipeline.Filter"><em>zipline.pipeline.Filter</em></a><em>, </em><em>optional</em>) – Mask of values to ignore when computing quartiles.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>quartiles</strong> – A classifier producing integer labels ranging from 0 to 3.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>zipline.pipeline.Classifier</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.Factor.quintiles">
<span class="sig-name descname"><span class="pre">quintiles</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/factor.html#Factor.quintiles"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.Factor.quintiles" title="Permalink to this definition">#</a></dt>
<dd><p>Construct a Classifier computing quintile labels on <code class="docutils literal notranslate"><span class="pre">self</span></code>.</p>
<p>Every non-NaN data point the output is labelled with a value of either
0, 1, 2, or 3, 4, corresonding to quintiles over each row.  NaN data
points are labelled with -1.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">mask</span></code> is supplied, ignore data points in locations for which
<code class="docutils literal notranslate"><span class="pre">mask</span></code> produces False, and emit a label of -1 at those locations.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>mask</strong> (<a class="reference internal" href="#zipline.pipeline.Filter" title="zipline.pipeline.Filter"><em>zipline.pipeline.Filter</em></a><em>, </em><em>optional</em>) – Mask of values to ignore when computing quintiles.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>quintiles</strong> – A classifier producing integer labels ranging from 0 to 4.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>zipline.pipeline.Classifier</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.Factor.deciles">
<span class="sig-name descname"><span class="pre">deciles</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/factor.html#Factor.deciles"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.Factor.deciles" title="Permalink to this definition">#</a></dt>
<dd><p>Construct a Classifier computing decile labels on <code class="docutils literal notranslate"><span class="pre">self</span></code>.</p>
<p>Every non-NaN data point the output is labelled with a value from 0 to
9 corresonding to deciles over each row.  NaN data points are labelled
with -1.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">mask</span></code> is supplied, ignore data points in locations for which
<code class="docutils literal notranslate"><span class="pre">mask</span></code> produces False, and emit a label of -1 at those locations.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>mask</strong> (<a class="reference internal" href="#zipline.pipeline.Filter" title="zipline.pipeline.Filter"><em>zipline.pipeline.Filter</em></a><em>, </em><em>optional</em>) – Mask of values to ignore when computing deciles.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>deciles</strong> – A classifier producing integer labels ranging from 0 to 9.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>zipline.pipeline.Classifier</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.Factor.top">
<span class="sig-name descname"><span class="pre">top</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">N</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">groupby</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/factor.html#Factor.top"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.Factor.top" title="Permalink to this definition">#</a></dt>
<dd><p>Construct a Filter matching the top N asset values of self each day.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">groupby</span></code> is supplied, returns a Filter matching the top N asset
values for each group.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>N</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – Number of assets passing the returned filter each day.</p></li>
<li><p><strong>mask</strong> (<a class="reference internal" href="#zipline.pipeline.Filter" title="zipline.pipeline.Filter"><em>zipline.pipeline.Filter</em></a><em>, </em><em>optional</em>) – A Filter representing assets to consider when computing ranks.
If mask is supplied, top values are computed ignoring any
asset/date pairs for which <cite>mask</cite> produces a value of False.</p></li>
<li><p><strong>groupby</strong> (<em>zipline.pipeline.Classifier</em><em>, </em><em>optional</em>) – A classifier defining partitions over which to perform ranking.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>filter</strong></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#zipline.pipeline.Filter" title="zipline.pipeline.Filter">zipline.pipeline.Filter</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.Factor.bottom">
<span class="sig-name descname"><span class="pre">bottom</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">N</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">groupby</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/factor.html#Factor.bottom"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.Factor.bottom" title="Permalink to this definition">#</a></dt>
<dd><p>Construct a Filter matching the bottom N asset values of self each day.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">groupby</span></code> is supplied, returns a Filter matching the bottom N
asset values <strong>for each group</strong> defined by <code class="docutils literal notranslate"><span class="pre">groupby</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>N</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – Number of assets passing the returned filter each day.</p></li>
<li><p><strong>mask</strong> (<a class="reference internal" href="#zipline.pipeline.Filter" title="zipline.pipeline.Filter"><em>zipline.pipeline.Filter</em></a><em>, </em><em>optional</em>) – A Filter representing assets to consider when computing ranks.
If mask is supplied, bottom values are computed ignoring any
asset/date pairs for which <cite>mask</cite> produces a value of False.</p></li>
<li><p><strong>groupby</strong> (<em>zipline.pipeline.Classifier</em><em>, </em><em>optional</em>) – A classifier defining partitions over which to perform ranking.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>filter</strong></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#zipline.pipeline.Filter" title="zipline.pipeline.Filter">zipline.pipeline.Filter</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.Factor.percentile_between">
<span class="sig-name descname"><span class="pre">percentile_between</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">min_percentile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_percentile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/factor.html#Factor.percentile_between"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.Factor.percentile_between" title="Permalink to this definition">#</a></dt>
<dd><p>Construct a Filter matching values of self that fall within the range
defined by <code class="docutils literal notranslate"><span class="pre">min_percentile</span></code> and <code class="docutils literal notranslate"><span class="pre">max_percentile</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>min_percentile</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em> [</em><em>0.0</em><em>, </em><em>100.0</em><em>]</em>) – Return True for assets falling above this percentile in the data.</p></li>
<li><p><strong>max_percentile</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em> [</em><em>0.0</em><em>, </em><em>100.0</em><em>]</em>) – Return True for assets falling below this percentile in the data.</p></li>
<li><p><strong>mask</strong> (<a class="reference internal" href="#zipline.pipeline.Filter" title="zipline.pipeline.Filter"><em>zipline.pipeline.Filter</em></a><em>, </em><em>optional</em>) – A Filter representing assets to consider when percentile
calculating thresholds.  If mask is supplied, percentile cutoffs
are computed each day using only assets for which <code class="docutils literal notranslate"><span class="pre">mask</span></code> returns
True.  Assets for which <code class="docutils literal notranslate"><span class="pre">mask</span></code> produces False will produce False
in the output of this Factor as well.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>out</strong> – A new filter that will compute the specified percentile-range mask.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#zipline.pipeline.Filter" title="zipline.pipeline.Filter">zipline.pipeline.Filter</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.Factor.isnan">
<span class="sig-name descname"><span class="pre">isnan</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/factor.html#Factor.isnan"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.Factor.isnan" title="Permalink to this definition">#</a></dt>
<dd><p>A Filter producing True for all values where this Factor is NaN.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>nanfilter</strong></p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#zipline.pipeline.Filter" title="zipline.pipeline.Filter">zipline.pipeline.Filter</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.Factor.notnan">
<span class="sig-name descname"><span class="pre">notnan</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/factor.html#Factor.notnan"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.Factor.notnan" title="Permalink to this definition">#</a></dt>
<dd><p>A Filter producing True for values where this Factor is not NaN.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>nanfilter</strong></p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#zipline.pipeline.Filter" title="zipline.pipeline.Filter">zipline.pipeline.Filter</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.Factor.isfinite">
<span class="sig-name descname"><span class="pre">isfinite</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/factor.html#Factor.isfinite"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.Factor.isfinite" title="Permalink to this definition">#</a></dt>
<dd><p>A Filter producing True for values where this Factor is anything but
NaN, inf, or -inf.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.Factor.clip">
<span class="sig-name descname"><span class="pre">clip</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">min_bound</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_bound</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/factor.html#Factor.clip"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.Factor.clip" title="Permalink to this definition">#</a></dt>
<dd><p>Clip (limit) the values in a factor.</p>
<p>Given an interval, values outside the interval are clipped to the
interval edges. For example, if an interval of <code class="docutils literal notranslate"><span class="pre">[0,</span> <span class="pre">1]</span></code> is specified,
values smaller than 0 become 0, and values larger than 1 become 1.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>min_bound</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – The minimum value to use.</p></li>
<li><p><strong>max_bound</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – The maximum value to use.</p></li>
<li><p><strong>mask</strong> (<a class="reference internal" href="#zipline.pipeline.Filter" title="zipline.pipeline.Filter"><em>zipline.pipeline.Filter</em></a><em>, </em><em>optional</em>) – A Filter representing assets to consider when clipping.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>To only clip values on one side, <code class="docutils literal notranslate"><span class="pre">-np.inf`</span> <span class="pre">and</span> <span class="pre">``np.inf</span></code> may be
passed.  For example, to only clip the maximum value but not clip a
minimum value:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">factor</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="n">min_bound</span><span class="o">=-</span><span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span> <span class="n">max_bound</span><span class="o">=</span><span class="n">user_provided_max</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.clip.html#numpy.clip" title="(in NumPy v1.25)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.clip</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id2">
<span class="sig-name descname"><span class="pre">clip</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">min_bound</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_bound</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/factor.html#Factor.clip"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id2" title="Permalink to this definition">#</a></dt>
<dd><p>Clip (limit) the values in a factor.</p>
<p>Given an interval, values outside the interval are clipped to the
interval edges. For example, if an interval of <code class="docutils literal notranslate"><span class="pre">[0,</span> <span class="pre">1]</span></code> is specified,
values smaller than 0 become 0, and values larger than 1 become 1.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>min_bound</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – The minimum value to use.</p></li>
<li><p><strong>max_bound</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – The maximum value to use.</p></li>
<li><p><strong>mask</strong> (<a class="reference internal" href="#zipline.pipeline.Filter" title="zipline.pipeline.Filter"><em>zipline.pipeline.Filter</em></a><em>, </em><em>optional</em>) – A Filter representing assets to consider when clipping.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>To only clip values on one side, <code class="docutils literal notranslate"><span class="pre">-np.inf`</span> <span class="pre">and</span> <span class="pre">``np.inf</span></code> may be
passed.  For example, to only clip the maximum value but not clip a
minimum value:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">factor</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="n">min_bound</span><span class="o">=-</span><span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span> <span class="n">max_bound</span><span class="o">=</span><span class="n">user_provided_max</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.clip.html#numpy.clip" title="(in NumPy v1.25)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.clip</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.Factor.__add__">
<span class="sig-name descname"><span class="pre">__add__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.pipeline.Factor.__add__" title="Permalink to this definition">#</a></dt>
<dd><p>Construct a <a class="reference internal" href="#zipline.pipeline.Factor" title="zipline.pipeline.Factor"><code class="xref py py-class docutils literal notranslate"><span class="pre">Factor</span></code></a> computing <code class="docutils literal notranslate"><span class="pre">self</span> <span class="pre">+</span> <span class="pre">other</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>other</strong> (<a class="reference internal" href="#zipline.pipeline.Factor" title="zipline.pipeline.Factor"><em>zipline.pipeline.Factor</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Right-hand side of the expression.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>factor</strong> – Factor computing <code class="docutils literal notranslate"><span class="pre">self</span> <span class="pre">+</span> <span class="pre">other</span></code> with outputs of <code class="docutils literal notranslate"><span class="pre">self</span></code> and
<code class="docutils literal notranslate"><span class="pre">other</span></code>.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#zipline.pipeline.Factor" title="zipline.pipeline.Factor">zipline.pipeline.Factor</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.Factor.__sub__">
<span class="sig-name descname"><span class="pre">__sub__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.pipeline.Factor.__sub__" title="Permalink to this definition">#</a></dt>
<dd><p>Construct a <a class="reference internal" href="#zipline.pipeline.Factor" title="zipline.pipeline.Factor"><code class="xref py py-class docutils literal notranslate"><span class="pre">Factor</span></code></a> computing <code class="docutils literal notranslate"><span class="pre">self</span> <span class="pre">-</span> <span class="pre">other</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>other</strong> (<a class="reference internal" href="#zipline.pipeline.Factor" title="zipline.pipeline.Factor"><em>zipline.pipeline.Factor</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Right-hand side of the expression.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>factor</strong> – Factor computing <code class="docutils literal notranslate"><span class="pre">self</span> <span class="pre">-</span> <span class="pre">other</span></code> with outputs of <code class="docutils literal notranslate"><span class="pre">self</span></code> and
<code class="docutils literal notranslate"><span class="pre">other</span></code>.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#zipline.pipeline.Factor" title="zipline.pipeline.Factor">zipline.pipeline.Factor</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.Factor.__mul__">
<span class="sig-name descname"><span class="pre">__mul__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.pipeline.Factor.__mul__" title="Permalink to this definition">#</a></dt>
<dd><p>Construct a <a class="reference internal" href="#zipline.pipeline.Factor" title="zipline.pipeline.Factor"><code class="xref py py-class docutils literal notranslate"><span class="pre">Factor</span></code></a> computing <code class="docutils literal notranslate"><span class="pre">self</span> <span class="pre">*</span> <span class="pre">other</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>other</strong> (<a class="reference internal" href="#zipline.pipeline.Factor" title="zipline.pipeline.Factor"><em>zipline.pipeline.Factor</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Right-hand side of the expression.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>factor</strong> – Factor computing <code class="docutils literal notranslate"><span class="pre">self</span> <span class="pre">*</span> <span class="pre">other</span></code> with outputs of <code class="docutils literal notranslate"><span class="pre">self</span></code> and
<code class="docutils literal notranslate"><span class="pre">other</span></code>.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#zipline.pipeline.Factor" title="zipline.pipeline.Factor">zipline.pipeline.Factor</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.Factor.__div__">
<span class="sig-name descname"><span class="pre">__div__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.pipeline.Factor.__div__" title="Permalink to this definition">#</a></dt>
<dd><p>Construct a <a class="reference internal" href="#zipline.pipeline.Factor" title="zipline.pipeline.Factor"><code class="xref py py-class docutils literal notranslate"><span class="pre">Factor</span></code></a> computing <code class="docutils literal notranslate"><span class="pre">self</span> <span class="pre">/</span> <span class="pre">other</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>other</strong> (<a class="reference internal" href="#zipline.pipeline.Factor" title="zipline.pipeline.Factor"><em>zipline.pipeline.Factor</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Right-hand side of the expression.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>factor</strong> – Factor computing <code class="docutils literal notranslate"><span class="pre">self</span> <span class="pre">/</span> <span class="pre">other</span></code> with outputs of <code class="docutils literal notranslate"><span class="pre">self</span></code> and
<code class="docutils literal notranslate"><span class="pre">other</span></code>.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#zipline.pipeline.Factor" title="zipline.pipeline.Factor">zipline.pipeline.Factor</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.Factor.__mod__">
<span class="sig-name descname"><span class="pre">__mod__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.pipeline.Factor.__mod__" title="Permalink to this definition">#</a></dt>
<dd><p>Construct a <a class="reference internal" href="#zipline.pipeline.Factor" title="zipline.pipeline.Factor"><code class="xref py py-class docutils literal notranslate"><span class="pre">Factor</span></code></a> computing <code class="docutils literal notranslate"><span class="pre">self</span> <span class="pre">%</span> <span class="pre">other</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>other</strong> (<a class="reference internal" href="#zipline.pipeline.Factor" title="zipline.pipeline.Factor"><em>zipline.pipeline.Factor</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Right-hand side of the expression.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>factor</strong> – Factor computing <code class="docutils literal notranslate"><span class="pre">self</span> <span class="pre">%</span> <span class="pre">other</span></code> with outputs of <code class="docutils literal notranslate"><span class="pre">self</span></code> and
<code class="docutils literal notranslate"><span class="pre">other</span></code>.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#zipline.pipeline.Factor" title="zipline.pipeline.Factor">zipline.pipeline.Factor</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.Factor.__pow__">
<span class="sig-name descname"><span class="pre">__pow__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.pipeline.Factor.__pow__" title="Permalink to this definition">#</a></dt>
<dd><p>Construct a <a class="reference internal" href="#zipline.pipeline.Factor" title="zipline.pipeline.Factor"><code class="xref py py-class docutils literal notranslate"><span class="pre">Factor</span></code></a> computing <code class="docutils literal notranslate"><span class="pre">self</span> <span class="pre">**</span> <span class="pre">other</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>other</strong> (<a class="reference internal" href="#zipline.pipeline.Factor" title="zipline.pipeline.Factor"><em>zipline.pipeline.Factor</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Right-hand side of the expression.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>factor</strong> – Factor computing <code class="docutils literal notranslate"><span class="pre">self</span> <span class="pre">**</span> <span class="pre">other</span></code> with outputs of <code class="docutils literal notranslate"><span class="pre">self</span></code> and
<code class="docutils literal notranslate"><span class="pre">other</span></code>.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#zipline.pipeline.Factor" title="zipline.pipeline.Factor">zipline.pipeline.Factor</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.Factor.__lt__">
<span class="sig-name descname"><span class="pre">__lt__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.pipeline.Factor.__lt__" title="Permalink to this definition">#</a></dt>
<dd><p>Construct a <a class="reference internal" href="#zipline.pipeline.Filter" title="zipline.pipeline.Filter"><code class="xref py py-class docutils literal notranslate"><span class="pre">Filter</span></code></a> computing <code class="docutils literal notranslate"><span class="pre">self</span> <span class="pre">&lt;</span> <span class="pre">other</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>other</strong> (<a class="reference internal" href="#zipline.pipeline.Factor" title="zipline.pipeline.Factor"><em>zipline.pipeline.Factor</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Right-hand side of the expression.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>filter</strong> – Filter computing <code class="docutils literal notranslate"><span class="pre">self</span> <span class="pre">&lt;</span> <span class="pre">other</span></code> with the outputs of <code class="docutils literal notranslate"><span class="pre">self</span></code> and
<code class="docutils literal notranslate"><span class="pre">other</span></code>.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#zipline.pipeline.Filter" title="zipline.pipeline.Filter">zipline.pipeline.Filter</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.Factor.__le__">
<span class="sig-name descname"><span class="pre">__le__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.pipeline.Factor.__le__" title="Permalink to this definition">#</a></dt>
<dd><p>Construct a <a class="reference internal" href="#zipline.pipeline.Filter" title="zipline.pipeline.Filter"><code class="xref py py-class docutils literal notranslate"><span class="pre">Filter</span></code></a> computing <code class="docutils literal notranslate"><span class="pre">self</span> <span class="pre">&lt;=</span> <span class="pre">other</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>other</strong> (<a class="reference internal" href="#zipline.pipeline.Factor" title="zipline.pipeline.Factor"><em>zipline.pipeline.Factor</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Right-hand side of the expression.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>filter</strong> – Filter computing <code class="docutils literal notranslate"><span class="pre">self</span> <span class="pre">&lt;=</span> <span class="pre">other</span></code> with the outputs of <code class="docutils literal notranslate"><span class="pre">self</span></code> and
<code class="docutils literal notranslate"><span class="pre">other</span></code>.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#zipline.pipeline.Filter" title="zipline.pipeline.Filter">zipline.pipeline.Filter</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.Factor.__ne__">
<span class="sig-name descname"><span class="pre">__ne__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.pipeline.Factor.__ne__" title="Permalink to this definition">#</a></dt>
<dd><p>Construct a <a class="reference internal" href="#zipline.pipeline.Filter" title="zipline.pipeline.Filter"><code class="xref py py-class docutils literal notranslate"><span class="pre">Filter</span></code></a> computing <code class="docutils literal notranslate"><span class="pre">self</span> <span class="pre">!=</span> <span class="pre">other</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>other</strong> (<a class="reference internal" href="#zipline.pipeline.Factor" title="zipline.pipeline.Factor"><em>zipline.pipeline.Factor</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Right-hand side of the expression.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>filter</strong> – Filter computing <code class="docutils literal notranslate"><span class="pre">self</span> <span class="pre">!=</span> <span class="pre">other</span></code> with the outputs of <code class="docutils literal notranslate"><span class="pre">self</span></code> and
<code class="docutils literal notranslate"><span class="pre">other</span></code>.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#zipline.pipeline.Filter" title="zipline.pipeline.Filter">zipline.pipeline.Filter</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.Factor.__ge__">
<span class="sig-name descname"><span class="pre">__ge__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.pipeline.Factor.__ge__" title="Permalink to this definition">#</a></dt>
<dd><p>Construct a <a class="reference internal" href="#zipline.pipeline.Filter" title="zipline.pipeline.Filter"><code class="xref py py-class docutils literal notranslate"><span class="pre">Filter</span></code></a> computing <code class="docutils literal notranslate"><span class="pre">self</span> <span class="pre">&gt;=</span> <span class="pre">other</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>other</strong> (<a class="reference internal" href="#zipline.pipeline.Factor" title="zipline.pipeline.Factor"><em>zipline.pipeline.Factor</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Right-hand side of the expression.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>filter</strong> – Filter computing <code class="docutils literal notranslate"><span class="pre">self</span> <span class="pre">&gt;=</span> <span class="pre">other</span></code> with the outputs of <code class="docutils literal notranslate"><span class="pre">self</span></code> and
<code class="docutils literal notranslate"><span class="pre">other</span></code>.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#zipline.pipeline.Filter" title="zipline.pipeline.Filter">zipline.pipeline.Filter</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.Factor.__gt__">
<span class="sig-name descname"><span class="pre">__gt__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.pipeline.Factor.__gt__" title="Permalink to this definition">#</a></dt>
<dd><p>Construct a <a class="reference internal" href="#zipline.pipeline.Filter" title="zipline.pipeline.Filter"><code class="xref py py-class docutils literal notranslate"><span class="pre">Filter</span></code></a> computing <code class="docutils literal notranslate"><span class="pre">self</span> <span class="pre">&gt;</span> <span class="pre">other</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>other</strong> (<a class="reference internal" href="#zipline.pipeline.Factor" title="zipline.pipeline.Factor"><em>zipline.pipeline.Factor</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Right-hand side of the expression.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>filter</strong> – Filter computing <code class="docutils literal notranslate"><span class="pre">self</span> <span class="pre">&gt;</span> <span class="pre">other</span></code> with the outputs of <code class="docutils literal notranslate"><span class="pre">self</span></code> and
<code class="docutils literal notranslate"><span class="pre">other</span></code>.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#zipline.pipeline.Filter" title="zipline.pipeline.Filter">zipline.pipeline.Filter</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.Factor.fillna">
<span class="sig-name descname"><span class="pre">fillna</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fill_value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.pipeline.Factor.fillna" title="Permalink to this definition">#</a></dt>
<dd><p>Create a new term that fills missing values of this term’s output with
<code class="docutils literal notranslate"><span class="pre">fill_value</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>fill_value</strong> (<em>zipline.pipeline.ComputableTerm</em><em>, or </em><em>object.</em>) – <p>Object to use as replacement for missing values.</p>
<p>If a ComputableTerm (e.g. a Factor) is passed, that term’s results
will be used as fill values.</p>
<p>If a scalar (e.g. a number) is passed, the scalar will be used as a
fill value.</p>
</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p><strong>Filling with a Scalar:</strong></p>
<p>Let <code class="docutils literal notranslate"><span class="pre">f</span></code> be a Factor which would produce the following output:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>             <span class="n">AAPL</span>   <span class="n">MSFT</span>    <span class="n">MCD</span>     <span class="n">BK</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">13</span>    <span class="mf">1.0</span>    <span class="n">NaN</span>    <span class="mf">3.0</span>    <span class="mf">4.0</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">14</span>    <span class="mf">1.5</span>    <span class="mf">2.5</span>    <span class="n">NaN</span>    <span class="n">NaN</span>
</pre></div>
</div>
<p>Then <code class="docutils literal notranslate"><span class="pre">f.fillna(0)</span></code> produces the following output:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>             <span class="n">AAPL</span>   <span class="n">MSFT</span>    <span class="n">MCD</span>     <span class="n">BK</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">13</span>    <span class="mf">1.0</span>    <span class="mf">0.0</span>    <span class="mf">3.0</span>    <span class="mf">4.0</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">14</span>    <span class="mf">1.5</span>    <span class="mf">2.5</span>    <span class="mf">0.0</span>    <span class="mf">0.0</span>
</pre></div>
</div>
<p><strong>Filling with a Term:</strong></p>
<p>Let <code class="docutils literal notranslate"><span class="pre">f</span></code> be as above, and let <code class="docutils literal notranslate"><span class="pre">g</span></code> be another Factor which would
produce the following output:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>             <span class="n">AAPL</span>   <span class="n">MSFT</span>    <span class="n">MCD</span>     <span class="n">BK</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">13</span>   <span class="mf">10.0</span>   <span class="mf">20.0</span>   <span class="mf">30.0</span>   <span class="mf">40.0</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">14</span>   <span class="mf">15.0</span>   <span class="mf">25.0</span>   <span class="mf">35.0</span>   <span class="mf">45.0</span>
</pre></div>
</div>
<p>Then, <code class="docutils literal notranslate"><span class="pre">f.fillna(g)</span></code> produces the following output:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>             <span class="n">AAPL</span>   <span class="n">MSFT</span>    <span class="n">MCD</span>     <span class="n">BK</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">13</span>    <span class="mf">1.0</span>   <span class="mf">20.0</span>    <span class="mf">3.0</span>    <span class="mf">4.0</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">14</span>    <span class="mf">1.5</span>    <span class="mf">2.5</span>   <span class="mf">35.0</span>   <span class="mf">45.0</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>filled</strong> – A term computing the same results as <code class="docutils literal notranslate"><span class="pre">self</span></code>, but with missing
values filled in using values from <code class="docutils literal notranslate"><span class="pre">fill_value</span></code>.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>zipline.pipeline.ComputableTerm</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.Factor.mean">
<span class="sig-name descname"><span class="pre">mean</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.pipeline.Factor.mean" title="Permalink to this definition">#</a></dt>
<dd><p>Create a 1-dimensional factor computing the mean of self, each day.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>mask</strong> (<a class="reference internal" href="#zipline.pipeline.Filter" title="zipline.pipeline.Filter"><em>zipline.pipeline.Filter</em></a><em>, </em><em>optional</em>) – A Filter representing assets to consider when computing results.
If supplied, we ignore asset/date pairs where <code class="docutils literal notranslate"><span class="pre">mask</span></code> produces
<code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>result</strong></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#zipline.pipeline.Factor" title="zipline.pipeline.Factor">zipline.pipeline.Factor</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.Factor.stddev">
<span class="sig-name descname"><span class="pre">stddev</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.pipeline.Factor.stddev" title="Permalink to this definition">#</a></dt>
<dd><p>Create a 1-dimensional factor computing the stddev of self, each day.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>mask</strong> (<a class="reference internal" href="#zipline.pipeline.Filter" title="zipline.pipeline.Filter"><em>zipline.pipeline.Filter</em></a><em>, </em><em>optional</em>) – A Filter representing assets to consider when computing results.
If supplied, we ignore asset/date pairs where <code class="docutils literal notranslate"><span class="pre">mask</span></code> produces
<code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>result</strong></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#zipline.pipeline.Factor" title="zipline.pipeline.Factor">zipline.pipeline.Factor</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.Factor.max">
<span class="sig-name descname"><span class="pre">max</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.pipeline.Factor.max" title="Permalink to this definition">#</a></dt>
<dd><p>Create a 1-dimensional factor computing the max of self, each day.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>mask</strong> (<a class="reference internal" href="#zipline.pipeline.Filter" title="zipline.pipeline.Filter"><em>zipline.pipeline.Filter</em></a><em>, </em><em>optional</em>) – A Filter representing assets to consider when computing results.
If supplied, we ignore asset/date pairs where <code class="docutils literal notranslate"><span class="pre">mask</span></code> produces
<code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>result</strong></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#zipline.pipeline.Factor" title="zipline.pipeline.Factor">zipline.pipeline.Factor</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.Factor.min">
<span class="sig-name descname"><span class="pre">min</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.pipeline.Factor.min" title="Permalink to this definition">#</a></dt>
<dd><p>Create a 1-dimensional factor computing the min of self, each day.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>mask</strong> (<a class="reference internal" href="#zipline.pipeline.Filter" title="zipline.pipeline.Filter"><em>zipline.pipeline.Filter</em></a><em>, </em><em>optional</em>) – A Filter representing assets to consider when computing results.
If supplied, we ignore asset/date pairs where <code class="docutils literal notranslate"><span class="pre">mask</span></code> produces
<code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>result</strong></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#zipline.pipeline.Factor" title="zipline.pipeline.Factor">zipline.pipeline.Factor</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.Factor.median">
<span class="sig-name descname"><span class="pre">median</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.pipeline.Factor.median" title="Permalink to this definition">#</a></dt>
<dd><p>Create a 1-dimensional factor computing the median of self, each day.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>mask</strong> (<a class="reference internal" href="#zipline.pipeline.Filter" title="zipline.pipeline.Filter"><em>zipline.pipeline.Filter</em></a><em>, </em><em>optional</em>) – A Filter representing assets to consider when computing results.
If supplied, we ignore asset/date pairs where <code class="docutils literal notranslate"><span class="pre">mask</span></code> produces
<code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>result</strong></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#zipline.pipeline.Factor" title="zipline.pipeline.Factor">zipline.pipeline.Factor</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.Factor.sum">
<span class="sig-name descname"><span class="pre">sum</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.pipeline.Factor.sum" title="Permalink to this definition">#</a></dt>
<dd><p>Create a 1-dimensional factor computing the sum of self, each day.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>mask</strong> (<a class="reference internal" href="#zipline.pipeline.Filter" title="zipline.pipeline.Filter"><em>zipline.pipeline.Filter</em></a><em>, </em><em>optional</em>) – A Filter representing assets to consider when computing results.
If supplied, we ignore asset/date pairs where <code class="docutils literal notranslate"><span class="pre">mask</span></code> produces
<code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>result</strong></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#zipline.pipeline.Factor" title="zipline.pipeline.Factor">zipline.pipeline.Factor</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.pipeline.Term">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.pipeline.</span></span><span class="sig-name descname"><span class="pre">Term</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">domain</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">missing_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window_safe</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ndim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/term.html#Term"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.Term" title="Permalink to this definition">#</a></dt>
<dd><p>Base class for objects that can appear in the compute graph of a
<a class="reference internal" href="#zipline.pipeline.Pipeline" title="zipline.pipeline.Pipeline"><code class="xref py py-class docutils literal notranslate"><span class="pre">zipline.pipeline.Pipeline</span></code></a>.</p>
<p class="rubric">Notes</p>
<p>Most Pipeline API users only interact with <a class="reference internal" href="#zipline.pipeline.Term" title="zipline.pipeline.Term"><code class="xref py py-class docutils literal notranslate"><span class="pre">Term</span></code></a> via subclasses:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#zipline.pipeline.data.BoundColumn" title="zipline.pipeline.data.BoundColumn"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoundColumn</span></code></a></p></li>
<li><p><a class="reference internal" href="#zipline.pipeline.Factor" title="zipline.pipeline.Factor"><code class="xref py py-class docutils literal notranslate"><span class="pre">Factor</span></code></a></p></li>
<li><p><a class="reference internal" href="#zipline.pipeline.Filter" title="zipline.pipeline.Filter"><code class="xref py py-class docutils literal notranslate"><span class="pre">Filter</span></code></a></p></li>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Classifier</span></code></p></li>
</ul>
<p>Instances of <a class="reference internal" href="#zipline.pipeline.Term" title="zipline.pipeline.Term"><code class="xref py py-class docutils literal notranslate"><span class="pre">Term</span></code></a> are <strong>memoized</strong>. If you call a Term’s
constructor with the same arguments twice, the same object will be returned
from both calls:</p>
<p><strong>Example:</strong></p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">zipline.pipeline.data</span> <span class="kn">import</span> <span class="n">EquityPricing</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">zipline.pipeline.factors</span> <span class="kn">import</span> <span class="n">SimpleMovingAverage</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">SimpleMovingAverage</span><span class="p">(</span><span class="n">inputs</span><span class="o">=</span><span class="p">[</span><span class="n">EquityPricing</span><span class="o">.</span><span class="n">close</span><span class="p">],</span> <span class="n">window_length</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="n">SimpleMovingAverage</span><span class="p">(</span><span class="n">inputs</span><span class="o">=</span><span class="p">[</span><span class="n">EquityPricing</span><span class="o">.</span><span class="n">close</span><span class="p">],</span> <span class="n">window_length</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="ow">is</span> <span class="n">y</span>
<span class="go">True</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Memoization of terms means that it’s generally unsafe to modify
attributes of a term after construction.</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.Term.graph_repr">
<span class="sig-name descname"><span class="pre">graph_repr</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/term.html#Term.graph_repr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.Term.graph_repr" title="Permalink to this definition">#</a></dt>
<dd><p>A short repr to use when rendering GraphViz graphs.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.Term.recursive_repr">
<span class="sig-name descname"><span class="pre">recursive_repr</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/term.html#Term.recursive_repr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.Term.recursive_repr" title="Permalink to this definition">#</a></dt>
<dd><p>A short repr to use when recursively rendering terms with inputs.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.pipeline.data.DataSet">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.pipeline.data.</span></span><span class="sig-name descname"><span class="pre">DataSet</span></span><a class="reference internal" href="_modules/zipline/pipeline/data/dataset.html#DataSet"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.data.DataSet" title="Permalink to this definition">#</a></dt>
<dd><p>Base class for Pipeline datasets.</p>
<p>A <a class="reference internal" href="#zipline.pipeline.data.DataSet" title="zipline.pipeline.data.DataSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataSet</span></code></a> is defined by two parts:</p>
<ol class="arabic simple">
<li><p>A collection of <a class="reference internal" href="#zipline.pipeline.data.Column" title="zipline.pipeline.data.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> objects that
describe the queryable attributes of the dataset.</p></li>
<li><p>A <code class="xref py py-class docutils literal notranslate"><span class="pre">Domain</span></code> describing the assets and
calendar of the data represented by the <a class="reference internal" href="#zipline.pipeline.data.DataSet" title="zipline.pipeline.data.DataSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataSet</span></code></a>.</p></li>
</ol>
<p>To create a new Pipeline dataset, define a subclass of <a class="reference internal" href="#zipline.pipeline.data.DataSet" title="zipline.pipeline.data.DataSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataSet</span></code></a> and
set one or more <a class="reference internal" href="#zipline.pipeline.data.Column" title="zipline.pipeline.data.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> objects as class-level attributes. Each
column requires a <code class="docutils literal notranslate"><span class="pre">np.dtype</span></code> that describes the type of data that should
be produced by a loader for the dataset. Integer columns must also provide
a “missing value” to be used when no value is available for a given
asset/date combination.</p>
<p>By default, the domain of a dataset is the special singleton value,
<code class="xref py py-data docutils literal notranslate"><span class="pre">GENERIC</span></code>, which means that they can be used
in a Pipeline running on <strong>any</strong> domain.</p>
<p>In some cases, it may be preferable to restrict a dataset to only allow
support a single domain. For example, a DataSet may describe data from a
vendor that only covers the US. To restrict a dataset to a specific domain,
define a <cite>domain</cite> attribute at class scope.</p>
<p>You can also define a domain-specific version of a generic DataSet by
calling its <code class="docutils literal notranslate"><span class="pre">specialize</span></code> method with the domain of interest.</p>
<p class="rubric">Examples</p>
<p>The built-in EquityPricing dataset is defined as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">EquityPricing</span><span class="p">(</span><span class="n">DataSet</span><span class="p">):</span>
    <span class="nb">open</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>
    <span class="n">high</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>
    <span class="n">low</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>
    <span class="n">close</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>
    <span class="n">volume</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>
</pre></div>
</div>
<p>The built-in USEquityPricing dataset is a specialization of
EquityPricing. It is defined as:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">zipline.pipeline.domain</span> <span class="kn">import</span> <span class="n">US_EQUITIES</span>
<span class="n">USEquityPricing</span> <span class="o">=</span> <span class="n">EquityPricing</span><span class="o">.</span><span class="n">specialize</span><span class="p">(</span><span class="n">US_EQUITIES</span><span class="p">)</span>
</pre></div>
</div>
<p>Columns can have types other than float. A dataset containing assorted
company metadata might be defined like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">CompanyMetadata</span><span class="p">(</span><span class="n">DataSet</span><span class="p">):</span>
    <span class="c1"># Use float for semantically-numeric data, even if it&#39;s always</span>
    <span class="c1"># integral valued (see Notes section below). The default missing</span>
    <span class="c1"># value for floats is NaN.</span>
    <span class="n">shares_outstanding</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>

    <span class="c1"># Use object for string columns. The default missing value for</span>
    <span class="c1"># object-dtype columns is None.</span>
    <span class="n">ticker</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="nb">object</span><span class="p">)</span>

    <span class="c1"># Use integers for integer-valued categorical data like sector or</span>
    <span class="c1"># industry codes. Integer-dtype columns require an explicit missing</span>
    <span class="c1"># value.</span>
    <span class="n">sector_code</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">missing_value</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>

    <span class="c1"># Use bool for boolean-valued flags. Note that the default missing</span>
    <span class="c1"># value for bool-dtype columns is False.</span>
    <span class="n">is_primary_share</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="nb">bool</span><span class="p">)</span>
</pre></div>
</div>
<p class="rubric">Notes</p>
<p>Because numpy has no native support for integers with missing values, users
are strongly encouraged to use floats for any data that’s semantically
numeric. Doing so enables the use of <cite>NaN</cite> as a natural missing value,
which has useful propagation semantics.</p>
<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.data.DataSet.get_column">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_column</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/data/dataset.html#DataSet.get_column"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.data.DataSet.get_column" title="Permalink to this definition">#</a></dt>
<dd><p>Look up a column by name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – Name of the column to look up.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>column</strong> – Column with the given name.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#zipline.pipeline.data.BoundColumn" title="zipline.pipeline.data.BoundColumn">zipline.pipeline.data.BoundColumn</a></p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#AttributeError" title="(in Python v3.11)"><strong>AttributeError</strong></a> – If no column with the given name exists.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.pipeline.data.Column">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.pipeline.data.</span></span><span class="sig-name descname"><span class="pre">Column</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dtype</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">missing_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">doc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metadata</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">currency_aware</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/data/dataset.html#Column"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.data.Column" title="Permalink to this definition">#</a></dt>
<dd><p>An abstract column of data, not yet associated with a dataset.</p>
<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.data.Column.bind">
<span class="sig-name descname"><span class="pre">bind</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/data/dataset.html#Column.bind"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.data.Column.bind" title="Permalink to this definition">#</a></dt>
<dd><p>Bind a <cite>Column</cite> object to its name.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.pipeline.data.BoundColumn">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.pipeline.data.</span></span><span class="sig-name descname"><span class="pre">BoundColumn</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dtype</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">missing_value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">doc</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metadata</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">currency_conversion</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">currency_aware</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/data/dataset.html#BoundColumn"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.data.BoundColumn" title="Permalink to this definition">#</a></dt>
<dd><p>A column of data that’s been concretely bound to a particular dataset.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="zipline.pipeline.data.BoundColumn.dtype">
<span class="sig-name descname"><span class="pre">dtype</span></span><a class="headerlink" href="#zipline.pipeline.data.BoundColumn.dtype" title="Permalink to this definition">#</a></dt>
<dd><p>The dtype of data produced when this column is loaded.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.dtype.html#numpy.dtype" title="(in NumPy v1.25)">numpy.dtype</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="zipline.pipeline.data.BoundColumn.latest">
<span class="sig-name descname"><span class="pre">latest</span></span><a class="headerlink" href="#zipline.pipeline.data.BoundColumn.latest" title="Permalink to this definition">#</a></dt>
<dd><p>A <a class="reference internal" href="#zipline.pipeline.Filter" title="zipline.pipeline.Filter"><code class="xref py py-class docutils literal notranslate"><span class="pre">Filter</span></code></a>, <a class="reference internal" href="#zipline.pipeline.Factor" title="zipline.pipeline.Factor"><code class="xref py py-class docutils literal notranslate"><span class="pre">Factor</span></code></a>,
or <code class="xref py py-class docutils literal notranslate"><span class="pre">Classifier</span></code> computing the most recently
known value of this column on each date.
See <code class="xref py py-class docutils literal notranslate"><span class="pre">zipline.pipeline.mixins.LatestMixin</span></code> for more details.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>zipline.pipeline.LoadableTerm</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="zipline.pipeline.data.BoundColumn.dataset">
<span class="sig-name descname"><span class="pre">dataset</span></span><a class="headerlink" href="#zipline.pipeline.data.BoundColumn.dataset" title="Permalink to this definition">#</a></dt>
<dd><p>The dataset to which this column is bound.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#zipline.pipeline.data.DataSet" title="zipline.pipeline.data.DataSet">zipline.pipeline.data.DataSet</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="zipline.pipeline.data.BoundColumn.name">
<span class="sig-name descname"><span class="pre">name</span></span><a class="headerlink" href="#zipline.pipeline.data.BoundColumn.name" title="Permalink to this definition">#</a></dt>
<dd><p>The name of this column.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="zipline.pipeline.data.BoundColumn.metadata">
<span class="sig-name descname"><span class="pre">metadata</span></span><a class="headerlink" href="#zipline.pipeline.data.BoundColumn.metadata" title="Permalink to this definition">#</a></dt>
<dd><p>Extra metadata associated with this column.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)">dict</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="zipline.pipeline.data.BoundColumn.currency_aware">
<span class="sig-name descname"><span class="pre">currency_aware</span></span><a class="headerlink" href="#zipline.pipeline.data.BoundColumn.currency_aware" title="Permalink to this definition">#</a></dt>
<dd><p>Whether or not this column produces currency-denominated data.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)">bool</a></p>
</dd>
</dl>
</dd></dl>

<p class="rubric">Notes</p>
<p>Instances of this class are dynamically created upon access to attributes
of <a class="reference internal" href="#zipline.pipeline.data.DataSet" title="zipline.pipeline.data.DataSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataSet</span></code></a>. For example,
<a class="reference internal" href="#zipline.pipeline.data.EquityPricing.close" title="zipline.pipeline.data.EquityPricing.close"><code class="xref py py-attr docutils literal notranslate"><span class="pre">close</span></code></a> is an instance of this
class. Pipeline API users should never construct instances of this
directly.</p>
<dl class="py property">
<dt class="sig sig-object py" id="id3">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">currency_aware</span></span><a class="headerlink" href="#id3" title="Permalink to this definition">#</a></dt>
<dd><p>Whether or not this column produces currency-denominated data.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="zipline.pipeline.data.BoundColumn.currency_conversion">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">currency_conversion</span></span><a class="headerlink" href="#zipline.pipeline.data.BoundColumn.currency_conversion" title="Permalink to this definition">#</a></dt>
<dd><p>Specification for currency conversions applied for this term.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="id4">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">dataset</span></span><a class="headerlink" href="#id4" title="Permalink to this definition">#</a></dt>
<dd><p>The dataset to which this column is bound.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.data.BoundColumn.fx">
<span class="sig-name descname"><span class="pre">fx</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">currency</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/data/dataset.html#BoundColumn.fx"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.data.BoundColumn.fx" title="Permalink to this definition">#</a></dt>
<dd><p>Construct a currency-converted version of this column.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>currency</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em> or </em><em>zipline.currency.Currency</em>) – Currency into which to convert this column’s data.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>column</strong> – Column producing the same data as <code class="docutils literal notranslate"><span class="pre">self</span></code>, but currency-converted
into <code class="docutils literal notranslate"><span class="pre">currency</span></code>.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#zipline.pipeline.data.BoundColumn" title="zipline.pipeline.data.BoundColumn">BoundColumn</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.data.BoundColumn.graph_repr">
<span class="sig-name descname"><span class="pre">graph_repr</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/data/dataset.html#BoundColumn.graph_repr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.data.BoundColumn.graph_repr" title="Permalink to this definition">#</a></dt>
<dd><p>Short repr to use when rendering Pipeline graphs.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="id5">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">metadata</span></span><a class="headerlink" href="#id5" title="Permalink to this definition">#</a></dt>
<dd><p>A copy of the metadata for this column.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="id6">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">name</span></span><a class="headerlink" href="#id6" title="Permalink to this definition">#</a></dt>
<dd><p>The name of this column.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="zipline.pipeline.data.BoundColumn.qualname">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">qualname</span></span><a class="headerlink" href="#zipline.pipeline.data.BoundColumn.qualname" title="Permalink to this definition">#</a></dt>
<dd><p>The fully-qualified name of this column.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.data.BoundColumn.recursive_repr">
<span class="sig-name descname"><span class="pre">recursive_repr</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/data/dataset.html#BoundColumn.recursive_repr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.data.BoundColumn.recursive_repr" title="Permalink to this definition">#</a></dt>
<dd><p>Short repr used to render in recursive contexts.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.data.BoundColumn.specialize">
<span class="sig-name descname"><span class="pre">specialize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">domain</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/data/dataset.html#BoundColumn.specialize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.data.BoundColumn.specialize" title="Permalink to this definition">#</a></dt>
<dd><p>Specialize <code class="docutils literal notranslate"><span class="pre">self</span></code> to a concrete domain.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.data.BoundColumn.unspecialize">
<span class="sig-name descname"><span class="pre">unspecialize</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/data/dataset.html#BoundColumn.unspecialize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.data.BoundColumn.unspecialize" title="Permalink to this definition">#</a></dt>
<dd><p>Unspecialize a column to its generic form.</p>
<p>This is equivalent to <code class="docutils literal notranslate"><span class="pre">column.specialize(GENERIC)</span></code>.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.pipeline.data.DataSetFamily">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.pipeline.data.</span></span><span class="sig-name descname"><span class="pre">DataSetFamily</span></span><a class="reference internal" href="_modules/zipline/pipeline/data/dataset.html#DataSetFamily"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.data.DataSetFamily" title="Permalink to this definition">#</a></dt>
<dd><p>Base class for Pipeline dataset families.</p>
<p>Dataset families are used to represent data where the unique identifier for
a row requires more than just asset and date coordinates. A
<a class="reference internal" href="#zipline.pipeline.data.DataSetFamily" title="zipline.pipeline.data.DataSetFamily"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataSetFamily</span></code></a> can also be thought of as a collection of
<a class="reference internal" href="#zipline.pipeline.data.DataSet" title="zipline.pipeline.data.DataSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataSet</span></code></a> objects, each of which has the same
columns, domain, and ndim.</p>
<p><a class="reference internal" href="#zipline.pipeline.data.DataSetFamily" title="zipline.pipeline.data.DataSetFamily"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataSetFamily</span></code></a> objects are defined with one or more
<a class="reference internal" href="#zipline.pipeline.data.Column" title="zipline.pipeline.data.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> objects, plus one additional field:
<code class="docutils literal notranslate"><span class="pre">extra_dims</span></code>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">extra_dims</span></code> field defines coordinates other than asset and date that
must be fixed to produce a logical timeseries. The column objects determine
columns that will be shared by slices of the family.</p>
<p><code class="docutils literal notranslate"><span class="pre">extra_dims</span></code> are represented as an ordered dictionary where the keys are
the dimension name, and the values are a set of unique values along that
dimension.</p>
<p>To work with a <a class="reference internal" href="#zipline.pipeline.data.DataSetFamily" title="zipline.pipeline.data.DataSetFamily"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataSetFamily</span></code></a> in a pipeline expression, one must
choose a specific value for each of the extra dimensions using the
<a class="reference internal" href="#zipline.pipeline.data.DataSetFamily.slice" title="zipline.pipeline.data.DataSetFamily.slice"><code class="xref py py-meth docutils literal notranslate"><span class="pre">slice()</span></code></a> method.
For example, given a <a class="reference internal" href="#zipline.pipeline.data.DataSetFamily" title="zipline.pipeline.data.DataSetFamily"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataSetFamily</span></code></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">SomeDataSet</span><span class="p">(</span><span class="n">DataSetFamily</span><span class="p">):</span>
    <span class="n">extra_dims</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s1">&#39;dimension_0&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">}),</span>
        <span class="p">(</span><span class="s1">&#39;dimension_1&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">,</span> <span class="s1">&#39;f&#39;</span><span class="p">}),</span>
    <span class="p">]</span>

    <span class="n">column_0</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>
    <span class="n">column_1</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="nb">bool</span><span class="p">)</span>
</pre></div>
</div>
<p>This dataset might represent a table with the following columns:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">sid</span> <span class="p">::</span> <span class="n">int64</span>
<span class="n">asof_date</span> <span class="p">::</span> <span class="n">datetime64</span><span class="p">[</span><span class="n">ns</span><span class="p">]</span>
<span class="n">timestamp</span> <span class="p">::</span> <span class="n">datetime64</span><span class="p">[</span><span class="n">ns</span><span class="p">]</span>
<span class="n">dimension_0</span> <span class="p">::</span> <span class="nb">str</span>
<span class="n">dimension_1</span> <span class="p">::</span> <span class="nb">str</span>
<span class="n">column_0</span> <span class="p">::</span> <span class="n">float64</span>
<span class="n">column_1</span> <span class="p">::</span> <span class="nb">bool</span>
</pre></div>
</div>
<p>Here we see the implicit <code class="docutils literal notranslate"><span class="pre">sid</span></code>, <code class="docutils literal notranslate"><span class="pre">asof_date</span></code> and <code class="docutils literal notranslate"><span class="pre">timestamp</span></code> columns
as well as the extra dimensions columns.</p>
<p>This <a class="reference internal" href="#zipline.pipeline.data.DataSetFamily" title="zipline.pipeline.data.DataSetFamily"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataSetFamily</span></code></a> can be converted to a regular <a class="reference internal" href="#zipline.pipeline.data.DataSet" title="zipline.pipeline.data.DataSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataSet</span></code></a>
with:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">DataSetSlice</span> <span class="o">=</span> <span class="n">SomeDataSet</span><span class="o">.</span><span class="n">slice</span><span class="p">(</span><span class="n">dimension_0</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="n">dimension_1</span><span class="o">=</span><span class="s1">&#39;e&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>This sliced dataset represents the rows from the higher dimensional dataset
where <code class="docutils literal notranslate"><span class="pre">(dimension_0</span> <span class="pre">==</span> <span class="pre">'a')</span> <span class="pre">&amp;</span> <span class="pre">(dimension_1</span> <span class="pre">==</span> <span class="pre">'e')</span></code>.</p>
<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.data.DataSetFamily.slice">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">slice</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/data/dataset.html#DataSetFamily.slice"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.data.DataSetFamily.slice" title="Permalink to this definition">#</a></dt>
<dd><p>Take a slice of a DataSetFamily to produce a dataset
indexed by asset and date.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>*args</strong> – </p></li>
<li><p><strong>**kwargs</strong> – The coordinates to fix along each extra dimension.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>dataset</strong> – A regular pipeline dataset indexed by asset and date.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#zipline.pipeline.data.DataSet" title="zipline.pipeline.data.DataSet">DataSet</a></p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>The extra dimensions coords used to produce the result are available
under the <code class="docutils literal notranslate"><span class="pre">extra_coords</span></code> attribute.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.pipeline.data.EquityPricing">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.pipeline.data.</span></span><span class="sig-name descname"><span class="pre">EquityPricing</span></span><a class="reference internal" href="_modules/zipline/pipeline/data/equity_pricing.html#EquityPricing"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.data.EquityPricing" title="Permalink to this definition">#</a></dt>
<dd><p><a class="reference internal" href="#zipline.pipeline.data.DataSet" title="zipline.pipeline.data.DataSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataSet</span></code></a> containing daily trading prices and
volumes.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="zipline.pipeline.data.EquityPricing.close">
<span class="sig-name descname"><span class="pre">close</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">EquityPricing.close::float64</span></em><a class="headerlink" href="#zipline.pipeline.data.EquityPricing.close" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="zipline.pipeline.data.EquityPricing.high">
<span class="sig-name descname"><span class="pre">high</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">EquityPricing.high::float64</span></em><a class="headerlink" href="#zipline.pipeline.data.EquityPricing.high" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="zipline.pipeline.data.EquityPricing.low">
<span class="sig-name descname"><span class="pre">low</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">EquityPricing.low::float64</span></em><a class="headerlink" href="#zipline.pipeline.data.EquityPricing.low" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="zipline.pipeline.data.EquityPricing.open">
<span class="sig-name descname"><span class="pre">open</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">EquityPricing.open::float64</span></em><a class="headerlink" href="#zipline.pipeline.data.EquityPricing.open" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="zipline.pipeline.data.EquityPricing.volume">
<span class="sig-name descname"><span class="pre">volume</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">EquityPricing.volume::float64</span></em><a class="headerlink" href="#zipline.pipeline.data.EquityPricing.volume" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

</dd></dl>

<section id="built-in-factors">
<h3>Built-in Factors<a class="headerlink" href="#built-in-factors" title="Permalink to this heading">#</a></h3>
<p>Factors aim to transform the input data in a way that extracts a signal on which the algorithm can trade.</p>
<dl class="py class">
<dt class="sig sig-object py" id="zipline.pipeline.factors.AverageDollarVolume">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.pipeline.factors.</span></span><span class="sig-name descname"><span class="pre">AverageDollarVolume</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">missing_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ndim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/basic.html#AverageDollarVolume"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.factors.AverageDollarVolume" title="Permalink to this definition">#</a></dt>
<dd><p>Average Daily Dollar Volume</p>
<p><strong>Default Inputs:</strong> [EquityPricing.close, EquityPricing.volume]</p>
<p><strong>Default Window Length:</strong> None</p>
<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.factors.AverageDollarVolume.compute">
<span class="sig-name descname"><span class="pre">compute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">today</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">assets</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">close</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">volume</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/basic.html#AverageDollarVolume.compute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.factors.AverageDollarVolume.compute" title="Permalink to this definition">#</a></dt>
<dd><p>Override this method with a function that writes a value into <cite>out</cite>.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.pipeline.factors.BollingerBands">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.pipeline.factors.</span></span><span class="sig-name descname"><span class="pre">BollingerBands</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">missing_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ndim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/technical.html#BollingerBands"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.factors.BollingerBands" title="Permalink to this definition">#</a></dt>
<dd><p>Bollinger Bands technical indicator.
<a class="reference external" href="https://en.wikipedia.org/wiki/Bollinger_Bands">https://en.wikipedia.org/wiki/Bollinger_Bands</a></p>
<p><strong>Default Inputs:</strong> <a class="reference internal" href="#zipline.pipeline.data.EquityPricing.close" title="zipline.pipeline.data.EquityPricing.close"><code class="xref py py-data docutils literal notranslate"><span class="pre">zipline.pipeline.data.EquityPricing.close</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>inputs</strong> (<em>length-1 iterable</em><em>[</em><a class="reference internal" href="#zipline.pipeline.data.BoundColumn" title="zipline.pipeline.data.BoundColumn"><em>BoundColumn</em></a><em>]</em>) – The expression over which to compute bollinger bands.</p></li>
<li><p><strong>window_length</strong> (<em>int &gt; 0</em>) – Length of the lookback window over which to compute the bollinger
bands.</p></li>
<li><p><strong>k</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – The number of standard deviations to add or subtract to create the
upper and lower bands.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.factors.BollingerBands.compute">
<span class="sig-name descname"><span class="pre">compute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">today</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">assets</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">close</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">k</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/technical.html#BollingerBands.compute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.factors.BollingerBands.compute" title="Permalink to this definition">#</a></dt>
<dd><p>Override this method with a function that writes a value into <cite>out</cite>.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.pipeline.factors.BusinessDaysSincePreviousEvent">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.pipeline.factors.</span></span><span class="sig-name descname"><span class="pre">BusinessDaysSincePreviousEvent</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">domain</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/events.html#BusinessDaysSincePreviousEvent"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.factors.BusinessDaysSincePreviousEvent" title="Permalink to this definition">#</a></dt>
<dd><p>Abstract class for business days since a previous event.
Returns the number of <strong>business days</strong> (not trading days!) since
the most recent event date for each asset.</p>
<p>This doesn’t use trading days for symmetry with
BusinessDaysUntilNextEarnings.</p>
<p>Assets which announced or will announce the event today will produce a
value of 0.0. Assets that announced the event on the previous business
day will produce a value of 1.0.</p>
<p>Assets for which the event date is <cite>NaT</cite> will produce a value of <cite>NaN</cite>.</p>
<p class="rubric">Example</p>
<p><code class="docutils literal notranslate"><span class="pre">BusinessDaysSincePreviousEvent</span></code> can be used to create an event-driven
factor. For instance, you may want to only trade assets that have
a data point with an asof_date in the last 5 business days. To do this,
you can create a <code class="docutils literal notranslate"><span class="pre">BusinessDaysSincePreviousEvent</span></code> factor, supplying
the relevant asof_date column from your dataset as input, like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Factor computing number of days since most recent asof_date</span>
<span class="c1"># per asset.</span>
<span class="n">days_since_event</span> <span class="o">=</span> <span class="n">BusinessDaysSincePreviousEvent</span><span class="p">(</span>
    <span class="n">inputs</span><span class="o">=</span><span class="p">[</span><span class="n">MyDataset</span><span class="o">.</span><span class="n">asof_date</span><span class="p">]</span>
<span class="p">)</span>

<span class="c1"># Filter returning True for each asset whose most recent asof_date</span>
<span class="c1"># was in the last 5 business days.</span>
<span class="n">recency_filter</span> <span class="o">=</span> <span class="p">(</span><span class="n">days_since_event</span> <span class="o">&lt;=</span> <span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="zipline.pipeline.factors.BusinessDaysSincePreviousEvent.dtype">
<span class="sig-name descname"><span class="pre">dtype</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">dtype('float64')</span></em><a class="headerlink" href="#zipline.pipeline.factors.BusinessDaysSincePreviousEvent.dtype" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.pipeline.factors.BusinessDaysUntilNextEvent">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.pipeline.factors.</span></span><span class="sig-name descname"><span class="pre">BusinessDaysUntilNextEvent</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">domain</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/events.html#BusinessDaysUntilNextEvent"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.factors.BusinessDaysUntilNextEvent" title="Permalink to this definition">#</a></dt>
<dd><p>Abstract class for business days since a next event.
Returns the number of <strong>business days</strong> (not trading days!) until
the next known event date for each asset.</p>
<p>This doesn’t use trading days because the trading calendar includes
information that may not have been available to the algorithm at the time
when <cite>compute</cite> is called.</p>
<p>For example, the NYSE closings September 11th 2001, would not have been
known to the algorithm on September 10th.</p>
<p>Assets that announced or will announce the event today will produce a value
of 0.0.  Assets that will announce the event on the next upcoming business
day will produce a value of 1.0.</p>
<p>Assets for which the event date is <cite>NaT</cite> will produce a value of <cite>NaN</cite>.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="zipline.pipeline.factors.BusinessDaysUntilNextEvent.dtype">
<span class="sig-name descname"><span class="pre">dtype</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">dtype('float64')</span></em><a class="headerlink" href="#zipline.pipeline.factors.BusinessDaysUntilNextEvent.dtype" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.pipeline.factors.DailyReturns">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.pipeline.factors.</span></span><span class="sig-name descname"><span class="pre">DailyReturns</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">missing_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ndim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/basic.html#DailyReturns"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.factors.DailyReturns" title="Permalink to this definition">#</a></dt>
<dd><p>Calculates daily percent change in close price.</p>
<p><strong>Default Inputs</strong>: [EquityPricing.close]</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.pipeline.factors.ExponentialWeightedMovingAverage">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.pipeline.factors.</span></span><span class="sig-name descname"><span class="pre">ExponentialWeightedMovingAverage</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">missing_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ndim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/basic.html#ExponentialWeightedMovingAverage"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.factors.ExponentialWeightedMovingAverage" title="Permalink to this definition">#</a></dt>
<dd><p>Exponentially Weighted Moving Average</p>
<p><strong>Default Inputs:</strong> None</p>
<p><strong>Default Window Length:</strong> None</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>inputs</strong> (<em>length-1 list/tuple</em><em> of </em><a class="reference internal" href="#zipline.pipeline.data.BoundColumn" title="zipline.pipeline.data.BoundColumn"><em>BoundColumn</em></a>) – The expression over which to compute the average.</p></li>
<li><p><strong>window_length</strong> (<em>int &gt; 0</em>) – Length of the lookback window over which to compute the average.</p></li>
<li><p><strong>decay_rate</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>, </em><em>0 &lt; decay_rate &lt;= 1</em>) – <p>Weighting factor by which to discount past observations.</p>
<p>When calculating historical averages, rows are multiplied by the
sequence:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">decay_rate</span><span class="p">,</span> <span class="n">decay_rate</span> <span class="o">**</span> <span class="mi">2</span><span class="p">,</span> <span class="n">decay_rate</span> <span class="o">**</span> <span class="mi">3</span><span class="p">,</span> <span class="o">...</span>
</pre></div>
</div>
</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>This class can also be imported under the name <code class="docutils literal notranslate"><span class="pre">EWMA</span></code>.</p></li>
</ul>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.ewm.html#pandas.DataFrame.ewm" title="(in pandas v2.0.3)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pandas.DataFrame.ewm()</span></code></a></p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.factors.ExponentialWeightedMovingAverage.compute">
<span class="sig-name descname"><span class="pre">compute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">today</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">assets</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">decay_rate</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/basic.html#ExponentialWeightedMovingAverage.compute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.factors.ExponentialWeightedMovingAverage.compute" title="Permalink to this definition">#</a></dt>
<dd><p>Override this method with a function that writes a value into <cite>out</cite>.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.pipeline.factors.ExponentialWeightedMovingStdDev">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.pipeline.factors.</span></span><span class="sig-name descname"><span class="pre">ExponentialWeightedMovingStdDev</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">missing_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ndim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/basic.html#ExponentialWeightedMovingStdDev"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.factors.ExponentialWeightedMovingStdDev" title="Permalink to this definition">#</a></dt>
<dd><p>Exponentially Weighted Moving Standard Deviation</p>
<p><strong>Default Inputs:</strong> None</p>
<p><strong>Default Window Length:</strong> None</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>inputs</strong> (<em>length-1 list/tuple</em><em> of </em><a class="reference internal" href="#zipline.pipeline.data.BoundColumn" title="zipline.pipeline.data.BoundColumn"><em>BoundColumn</em></a>) – The expression over which to compute the average.</p></li>
<li><p><strong>window_length</strong> (<em>int &gt; 0</em>) – Length of the lookback window over which to compute the average.</p></li>
<li><p><strong>decay_rate</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>, </em><em>0 &lt; decay_rate &lt;= 1</em>) – <p>Weighting factor by which to discount past observations.</p>
<p>When calculating historical averages, rows are multiplied by the
sequence:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">decay_rate</span><span class="p">,</span> <span class="n">decay_rate</span> <span class="o">**</span> <span class="mi">2</span><span class="p">,</span> <span class="n">decay_rate</span> <span class="o">**</span> <span class="mi">3</span><span class="p">,</span> <span class="o">...</span>
</pre></div>
</div>
</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>This class can also be imported under the name <code class="docutils literal notranslate"><span class="pre">EWMSTD</span></code>.</p></li>
</ul>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.DataFrame.ewm()</span></code></p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.factors.ExponentialWeightedMovingStdDev.compute">
<span class="sig-name descname"><span class="pre">compute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">today</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">assets</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">decay_rate</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/basic.html#ExponentialWeightedMovingStdDev.compute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.factors.ExponentialWeightedMovingStdDev.compute" title="Permalink to this definition">#</a></dt>
<dd><p>Override this method with a function that writes a value into <cite>out</cite>.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.pipeline.factors.Latest">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.pipeline.factors.</span></span><span class="sig-name descname"><span class="pre">Latest</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">missing_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ndim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/factor.html#Latest"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.factors.Latest" title="Permalink to this definition">#</a></dt>
<dd><p>Factor producing the most recently-known value of <cite>inputs[0]</cite> on each day.</p>
<p>The <cite>.latest</cite> attribute of DataSet columns returns an instance of this
Factor.</p>
<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.factors.Latest.compute">
<span class="sig-name descname"><span class="pre">compute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">today</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">assets</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/factor.html#Latest.compute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.factors.Latest.compute" title="Permalink to this definition">#</a></dt>
<dd><p>Override this method with a function that writes a value into <cite>out</cite>.</p>
</dd></dl>

</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="zipline.pipeline.factors.MACDSignal">
<span class="sig-prename descclassname"><span class="pre">zipline.pipeline.factors.</span></span><span class="sig-name descname"><span class="pre">MACDSignal</span></span><a class="headerlink" href="#zipline.pipeline.factors.MACDSignal" title="Permalink to this definition">#</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">MovingAverageConvergenceDivergenceSignal</span></code></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.pipeline.factors.MaxDrawdown">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.pipeline.factors.</span></span><span class="sig-name descname"><span class="pre">MaxDrawdown</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">missing_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ndim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/basic.html#MaxDrawdown"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.factors.MaxDrawdown" title="Permalink to this definition">#</a></dt>
<dd><p>Max Drawdown</p>
<p><strong>Default Inputs:</strong> None</p>
<p><strong>Default Window Length:</strong> None</p>
<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.factors.MaxDrawdown.compute">
<span class="sig-name descname"><span class="pre">compute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">today</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">assets</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/basic.html#MaxDrawdown.compute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.factors.MaxDrawdown.compute" title="Permalink to this definition">#</a></dt>
<dd><p>Override this method with a function that writes a value into <cite>out</cite>.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.pipeline.factors.Returns">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.pipeline.factors.</span></span><span class="sig-name descname"><span class="pre">Returns</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">missing_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ndim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/basic.html#Returns"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.factors.Returns" title="Permalink to this definition">#</a></dt>
<dd><p>Calculates the percent change in close price over the given window_length.</p>
<p><strong>Default Inputs</strong>: [EquityPricing.close]</p>
<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.factors.Returns.compute">
<span class="sig-name descname"><span class="pre">compute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">today</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">assets</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">close</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/basic.html#Returns.compute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.factors.Returns.compute" title="Permalink to this definition">#</a></dt>
<dd><p>Override this method with a function that writes a value into <cite>out</cite>.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.pipeline.factors.RollingPearson">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.pipeline.factors.</span></span><span class="sig-name descname"><span class="pre">RollingPearson</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">base_factor</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">correlation_length</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/statistical.html#RollingPearson"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.factors.RollingPearson" title="Permalink to this definition">#</a></dt>
<dd><p>A Factor that computes pearson correlation coefficients between the columns
of a given Factor and either the columns of another Factor/BoundColumn or a
slice/single column of data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>base_factor</strong> (<a class="reference internal" href="#zipline.pipeline.Factor" title="zipline.pipeline.Factor"><em>zipline.pipeline.Factor</em></a>) – The factor for which to compute correlations of each of its columns
with <cite>target</cite>.</p></li>
<li><p><strong>target</strong> (<em>zipline.pipeline.Term with a numeric dtype</em>) – The term with which to compute correlations against each column of data
produced by <cite>base_factor</cite>. This term may be a Factor, a BoundColumn or
a Slice. If <cite>target</cite> is two-dimensional, correlations are computed
asset-wise.</p></li>
<li><p><strong>correlation_length</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – Length of the lookback window over which to compute each correlation
coefficient.</p></li>
<li><p><strong>mask</strong> (<a class="reference internal" href="#zipline.pipeline.Filter" title="zipline.pipeline.Filter"><em>zipline.pipeline.Filter</em></a><em>, </em><em>optional</em>) – A Filter describing which assets (columns) of <cite>base_factor</cite> should have
their correlation with <cite>target</cite> computed each day.</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.pearsonr.html#scipy.stats.pearsonr" title="(in SciPy v1.11.1)"><code class="xref py py-func docutils literal notranslate"><span class="pre">scipy.stats.pearsonr()</span></code></a>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">Factor.pearsonr()</span></code>, <a class="reference internal" href="#zipline.pipeline.factors.RollingPearsonOfReturns" title="zipline.pipeline.factors.RollingPearsonOfReturns"><code class="xref py py-class docutils literal notranslate"><span class="pre">zipline.pipeline.factors.RollingPearsonOfReturns</span></code></a></p>
</div>
<p class="rubric">Notes</p>
<p>Most users should call Factor.pearsonr rather than directly construct an
instance of this class.</p>
<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.factors.RollingPearson.compute">
<span class="sig-name descname"><span class="pre">compute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">today</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">assets</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/statistical.html#RollingPearson.compute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.factors.RollingPearson.compute" title="Permalink to this definition">#</a></dt>
<dd><p>Override this method with a function that writes a value into <cite>out</cite>.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.pipeline.factors.RollingSpearman">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.pipeline.factors.</span></span><span class="sig-name descname"><span class="pre">RollingSpearman</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">base_factor</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">correlation_length</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/statistical.html#RollingSpearman"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.factors.RollingSpearman" title="Permalink to this definition">#</a></dt>
<dd><p>A Factor that computes spearman rank correlation coefficients between the
columns of a given Factor and either the columns of another
Factor/BoundColumn or a slice/single column of data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>base_factor</strong> (<a class="reference internal" href="#zipline.pipeline.Factor" title="zipline.pipeline.Factor"><em>zipline.pipeline.Factor</em></a>) – The factor for which to compute correlations of each of its columns
with <cite>target</cite>.</p></li>
<li><p><strong>target</strong> (<em>zipline.pipeline.Term with a numeric dtype</em>) – The term with which to compute correlations against each column of data
produced by <cite>base_factor</cite>. This term may be a Factor, a BoundColumn or
a Slice. If <cite>target</cite> is two-dimensional, correlations are computed
asset-wise.</p></li>
<li><p><strong>correlation_length</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – Length of the lookback window over which to compute each correlation
coefficient.</p></li>
<li><p><strong>mask</strong> (<a class="reference internal" href="#zipline.pipeline.Filter" title="zipline.pipeline.Filter"><em>zipline.pipeline.Filter</em></a><em>, </em><em>optional</em>) – A Filter describing which assets (columns) of <cite>base_factor</cite> should have
their correlation with <cite>target</cite> computed each day.</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.spearmanr.html#scipy.stats.spearmanr" title="(in SciPy v1.11.1)"><code class="xref py py-func docutils literal notranslate"><span class="pre">scipy.stats.spearmanr()</span></code></a>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">Factor.spearmanr()</span></code>, <a class="reference internal" href="#zipline.pipeline.factors.RollingSpearmanOfReturns" title="zipline.pipeline.factors.RollingSpearmanOfReturns"><code class="xref py py-class docutils literal notranslate"><span class="pre">zipline.pipeline.factors.RollingSpearmanOfReturns</span></code></a></p>
</div>
<p class="rubric">Notes</p>
<p>Most users should call Factor.spearmanr rather than directly construct an
instance of this class.</p>
<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.factors.RollingSpearman.compute">
<span class="sig-name descname"><span class="pre">compute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">today</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">assets</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/statistical.html#RollingSpearman.compute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.factors.RollingSpearman.compute" title="Permalink to this definition">#</a></dt>
<dd><p>Override this method with a function that writes a value into <cite>out</cite>.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.pipeline.factors.RollingLinearRegressionOfReturns">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.pipeline.factors.</span></span><span class="sig-name descname"><span class="pre">RollingLinearRegressionOfReturns</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">returns_length</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">regression_length</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/statistical.html#RollingLinearRegressionOfReturns"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.factors.RollingLinearRegressionOfReturns" title="Permalink to this definition">#</a></dt>
<dd><p>Perform an ordinary least-squares regression predicting the returns of all
other assets on the given asset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>target</strong> (<a class="reference internal" href="#zipline.assets.Asset" title="zipline.assets.Asset"><em>zipline.assets.Asset</em></a>) – The asset to regress against all other assets.</p></li>
<li><p><strong>returns_length</strong> (<em>int &gt;= 2</em>) – Length of the lookback window over which to compute returns. Daily
returns require a window length of 2.</p></li>
<li><p><strong>regression_length</strong> (<em>int &gt;= 1</em>) – Length of the lookback window over which to compute each regression.</p></li>
<li><p><strong>mask</strong> (<a class="reference internal" href="#zipline.pipeline.Filter" title="zipline.pipeline.Filter"><em>zipline.pipeline.Filter</em></a><em>, </em><em>optional</em>) – A Filter describing which assets should be regressed against the target
asset each day.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>Computing this factor over many assets can be time consuming. It is
recommended that a mask be used in order to limit the number of assets over
which regressions are computed.</p>
<p>This factor is designed to return five outputs:</p>
<ul class="simple">
<li><p>alpha, a factor that computes the intercepts of each regression.</p></li>
<li><p>beta, a factor that computes the slopes of each regression.</p></li>
<li><p>r_value, a factor that computes the correlation coefficient of each
regression.</p></li>
<li><p>p_value, a factor that computes, for each regression, the two-sided
p-value for a hypothesis test whose null hypothesis is that the slope is
zero.</p></li>
<li><p>stderr, a factor that computes the standard error of the estimate of each
regression.</p></li>
</ul>
<p>For more help on factors with multiple outputs, see
<a class="reference internal" href="#zipline.pipeline.CustomFactor" title="zipline.pipeline.CustomFactor"><code class="xref py py-class docutils literal notranslate"><span class="pre">zipline.pipeline.CustomFactor</span></code></a>.</p>
<p class="rubric">Examples</p>
<p>Let the following be example 10-day returns for three different assets:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>               <span class="n">SPY</span>    <span class="n">MSFT</span>     <span class="n">FB</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">13</span>    <span class="o">-</span><span class="mf">.03</span>     <span class="mf">.03</span>    <span class="mf">.04</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">14</span>    <span class="o">-</span><span class="mf">.02</span>    <span class="o">-</span><span class="mf">.03</span>    <span class="mf">.02</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">15</span>    <span class="o">-</span><span class="mf">.01</span>     <span class="mf">.02</span>    <span class="mf">.01</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">16</span>       <span class="mi">0</span>    <span class="o">-</span><span class="mf">.02</span>    <span class="mf">.01</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">17</span>     <span class="mf">.01</span>     <span class="mf">.04</span>   <span class="o">-</span><span class="mf">.01</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">20</span>     <span class="mf">.02</span>    <span class="o">-</span><span class="mf">.03</span>   <span class="o">-</span><span class="mf">.02</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">21</span>     <span class="mf">.03</span>     <span class="mf">.01</span>   <span class="o">-</span><span class="mf">.02</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">22</span>     <span class="mf">.04</span>    <span class="o">-</span><span class="mf">.02</span>   <span class="o">-</span><span class="mf">.02</span>
</pre></div>
</div>
<p>Suppose we are interested in predicting each stock’s returns from SPY’s
over rolling 5-day look back windows. We can compute rolling regression
coefficients (alpha and beta) from 2017-03-17 to 2017-03-22 by doing:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">regression_factor</span> <span class="o">=</span> <span class="n">RollingRegressionOfReturns</span><span class="p">(</span>
    <span class="n">target</span><span class="o">=</span><span class="n">sid</span><span class="p">(</span><span class="mi">8554</span><span class="p">),</span>
    <span class="n">returns_length</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
    <span class="n">regression_length</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">alpha</span> <span class="o">=</span> <span class="n">regression_factor</span><span class="o">.</span><span class="n">alpha</span>
<span class="n">beta</span> <span class="o">=</span> <span class="n">regression_factor</span><span class="o">.</span><span class="n">beta</span>
</pre></div>
</div>
<p>The result of computing <code class="docutils literal notranslate"><span class="pre">alpha</span></code> from 2017-03-17 to 2017-03-22 gives:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>               <span class="n">SPY</span>    <span class="n">MSFT</span>     <span class="n">FB</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">17</span>       <span class="mi">0</span>    <span class="mf">.011</span>   <span class="mf">.003</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">20</span>       <span class="mi">0</span>   <span class="o">-</span><span class="mf">.004</span>   <span class="mf">.004</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">21</span>       <span class="mi">0</span>    <span class="mf">.007</span>   <span class="mf">.006</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">22</span>       <span class="mi">0</span>    <span class="mf">.002</span>   <span class="mf">.008</span>
</pre></div>
</div>
<p>And the result of computing <code class="docutils literal notranslate"><span class="pre">beta</span></code> from 2017-03-17 to 2017-03-22 gives:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>               <span class="n">SPY</span>    <span class="n">MSFT</span>     <span class="n">FB</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">17</span>       <span class="mi">1</span>      <span class="mf">.3</span>   <span class="o">-</span><span class="mf">1.1</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">20</span>       <span class="mi">1</span>      <span class="mf">.2</span>     <span class="o">-</span><span class="mi">1</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">21</span>       <span class="mi">1</span>     <span class="o">-</span><span class="mf">.3</span>     <span class="o">-</span><span class="mi">1</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">22</span>       <span class="mi">1</span>     <span class="o">-</span><span class="mf">.3</span>    <span class="o">-</span><span class="mf">.9</span>
</pre></div>
</div>
<p>Note that SPY’s column for alpha is all 0’s and for beta is all 1’s, as the
regression line of SPY with itself is simply the function y = x.</p>
<p>To understand how each of the other values were calculated, take for
example MSFT’s <code class="docutils literal notranslate"><span class="pre">alpha</span></code> and <code class="docutils literal notranslate"><span class="pre">beta</span></code> values on 2017-03-17 (.011 and .3,
respectively). These values are the result of running a linear regression
predicting MSFT’s returns from SPY’s returns, using values starting at
2017-03-17 and looking back 5 days. That is, the regression was run with
x = [-.03, -.02, -.01, 0, .01] and y = [.03, -.03, .02, -.02, .04], and it
produced a slope of .3 and an intercept of .011.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#zipline.pipeline.factors.RollingPearsonOfReturns" title="zipline.pipeline.factors.RollingPearsonOfReturns"><code class="xref py py-class docutils literal notranslate"><span class="pre">zipline.pipeline.factors.RollingPearsonOfReturns</span></code></a>, <a class="reference internal" href="#zipline.pipeline.factors.RollingSpearmanOfReturns" title="zipline.pipeline.factors.RollingSpearmanOfReturns"><code class="xref py py-class docutils literal notranslate"><span class="pre">zipline.pipeline.factors.RollingSpearmanOfReturns</span></code></a></p>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.pipeline.factors.RollingPearsonOfReturns">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.pipeline.factors.</span></span><span class="sig-name descname"><span class="pre">RollingPearsonOfReturns</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">returns_length</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">correlation_length</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/statistical.html#RollingPearsonOfReturns"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.factors.RollingPearsonOfReturns" title="Permalink to this definition">#</a></dt>
<dd><p>Calculates the Pearson product-moment correlation coefficient of the
returns of the given asset with the returns of all other assets.</p>
<p>Pearson correlation is what most people mean when they say “correlation
coefficient” or “R-value”.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>target</strong> (<a class="reference internal" href="#zipline.assets.Asset" title="zipline.assets.Asset"><em>zipline.assets.Asset</em></a>) – The asset to correlate with all other assets.</p></li>
<li><p><strong>returns_length</strong> (<em>int &gt;= 2</em>) – Length of the lookback window over which to compute returns. Daily
returns require a window length of 2.</p></li>
<li><p><strong>correlation_length</strong> (<em>int &gt;= 1</em>) – Length of the lookback window over which to compute each correlation
coefficient.</p></li>
<li><p><strong>mask</strong> (<a class="reference internal" href="#zipline.pipeline.Filter" title="zipline.pipeline.Filter"><em>zipline.pipeline.Filter</em></a><em>, </em><em>optional</em>) – A Filter describing which assets should have their correlation with the
target asset computed each day.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>Computing this factor over many assets can be time consuming. It is
recommended that a mask be used in order to limit the number of assets over
which correlations are computed.</p>
<p class="rubric">Examples</p>
<p>Let the following be example 10-day returns for three different assets:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>               <span class="n">SPY</span>    <span class="n">MSFT</span>     <span class="n">FB</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">13</span>    <span class="o">-</span><span class="mf">.03</span>     <span class="mf">.03</span>    <span class="mf">.04</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">14</span>    <span class="o">-</span><span class="mf">.02</span>    <span class="o">-</span><span class="mf">.03</span>    <span class="mf">.02</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">15</span>    <span class="o">-</span><span class="mf">.01</span>     <span class="mf">.02</span>    <span class="mf">.01</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">16</span>       <span class="mi">0</span>    <span class="o">-</span><span class="mf">.02</span>    <span class="mf">.01</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">17</span>     <span class="mf">.01</span>     <span class="mf">.04</span>   <span class="o">-</span><span class="mf">.01</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">20</span>     <span class="mf">.02</span>    <span class="o">-</span><span class="mf">.03</span>   <span class="o">-</span><span class="mf">.02</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">21</span>     <span class="mf">.03</span>     <span class="mf">.01</span>   <span class="o">-</span><span class="mf">.02</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">22</span>     <span class="mf">.04</span>    <span class="o">-</span><span class="mf">.02</span>   <span class="o">-</span><span class="mf">.02</span>
</pre></div>
</div>
<p>Suppose we are interested in SPY’s rolling returns correlation with each
stock from 2017-03-17 to 2017-03-22, using a 5-day look back window (that
is, we calculate each correlation coefficient over 5 days of data). We can
achieve this by doing:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">rolling_correlations</span> <span class="o">=</span> <span class="n">RollingPearsonOfReturns</span><span class="p">(</span>
    <span class="n">target</span><span class="o">=</span><span class="n">sid</span><span class="p">(</span><span class="mi">8554</span><span class="p">),</span>
    <span class="n">returns_length</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
    <span class="n">correlation_length</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>The result of computing <code class="docutils literal notranslate"><span class="pre">rolling_correlations</span></code> from 2017-03-17 to
2017-03-22 gives:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>               <span class="n">SPY</span>   <span class="n">MSFT</span>     <span class="n">FB</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">17</span>       <span class="mi">1</span>    <span class="mf">.15</span>   <span class="o">-</span><span class="mf">.96</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">20</span>       <span class="mi">1</span>    <span class="mf">.10</span>   <span class="o">-</span><span class="mf">.96</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">21</span>       <span class="mi">1</span>   <span class="o">-</span><span class="mf">.16</span>   <span class="o">-</span><span class="mf">.94</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">22</span>       <span class="mi">1</span>   <span class="o">-</span><span class="mf">.16</span>   <span class="o">-</span><span class="mf">.85</span>
</pre></div>
</div>
<p>Note that the column for SPY is all 1’s, as the correlation of any data
series with itself is always 1. To understand how each of the other values
were calculated, take for example the .15 in MSFT’s column. This is the
correlation coefficient between SPY’s returns looking back from 2017-03-17
(-.03, -.02, -.01, 0, .01) and MSFT’s returns (.03, -.03, .02, -.02, .04).</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#zipline.pipeline.factors.RollingSpearmanOfReturns" title="zipline.pipeline.factors.RollingSpearmanOfReturns"><code class="xref py py-class docutils literal notranslate"><span class="pre">zipline.pipeline.factors.RollingSpearmanOfReturns</span></code></a>, <a class="reference internal" href="#zipline.pipeline.factors.RollingLinearRegressionOfReturns" title="zipline.pipeline.factors.RollingLinearRegressionOfReturns"><code class="xref py py-class docutils literal notranslate"><span class="pre">zipline.pipeline.factors.RollingLinearRegressionOfReturns</span></code></a></p>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.pipeline.factors.RollingSpearmanOfReturns">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.pipeline.factors.</span></span><span class="sig-name descname"><span class="pre">RollingSpearmanOfReturns</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">returns_length</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">correlation_length</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/statistical.html#RollingSpearmanOfReturns"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.factors.RollingSpearmanOfReturns" title="Permalink to this definition">#</a></dt>
<dd><p>Calculates the Spearman rank correlation coefficient of the returns of the
given asset with the returns of all other assets.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>target</strong> (<a class="reference internal" href="#zipline.assets.Asset" title="zipline.assets.Asset"><em>zipline.assets.Asset</em></a>) – The asset to correlate with all other assets.</p></li>
<li><p><strong>returns_length</strong> (<em>int &gt;= 2</em>) – Length of the lookback window over which to compute returns. Daily
returns require a window length of 2.</p></li>
<li><p><strong>correlation_length</strong> (<em>int &gt;= 1</em>) – Length of the lookback window over which to compute each correlation
coefficient.</p></li>
<li><p><strong>mask</strong> (<a class="reference internal" href="#zipline.pipeline.Filter" title="zipline.pipeline.Filter"><em>zipline.pipeline.Filter</em></a><em>, </em><em>optional</em>) – A Filter describing which assets should have their correlation with the
target asset computed each day.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>Computing this factor over many assets can be time consuming. It is
recommended that a mask be used in order to limit the number of assets over
which correlations are computed.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#zipline.pipeline.factors.RollingPearsonOfReturns" title="zipline.pipeline.factors.RollingPearsonOfReturns"><code class="xref py py-class docutils literal notranslate"><span class="pre">zipline.pipeline.factors.RollingPearsonOfReturns</span></code></a>, <a class="reference internal" href="#zipline.pipeline.factors.RollingLinearRegressionOfReturns" title="zipline.pipeline.factors.RollingLinearRegressionOfReturns"><code class="xref py py-class docutils literal notranslate"><span class="pre">zipline.pipeline.factors.RollingLinearRegressionOfReturns</span></code></a></p>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.pipeline.factors.SimpleBeta">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.pipeline.factors.</span></span><span class="sig-name descname"><span class="pre">SimpleBeta</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">regression_length</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allowed_missing_percentage</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.25</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/statistical.html#SimpleBeta"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.factors.SimpleBeta" title="Permalink to this definition">#</a></dt>
<dd><p>Factor producing the slope of a regression line between each asset’s daily
returns to the daily returns of a single “target” asset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>target</strong> (<em>zipline.Asset</em>) – Asset against which other assets should be regressed.</p></li>
<li><p><strong>regression_length</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – Number of days of daily returns to use for the regression.</p></li>
<li><p><strong>allowed_missing_percentage</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>, </em><em>optional</em>) – Percentage of returns observations (between 0 and 1) that are allowed
to be missing when calculating betas. Assets with more than this
percentage of returns observations missing will produce values of
NaN. Default behavior is that 25% of inputs can be missing.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.factors.SimpleBeta.compute">
<span class="sig-name descname"><span class="pre">compute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">today</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">assets</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">all_returns</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_returns</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allowed_missing_count</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/statistical.html#SimpleBeta.compute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.factors.SimpleBeta.compute" title="Permalink to this definition">#</a></dt>
<dd><p>Override this method with a function that writes a value into <cite>out</cite>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="zipline.pipeline.factors.SimpleBeta.dtype">
<span class="sig-name descname"><span class="pre">dtype</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">dtype('float64')</span></em><a class="headerlink" href="#zipline.pipeline.factors.SimpleBeta.dtype" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.factors.SimpleBeta.graph_repr">
<span class="sig-name descname"><span class="pre">graph_repr</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/statistical.html#SimpleBeta.graph_repr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.factors.SimpleBeta.graph_repr" title="Permalink to this definition">#</a></dt>
<dd><p>Short repr to use when rendering Pipeline graphs.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="zipline.pipeline.factors.SimpleBeta.target">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">target</span></span><a class="headerlink" href="#zipline.pipeline.factors.SimpleBeta.target" title="Permalink to this definition">#</a></dt>
<dd><p>Get the target of the beta calculation.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.pipeline.factors.RSI">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.pipeline.factors.</span></span><span class="sig-name descname"><span class="pre">RSI</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">missing_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ndim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/technical.html#RSI"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.factors.RSI" title="Permalink to this definition">#</a></dt>
<dd><p>Relative Strength Index</p>
<p><strong>Default Inputs</strong>: <a class="reference internal" href="#zipline.pipeline.data.EquityPricing.close" title="zipline.pipeline.data.EquityPricing.close"><code class="xref py py-data docutils literal notranslate"><span class="pre">zipline.pipeline.data.EquityPricing.close</span></code></a></p>
<p><strong>Default Window Length</strong>: 15</p>
<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.factors.RSI.compute">
<span class="sig-name descname"><span class="pre">compute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">today</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">assets</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">closes</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/technical.html#RSI.compute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.factors.RSI.compute" title="Permalink to this definition">#</a></dt>
<dd><p>Override this method with a function that writes a value into <cite>out</cite>.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.pipeline.factors.SimpleMovingAverage">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.pipeline.factors.</span></span><span class="sig-name descname"><span class="pre">SimpleMovingAverage</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">missing_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ndim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/basic.html#SimpleMovingAverage"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.factors.SimpleMovingAverage" title="Permalink to this definition">#</a></dt>
<dd><p>Average Value of an arbitrary column</p>
<p><strong>Default Inputs</strong>: None</p>
<p><strong>Default Window Length</strong>: None</p>
<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.factors.SimpleMovingAverage.compute">
<span class="sig-name descname"><span class="pre">compute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">today</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">assets</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/basic.html#SimpleMovingAverage.compute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.factors.SimpleMovingAverage.compute" title="Permalink to this definition">#</a></dt>
<dd><p>Override this method with a function that writes a value into <cite>out</cite>.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.pipeline.factors.VWAP">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.pipeline.factors.</span></span><span class="sig-name descname"><span class="pre">VWAP</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">missing_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ndim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/basic.html#VWAP"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.factors.VWAP" title="Permalink to this definition">#</a></dt>
<dd><p>Volume Weighted Average Price</p>
<p><strong>Default Inputs:</strong> [EquityPricing.close, EquityPricing.volume]</p>
<p><strong>Default Window Length:</strong> None</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.pipeline.factors.WeightedAverageValue">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.pipeline.factors.</span></span><span class="sig-name descname"><span class="pre">WeightedAverageValue</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">missing_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ndim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/basic.html#WeightedAverageValue"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.factors.WeightedAverageValue" title="Permalink to this definition">#</a></dt>
<dd><p>Helper for VWAP-like computations.</p>
<p><strong>Default Inputs:</strong> None</p>
<p><strong>Default Window Length:</strong> None</p>
<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.factors.WeightedAverageValue.compute">
<span class="sig-name descname"><span class="pre">compute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">today</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">assets</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weight</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/basic.html#WeightedAverageValue.compute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.factors.WeightedAverageValue.compute" title="Permalink to this definition">#</a></dt>
<dd><p>Override this method with a function that writes a value into <cite>out</cite>.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.pipeline.factors.PercentChange">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.pipeline.factors.</span></span><span class="sig-name descname"><span class="pre">PercentChange</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">missing_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ndim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/basic.html#PercentChange"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.factors.PercentChange" title="Permalink to this definition">#</a></dt>
<dd><p>Calculates the percent change over the given window_length.</p>
<p><strong>Default Inputs:</strong> None</p>
<p><strong>Default Window Length:</strong> None</p>
<p class="rubric">Notes</p>
<p>Percent change is calculated as <code class="docutils literal notranslate"><span class="pre">(new</span> <span class="pre">-</span> <span class="pre">old)</span> <span class="pre">/</span> <span class="pre">abs(old)</span></code>.</p>
<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.factors.PercentChange.compute">
<span class="sig-name descname"><span class="pre">compute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">today</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">assets</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">values</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/basic.html#PercentChange.compute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.factors.PercentChange.compute" title="Permalink to this definition">#</a></dt>
<dd><p>Override this method with a function that writes a value into <cite>out</cite>.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.pipeline.factors.PeerCount">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.pipeline.factors.</span></span><span class="sig-name descname"><span class="pre">PeerCount</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">missing_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ndim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/basic.html#PeerCount"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.factors.PeerCount" title="Permalink to this definition">#</a></dt>
<dd><p>Peer Count of distinct categories in a given classifier.  This factor
is returned by the classifier instance method peer_count()</p>
<p><strong>Default Inputs:</strong> None</p>
<p><strong>Default Window Length:</strong> 1</p>
<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.factors.PeerCount.compute">
<span class="sig-name descname"><span class="pre">compute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">today</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">assets</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">classifier_values</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/basic.html#PeerCount.compute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.factors.PeerCount.compute" title="Permalink to this definition">#</a></dt>
<dd><p>Override this method with a function that writes a value into <cite>out</cite>.</p>
</dd></dl>

</dd></dl>

</section>
<section id="built-in-filters">
<h3>Built-in Filters<a class="headerlink" href="#built-in-filters" title="Permalink to this heading">#</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="zipline.pipeline.filters.All">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.pipeline.filters.</span></span><span class="sig-name descname"><span class="pre">All</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">missing_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ndim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/filters/smoothing.html#All"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.filters.All" title="Permalink to this definition">#</a></dt>
<dd><p>A Filter requiring that assets produce True for <code class="docutils literal notranslate"><span class="pre">window_length</span></code>
consecutive days.</p>
<p><strong>Default Inputs:</strong> None</p>
<p><strong>Default Window Length:</strong> None</p>
<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.filters.All.compute">
<span class="sig-name descname"><span class="pre">compute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">today</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">assets</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">arg</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/filters/smoothing.html#All.compute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.filters.All.compute" title="Permalink to this definition">#</a></dt>
<dd><p>Override this method with a function that writes a value into <cite>out</cite>.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.pipeline.filters.AllPresent">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.pipeline.filters.</span></span><span class="sig-name descname"><span class="pre">AllPresent</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">missing_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ndim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/filters/filter.html#AllPresent"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.filters.AllPresent" title="Permalink to this definition">#</a></dt>
<dd><p>Pipeline filter indicating input term has data for a given window.</p>
<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.filters.AllPresent.compute">
<span class="sig-name descname"><span class="pre">compute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">today</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">assets</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/filters/filter.html#AllPresent.compute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.filters.AllPresent.compute" title="Permalink to this definition">#</a></dt>
<dd><p>Override this method with a function that writes a value into <cite>out</cite>.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.pipeline.filters.Any">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.pipeline.filters.</span></span><span class="sig-name descname"><span class="pre">Any</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">missing_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ndim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/filters/smoothing.html#Any"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.filters.Any" title="Permalink to this definition">#</a></dt>
<dd><p>A Filter requiring that assets produce True for at least one day in the
last <code class="docutils literal notranslate"><span class="pre">window_length</span></code> days.</p>
<p><strong>Default Inputs:</strong> None</p>
<p><strong>Default Window Length:</strong> None</p>
<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.filters.Any.compute">
<span class="sig-name descname"><span class="pre">compute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">today</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">assets</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">arg</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/filters/smoothing.html#Any.compute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.filters.Any.compute" title="Permalink to this definition">#</a></dt>
<dd><p>Override this method with a function that writes a value into <cite>out</cite>.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.pipeline.filters.AtLeastN">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.pipeline.filters.</span></span><span class="sig-name descname"><span class="pre">AtLeastN</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">missing_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ndim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('NotSpecified')</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/filters/smoothing.html#AtLeastN"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.filters.AtLeastN" title="Permalink to this definition">#</a></dt>
<dd><p>A Filter requiring that assets produce True for at least N days in the
last <code class="docutils literal notranslate"><span class="pre">window_length</span></code> days.</p>
<p><strong>Default Inputs:</strong> None</p>
<p><strong>Default Window Length:</strong> None</p>
<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.filters.AtLeastN.compute">
<span class="sig-name descname"><span class="pre">compute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">today</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">assets</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">arg</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">N</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/filters/smoothing.html#AtLeastN.compute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.filters.AtLeastN.compute" title="Permalink to this definition">#</a></dt>
<dd><p>Override this method with a function that writes a value into <cite>out</cite>.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.pipeline.filters.SingleAsset">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.pipeline.filters.</span></span><span class="sig-name descname"><span class="pre">SingleAsset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">asset</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/filters/filter.html#SingleAsset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.filters.SingleAsset" title="Permalink to this definition">#</a></dt>
<dd><p>A Filter that computes to True only for the given asset.</p>
<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.filters.SingleAsset.graph_repr">
<span class="sig-name descname"><span class="pre">graph_repr</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/filters/filter.html#SingleAsset.graph_repr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.filters.SingleAsset.graph_repr" title="Permalink to this definition">#</a></dt>
<dd><p>A short repr to use when rendering GraphViz graphs.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.pipeline.filters.StaticAssets">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.pipeline.filters.</span></span><span class="sig-name descname"><span class="pre">StaticAssets</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">assets</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/filters/filter.html#StaticAssets"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.filters.StaticAssets" title="Permalink to this definition">#</a></dt>
<dd><p>A Filter that computes True for a specific set of predetermined assets.</p>
<p><code class="docutils literal notranslate"><span class="pre">StaticAssets</span></code> is mostly useful for debugging or for interactively
computing pipeline terms for a fixed set of assets that are known ahead of
time.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>assets</strong> (<em>iterable</em><em>[</em><a class="reference internal" href="#zipline.assets.Asset" title="zipline.assets.Asset"><em>Asset</em></a><em>]</em>) – An iterable of assets for which to filter.</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.pipeline.filters.StaticSids">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.pipeline.filters.</span></span><span class="sig-name descname"><span class="pre">StaticSids</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sids</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/filters/filter.html#StaticSids"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.filters.StaticSids" title="Permalink to this definition">#</a></dt>
<dd><p>A Filter that computes True for a specific set of predetermined sids.</p>
<p><code class="docutils literal notranslate"><span class="pre">StaticSids</span></code> is mostly useful for debugging or for interactively
computing pipeline terms for a fixed set of sids that are known ahead of
time.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>sids</strong> (<em>iterable</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>]</em>) – An iterable of sids for which to filter.</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="pipeline-engine">
<h3>Pipeline Engine<a class="headerlink" href="#pipeline-engine" title="Permalink to this heading">#</a></h3>
<p>Computation engines for executing a <a class="reference internal" href="#zipline.pipeline.Pipeline" title="zipline.pipeline.Pipeline"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pipeline</span></code></a> define the core computation algorithms.</p>
<p>The primary entrypoint is SimplePipelineEngine.run_pipeline, which
implements the following algorithm for executing pipelines:</p>
<ol class="arabic simple">
<li><p>Determine the domain of the pipeline.</p></li>
<li><p>Build a dependency graph of all terms in <cite>pipeline</cite>, with
information about how many extra rows each term needs from its
inputs.</p></li>
<li><p>Combine the domain computed in (2) with our AssetFinder to produce
a “lifetimes matrix”. The lifetimes matrix is a DataFrame of
booleans whose labels are dates x assets. Each entry corresponds
to a (date, asset) pair and indicates whether the asset in
question was tradable on the date in question.</p></li>
<li><p>Produce a “workspace” dictionary with cached or otherwise pre-computed
terms.</p></li>
<li><p>Topologically sort the graph constructed in (1) to produce an
execution order for any terms that were not pre-populated.</p></li>
<li><p>Iterate over the terms in the order computed in (5). For each term:</p>
<ol class="loweralpha simple">
<li><p>Fetch the term’s inputs from the workspace.</p></li>
<li><p>Compute each term and store the results in the workspace.</p></li>
<li><p>Remove the results from the workspace if their are no longer needed to reduce memory use during execution.</p></li>
</ol>
</li>
<li><p>Extract the pipeline’s outputs from the workspace and convert them
into “narrow” format, with output labels dictated by the Pipeline’s
screen.</p></li>
</ol>
<dl class="py class">
<dt class="sig sig-object py" id="zipline.pipeline.engine.PipelineEngine">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.pipeline.engine.</span></span><span class="sig-name descname"><span class="pre">PipelineEngine</span></span><a class="reference internal" href="_modules/zipline/pipeline/engine.html#PipelineEngine"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.engine.PipelineEngine" title="Permalink to this definition">#</a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.engine.PipelineEngine.run_pipeline">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">run_pipeline</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pipeline</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_date</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_date</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hooks</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/engine.html#PipelineEngine.run_pipeline"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.engine.PipelineEngine.run_pipeline" title="Permalink to this definition">#</a></dt>
<dd><p>Compute values for <code class="docutils literal notranslate"><span class="pre">pipeline</span></code> from <code class="docutils literal notranslate"><span class="pre">start_date</span></code> to <code class="docutils literal notranslate"><span class="pre">end_date</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pipeline</strong> (<a class="reference internal" href="#zipline.pipeline.Pipeline" title="zipline.pipeline.Pipeline"><em>zipline.pipeline.Pipeline</em></a>) – The pipeline to run.</p></li>
<li><p><strong>start_date</strong> (<em>pd.Timestamp</em>) – Start date of the computed matrix.</p></li>
<li><p><strong>end_date</strong> (<em>pd.Timestamp</em>) – End date of the computed matrix.</p></li>
<li><p><strong>hooks</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.11)"><em>list</em></a><em>[</em><em>implements</em><em>(</em><em>PipelineHooks</em><em>)</em><em>]</em><em>, </em><em>optional</em>) – Hooks for instrumenting Pipeline execution.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><p><strong>result</strong> – A frame of computed results.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">result</span></code> columns correspond to the entries of
<cite>pipeline.columns</cite>, which should be a dictionary mapping strings to
instances of <a class="reference internal" href="#zipline.pipeline.Term" title="zipline.pipeline.Term"><code class="xref py py-class docutils literal notranslate"><span class="pre">zipline.pipeline.Term</span></code></a>.</p>
<p>For each date between <code class="docutils literal notranslate"><span class="pre">start_date</span></code> and <code class="docutils literal notranslate"><span class="pre">end_date</span></code>, <code class="docutils literal notranslate"><span class="pre">result</span></code>
will contain a row for each asset that passed <cite>pipeline.screen</cite>.
A screen of <code class="docutils literal notranslate"><span class="pre">None</span></code> indicates that a row should be returned for
each asset that existed each day.</p>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pd.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.engine.PipelineEngine.run_chunked_pipeline">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">run_chunked_pipeline</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pipeline</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_date</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_date</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chunksize</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hooks</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/engine.html#PipelineEngine.run_chunked_pipeline"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.engine.PipelineEngine.run_chunked_pipeline" title="Permalink to this definition">#</a></dt>
<dd><p>Compute values for <code class="docutils literal notranslate"><span class="pre">pipeline</span></code> from <code class="docutils literal notranslate"><span class="pre">start_date</span></code> to <code class="docutils literal notranslate"><span class="pre">end_date</span></code>, in
date chunks of size <code class="docutils literal notranslate"><span class="pre">chunksize</span></code>.</p>
<p>Chunked execution reduces memory consumption, and may reduce
computation time depending on the contents of your pipeline.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pipeline</strong> (<a class="reference internal" href="#zipline.pipeline.Pipeline" title="zipline.pipeline.Pipeline"><em>Pipeline</em></a>) – The pipeline to run.</p></li>
<li><p><strong>start_date</strong> (<em>pd.Timestamp</em>) – The start date to run the pipeline for.</p></li>
<li><p><strong>end_date</strong> (<em>pd.Timestamp</em>) – The end date to run the pipeline for.</p></li>
<li><p><strong>chunksize</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – The number of days to execute at a time.</p></li>
<li><p><strong>hooks</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.11)"><em>list</em></a><em>[</em><em>implements</em><em>(</em><em>PipelineHooks</em><em>)</em><em>]</em><em>, </em><em>optional</em>) – Hooks for instrumenting Pipeline execution.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><p><strong>result</strong> – A frame of computed results.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">result</span></code> columns correspond to the entries of
<cite>pipeline.columns</cite>, which should be a dictionary mapping strings to
instances of <a class="reference internal" href="#zipline.pipeline.Term" title="zipline.pipeline.Term"><code class="xref py py-class docutils literal notranslate"><span class="pre">zipline.pipeline.Term</span></code></a>.</p>
<p>For each date between <code class="docutils literal notranslate"><span class="pre">start_date</span></code> and <code class="docutils literal notranslate"><span class="pre">end_date</span></code>, <code class="docutils literal notranslate"><span class="pre">result</span></code>
will contain a row for each asset that passed <cite>pipeline.screen</cite>.
A screen of <code class="docutils literal notranslate"><span class="pre">None</span></code> indicates that a row should be returned for
each asset that existed each day.</p>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pd.DataFrame</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#zipline.pipeline.engine.PipelineEngine.run_pipeline" title="zipline.pipeline.engine.PipelineEngine.run_pipeline"><code class="xref py py-meth docutils literal notranslate"><span class="pre">zipline.pipeline.engine.PipelineEngine.run_pipeline()</span></code></a></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.pipeline.engine.SimplePipelineEngine">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.pipeline.engine.</span></span><span class="sig-name descname"><span class="pre">SimplePipelineEngine</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">get_loader</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">asset_finder</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_domain</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">GENERIC</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">populate_initial_workspace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_hooks</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/engine.html#SimplePipelineEngine"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.engine.SimplePipelineEngine" title="Permalink to this definition">#</a></dt>
<dd><p>PipelineEngine class that computes each term independently.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>get_loader</strong> (<em>callable</em>) – A function that is given a loadable term and returns a PipelineLoader
to use to retrieve raw data for that term.</p></li>
<li><p><strong>asset_finder</strong> (<a class="reference internal" href="#zipline.assets.AssetFinder" title="zipline.assets.AssetFinder"><em>zipline.assets.AssetFinder</em></a>) – An AssetFinder instance.  We depend on the AssetFinder to determine
which assets are in the top-level universe at any point in time.</p></li>
<li><p><strong>populate_initial_workspace</strong> (<em>callable</em><em>, </em><em>optional</em>) – A function which will be used to populate the initial workspace when
computing a pipeline. See
<a class="reference internal" href="#zipline.pipeline.engine.default_populate_initial_workspace" title="zipline.pipeline.engine.default_populate_initial_workspace"><code class="xref py py-func docutils literal notranslate"><span class="pre">zipline.pipeline.engine.default_populate_initial_workspace()</span></code></a>
for more info.</p></li>
<li><p><strong>default_hooks</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.11)"><em>list</em></a><em>, </em><em>optional</em>) – List of hooks that should be used to instrument all pipelines executed
by this engine.</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#zipline.pipeline.engine.default_populate_initial_workspace" title="zipline.pipeline.engine.default_populate_initial_workspace"><code class="xref py py-func docutils literal notranslate"><span class="pre">zipline.pipeline.engine.default_populate_initial_workspace()</span></code></a></p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.engine.SimplePipelineEngine.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">get_loader</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">asset_finder</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_domain</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">GENERIC</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">populate_initial_workspace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_hooks</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/engine.html#SimplePipelineEngine.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.engine.SimplePipelineEngine.__init__" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.engine.SimplePipelineEngine.run_chunked_pipeline">
<span class="sig-name descname"><span class="pre">run_chunked_pipeline</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pipeline</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_date</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_date</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chunksize</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hooks</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/engine.html#SimplePipelineEngine.run_chunked_pipeline"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.engine.SimplePipelineEngine.run_chunked_pipeline" title="Permalink to this definition">#</a></dt>
<dd><p>Compute values for <code class="docutils literal notranslate"><span class="pre">pipeline</span></code> from <code class="docutils literal notranslate"><span class="pre">start_date</span></code> to <code class="docutils literal notranslate"><span class="pre">end_date</span></code>, in
date chunks of size <code class="docutils literal notranslate"><span class="pre">chunksize</span></code>.</p>
<p>Chunked execution reduces memory consumption, and may reduce
computation time depending on the contents of your pipeline.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pipeline</strong> (<a class="reference internal" href="#zipline.pipeline.Pipeline" title="zipline.pipeline.Pipeline"><em>Pipeline</em></a>) – The pipeline to run.</p></li>
<li><p><strong>start_date</strong> (<em>pd.Timestamp</em>) – The start date to run the pipeline for.</p></li>
<li><p><strong>end_date</strong> (<em>pd.Timestamp</em>) – The end date to run the pipeline for.</p></li>
<li><p><strong>chunksize</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – The number of days to execute at a time.</p></li>
<li><p><strong>hooks</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.11)"><em>list</em></a><em>[</em><em>implements</em><em>(</em><em>PipelineHooks</em><em>)</em><em>]</em><em>, </em><em>optional</em>) – Hooks for instrumenting Pipeline execution.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><p><strong>result</strong> – A frame of computed results.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">result</span></code> columns correspond to the entries of
<cite>pipeline.columns</cite>, which should be a dictionary mapping strings to
instances of <a class="reference internal" href="#zipline.pipeline.Term" title="zipline.pipeline.Term"><code class="xref py py-class docutils literal notranslate"><span class="pre">zipline.pipeline.Term</span></code></a>.</p>
<p>For each date between <code class="docutils literal notranslate"><span class="pre">start_date</span></code> and <code class="docutils literal notranslate"><span class="pre">end_date</span></code>, <code class="docutils literal notranslate"><span class="pre">result</span></code>
will contain a row for each asset that passed <cite>pipeline.screen</cite>.
A screen of <code class="docutils literal notranslate"><span class="pre">None</span></code> indicates that a row should be returned for
each asset that existed each day.</p>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pd.DataFrame</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#zipline.pipeline.engine.PipelineEngine.run_pipeline" title="zipline.pipeline.engine.PipelineEngine.run_pipeline"><code class="xref py py-meth docutils literal notranslate"><span class="pre">zipline.pipeline.engine.PipelineEngine.run_pipeline()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.engine.SimplePipelineEngine.run_pipeline">
<span class="sig-name descname"><span class="pre">run_pipeline</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pipeline</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_date</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_date</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hooks</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/engine.html#SimplePipelineEngine.run_pipeline"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.engine.SimplePipelineEngine.run_pipeline" title="Permalink to this definition">#</a></dt>
<dd><p>Compute values for <code class="docutils literal notranslate"><span class="pre">pipeline</span></code> from <code class="docutils literal notranslate"><span class="pre">start_date</span></code> to <code class="docutils literal notranslate"><span class="pre">end_date</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pipeline</strong> (<a class="reference internal" href="#zipline.pipeline.Pipeline" title="zipline.pipeline.Pipeline"><em>zipline.pipeline.Pipeline</em></a>) – The pipeline to run.</p></li>
<li><p><strong>start_date</strong> (<em>pd.Timestamp</em>) – Start date of the computed matrix.</p></li>
<li><p><strong>end_date</strong> (<em>pd.Timestamp</em>) – End date of the computed matrix.</p></li>
<li><p><strong>hooks</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.11)"><em>list</em></a><em>[</em><em>implements</em><em>(</em><em>PipelineHooks</em><em>)</em><em>]</em><em>, </em><em>optional</em>) – Hooks for instrumenting Pipeline execution.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><p><strong>result</strong> – A frame of computed results.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">result</span></code> columns correspond to the entries of
<cite>pipeline.columns</cite>, which should be a dictionary mapping strings to
instances of <a class="reference internal" href="#zipline.pipeline.Term" title="zipline.pipeline.Term"><code class="xref py py-class docutils literal notranslate"><span class="pre">zipline.pipeline.Term</span></code></a>.</p>
<p>For each date between <code class="docutils literal notranslate"><span class="pre">start_date</span></code> and <code class="docutils literal notranslate"><span class="pre">end_date</span></code>, <code class="docutils literal notranslate"><span class="pre">result</span></code>
will contain a row for each asset that passed <cite>pipeline.screen</cite>.
A screen of <code class="docutils literal notranslate"><span class="pre">None</span></code> indicates that a row should be returned for
each asset that existed each day.</p>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pd.DataFrame</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="zipline.pipeline.engine.default_populate_initial_workspace">
<span class="sig-prename descclassname"><span class="pre">zipline.pipeline.engine.</span></span><span class="sig-name descname"><span class="pre">default_populate_initial_workspace</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">initial_workspace</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">root_mask_term</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">execution_plan</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dates</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">assets</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/engine.html#default_populate_initial_workspace"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.engine.default_populate_initial_workspace" title="Permalink to this definition">#</a></dt>
<dd><p>The default implementation for <code class="docutils literal notranslate"><span class="pre">populate_initial_workspace</span></code>. This
function returns the <code class="docutils literal notranslate"><span class="pre">initial_workspace</span></code> argument without making any
modifications.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>initial_workspace</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)"><em>dict</em></a><em>[</em><em>array-like</em><em>]</em>) – The initial workspace before we have populated it with any cached
terms.</p></li>
<li><p><strong>root_mask_term</strong> (<a class="reference internal" href="#zipline.pipeline.Term" title="zipline.pipeline.Term"><em>Term</em></a>) – The root mask term, normally <code class="docutils literal notranslate"><span class="pre">AssetExists()</span></code>. This is needed to
compute the dates for individual terms.</p></li>
<li><p><strong>execution_plan</strong> (<em>ExecutionPlan</em>) – The execution plan for the pipeline being run.</p></li>
<li><p><strong>dates</strong> (<em>pd.DatetimeIndex</em>) – All of the dates being requested in this pipeline run including
the extra dates for look back windows.</p></li>
<li><p><strong>assets</strong> (<em>pd.Int64Index</em>) – All of the assets that exist for the window being computed.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>populated_initial_workspace</strong> – The workspace to begin computations with.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)">dict</a>[term, array-like]</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="data-loaders">
<h3>Data Loaders<a class="headerlink" href="#data-loaders" title="Permalink to this heading">#</a></h3>
<p>There are several loaders to feed data to a <a class="reference internal" href="#zipline.pipeline.Pipeline" title="zipline.pipeline.Pipeline"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pipeline</span></code></a> that need to implement the interface
defined by the <a class="reference internal" href="#zipline.pipeline.loaders.base.PipelineLoader" title="zipline.pipeline.loaders.base.PipelineLoader"><code class="xref py py-class docutils literal notranslate"><span class="pre">PipelineLoader</span></code></a>.</p>
<dl class="py class">
<dt class="sig sig-object py" id="zipline.pipeline.loaders.base.PipelineLoader">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.pipeline.loaders.base.</span></span><span class="sig-name descname"><span class="pre">PipelineLoader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/loaders/base.html#PipelineLoader"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.loaders.base.PipelineLoader" title="Permalink to this definition">#</a></dt>
<dd><p>Interface for PipelineLoaders.</p>
<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.loaders.base.PipelineLoader.load_adjusted_array">
<span class="sig-name descname"><span class="pre">load_adjusted_array</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">domain</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dates</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sids</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/loaders/base.html#PipelineLoader.load_adjusted_array"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.loaders.base.PipelineLoader.load_adjusted_array" title="Permalink to this definition">#</a></dt>
<dd><p>Load data for <code class="docutils literal notranslate"><span class="pre">columns</span></code> as AdjustedArrays.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>domain</strong> (<em>zipline.pipeline.domain.Domain</em>) – The domain of the pipeline for which the requested data must be
loaded.</p></li>
<li><p><strong>columns</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.11)"><em>list</em></a><em>[</em><a class="reference internal" href="#zipline.pipeline.data.BoundColumn" title="zipline.pipeline.data.dataset.BoundColumn"><em>zipline.pipeline.data.dataset.BoundColumn</em></a><em>]</em>) – Columns for which data is being requested.</p></li>
<li><p><strong>dates</strong> (<em>pd.DatetimeIndex</em>) – Dates for which data is being requested.</p></li>
<li><p><strong>sids</strong> (<em>pd.Int64Index</em>) – Asset identifiers for which data is being requested.</p></li>
<li><p><strong>mask</strong> (<em>np.array</em><em>[</em><em>ndim=2</em><em>, </em><em>dtype=bool</em><em>]</em>) – Boolean array of shape (len(dates), len(sids)) indicating dates on
which we believe the requested assets were alive/tradeable. This is
used for optimization by some loaders.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>arrays</strong> – Map from column to an AdjustedArray representing a point-in-time
rolling view over the requested dates for the requested sids.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)">dict</a>[BoundColumn -&gt; zipline.lib.adjusted_array.AdjustedArray]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.loaders.base.PipelineLoader.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zipline.pipeline.loaders.base.PipelineLoader.__init__" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.pipeline.loaders.frame.DataFrameLoader">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.pipeline.loaders.frame.</span></span><span class="sig-name descname"><span class="pre">DataFrameLoader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">column</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">baseline</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">adjustments</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/loaders/frame.html#DataFrameLoader"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.loaders.frame.DataFrameLoader" title="Permalink to this definition">#</a></dt>
<dd><p>A PipelineLoader that reads its input from DataFrames.</p>
<p>Mostly useful for testing, but can also be used for real work if your data
fits in memory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>column</strong> (<a class="reference internal" href="#zipline.pipeline.data.BoundColumn" title="zipline.pipeline.data.BoundColumn"><em>zipline.pipeline.data.BoundColumn</em></a>) – The column whose data is loadable by this loader.</p></li>
<li><p><strong>baseline</strong> (<a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v2.0.3)"><em>pandas.DataFrame</em></a>) – A DataFrame with index of type DatetimeIndex and columns of type
Int64Index.  Dates should be labelled with the first date on which a
value would be <strong>available</strong> to an algorithm.  This means that OHLCV
data should generally be shifted back by a trading day before being
supplied to this class.</p></li>
<li><p><strong>adjustments</strong> (<a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v2.0.3)"><em>pandas.DataFrame</em></a><em>, </em><em>default=None</em>) – <dl class="simple">
<dt>A DataFrame with the following columns:</dt><dd><p>sid : int
value : any
kind : int (zipline.pipeline.loaders.frame.ADJUSTMENT_TYPES)
start_date : datetime64 (can be NaT)
end_date : datetime64 (must be set)
apply_date : datetime64 (must be set)</p>
</dd>
</dl>
<p>The default of None is interpreted as “no adjustments to the baseline”.</p>
</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.loaders.frame.DataFrameLoader.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">column</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">baseline</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">adjustments</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/loaders/frame.html#DataFrameLoader.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.loaders.frame.DataFrameLoader.__init__" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.loaders.frame.DataFrameLoader.format_adjustments">
<span class="sig-name descname"><span class="pre">format_adjustments</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dates</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">assets</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/loaders/frame.html#DataFrameLoader.format_adjustments"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.loaders.frame.DataFrameLoader.format_adjustments" title="Permalink to this definition">#</a></dt>
<dd><p>Build a dict of Adjustment objects in the format expected by
AdjustedArray.</p>
<p>Returns a dict of the form:
{
# Integer index into <cite>dates</cite> for the date on which we should
# apply the list of adjustments.
1 : [
Float64Multiply(first_row=2, last_row=4, col=3, value=0.5),
Float64Overwrite(first_row=3, last_row=5, col=1, value=2.0),
…
],
…
}</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.loaders.frame.DataFrameLoader.load_adjusted_array">
<span class="sig-name descname"><span class="pre">load_adjusted_array</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">domain</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dates</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sids</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/loaders/frame.html#DataFrameLoader.load_adjusted_array"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.loaders.frame.DataFrameLoader.load_adjusted_array" title="Permalink to this definition">#</a></dt>
<dd><p>Load data from our stored baseline.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.pipeline.loaders.equity_pricing_loader.EquityPricingLoader">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.pipeline.loaders.equity_pricing_loader.</span></span><span class="sig-name descname"><span class="pre">EquityPricingLoader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">raw_price_reader</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">adjustments_reader</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fx_reader</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/loaders/equity_pricing_loader.html#EquityPricingLoader"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.loaders.equity_pricing_loader.EquityPricingLoader" title="Permalink to this definition">#</a></dt>
<dd><p>A PipelineLoader for loading daily OHLCV data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>raw_price_reader</strong> (<em>zipline.data.session_bars.SessionBarReader</em>) – Reader providing raw prices.</p></li>
<li><p><strong>adjustments_reader</strong> (<a class="reference internal" href="#zipline.data.adjustments.SQLiteAdjustmentReader" title="zipline.data.adjustments.SQLiteAdjustmentReader"><em>zipline.data.adjustments.SQLiteAdjustmentReader</em></a>) – Reader providing price/volume adjustments.</p></li>
<li><p><strong>fx_reader</strong> (<em>zipline.data.fx.FXRateReader</em>) – Reader providing currency conversions.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.loaders.equity_pricing_loader.EquityPricingLoader.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">raw_price_reader</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">adjustments_reader</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fx_reader</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/loaders/equity_pricing_loader.html#EquityPricingLoader.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.loaders.equity_pricing_loader.EquityPricingLoader.__init__" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="zipline.pipeline.loaders.equity_pricing_loader.USEquityPricingLoader">
<span class="sig-prename descclassname"><span class="pre">zipline.pipeline.loaders.equity_pricing_loader.</span></span><span class="sig-name descname"><span class="pre">USEquityPricingLoader</span></span><a class="headerlink" href="#zipline.pipeline.loaders.equity_pricing_loader.USEquityPricingLoader" title="Permalink to this definition">#</a></dt>
<dd><p>alias of <a class="reference internal" href="#zipline.pipeline.loaders.equity_pricing_loader.EquityPricingLoader" title="zipline.pipeline.loaders.equity_pricing_loader.EquityPricingLoader"><code class="xref py py-class docutils literal notranslate"><span class="pre">EquityPricingLoader</span></code></a></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.pipeline.loaders.events.EventsLoader">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.pipeline.loaders.events.</span></span><span class="sig-name descname"><span class="pre">EventsLoader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">events</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">next_value_columns</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">previous_value_columns</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/loaders/events.html#EventsLoader"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.loaders.events.EventsLoader" title="Permalink to this definition">#</a></dt>
<dd><p>Base class for PipelineLoaders that supports loading the next and previous
value of an event field.</p>
<p>Does not currently support adjustments.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>events</strong> (<em>pd.DataFrame</em>) – <p>A DataFrame representing events (e.g. share buybacks or
earnings announcements) associated with particular companies.</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">events</span></code> must contain at least three columns::</dt><dd><dl class="simple">
<dt>sid<span class="classifier">int64</span></dt><dd><p>The asset id associated with each event.</p>
</dd>
<dt>event_date<span class="classifier">datetime64[ns]</span></dt><dd><p>The date on which the event occurred.</p>
</dd>
<dt>timestamp<span class="classifier">datetime64[ns]</span></dt><dd><p>The date on which we learned about the event.</p>
</dd>
</dl>
</dd>
</dl>
</p></li>
<li><p><strong>next_value_columns</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)"><em>dict</em></a><em>[</em><em>BoundColumn -&gt; str</em><em>]</em>) – Map from dataset columns to raw field names that should be used when
searching for a next event value.</p></li>
<li><p><strong>previous_value_columns</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)"><em>dict</em></a><em>[</em><em>BoundColumn -&gt; str</em><em>]</em>) – Map from dataset columns to raw field names that should be used when
searching for a previous event value.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.loaders.events.EventsLoader.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">events</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">next_value_columns</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">previous_value_columns</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/loaders/events.html#EventsLoader.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.loaders.events.EventsLoader.__init__" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.pipeline.loaders.earnings_estimates.EarningsEstimatesLoader">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.pipeline.loaders.earnings_estimates.</span></span><span class="sig-name descname"><span class="pre">EarningsEstimatesLoader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">estimates</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name_map</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/loaders/earnings_estimates.html#EarningsEstimatesLoader"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.loaders.earnings_estimates.EarningsEstimatesLoader" title="Permalink to this definition">#</a></dt>
<dd><p>An abstract pipeline loader for estimates data that can load data a
variable number of quarters forwards/backwards from calendar dates
depending on the <cite>num_announcements</cite> attribute of the columns’ dataset.
If split adjustments are to be applied, a loader, split-adjusted columns,
and the split-adjusted asof-date must be supplied.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>estimates</strong> (<em>pd.DataFrame</em>) – <dl class="simple">
<dt>The raw estimates data; must contain at least 5 columns:</dt><dd><dl class="simple">
<dt>sid<span class="classifier">int64</span></dt><dd><p>The asset id associated with each estimate.</p>
</dd>
<dt>event_date<span class="classifier">datetime64[ns]</span></dt><dd><p>The date on which the event that the estimate is for will/has
occurred.</p>
</dd>
<dt>timestamp<span class="classifier">datetime64[ns]</span></dt><dd><p>The datetime where we learned about the estimate.</p>
</dd>
<dt>fiscal_quarter<span class="classifier">int64</span></dt><dd><p>The quarter during which the event has/will occur.</p>
</dd>
<dt>fiscal_year<span class="classifier">int64</span></dt><dd><p>The year during which the event has/will occur.</p>
</dd>
</dl>
</dd>
</dl>
</p></li>
<li><p><strong>name_map</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)"><em>dict</em></a><em>[</em><em>str -&gt; str</em><em>]</em>) – A map of names of BoundColumns that this loader will load to the
names of the corresponding columns in <cite>events</cite>.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="zipline.pipeline.loaders.earnings_estimates.EarningsEstimatesLoader.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">estimates</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name_map</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/loaders/earnings_estimates.html#EarningsEstimatesLoader.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.pipeline.loaders.earnings_estimates.EarningsEstimatesLoader.__init__" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

</dd></dl>

</section>
</section>
<section id="exchange-and-asset-metadata">
<h2>Exchange and Asset Metadata<a class="headerlink" href="#exchange-and-asset-metadata" title="Permalink to this heading">#</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="zipline.assets.ExchangeInfo">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.assets.</span></span><span class="sig-name descname"><span class="pre">ExchangeInfo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">canonical_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">country_code</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/assets/exchange_info.html#ExchangeInfo"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.assets.ExchangeInfo" title="Permalink to this definition">#</a></dt>
<dd><p>An exchange where assets are traded.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em> or </em><em>None</em>) – The full name of the exchange, for example ‘NEW YORK STOCK EXCHANGE’ or
‘NASDAQ GLOBAL MARKET’.</p></li>
<li><p><strong>canonical_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – The canonical name of the exchange, for example ‘NYSE’ or ‘NASDAQ’. If
None this will be the same as the name.</p></li>
<li><p><strong>country_code</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – The country code where the exchange is located.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="zipline.assets.ExchangeInfo.name">
<span class="sig-name descname"><span class="pre">name</span></span><a class="headerlink" href="#zipline.assets.ExchangeInfo.name" title="Permalink to this definition">#</a></dt>
<dd><p>The full name of the exchange, for example ‘NEW YORK STOCK EXCHANGE’ or
‘NASDAQ GLOBAL MARKET’.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a> or None</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="zipline.assets.ExchangeInfo.canonical_name">
<span class="sig-name descname"><span class="pre">canonical_name</span></span><a class="headerlink" href="#zipline.assets.ExchangeInfo.canonical_name" title="Permalink to this definition">#</a></dt>
<dd><p>The canonical name of the exchange, for example ‘NYSE’ or ‘NASDAQ’. If
None this will be the same as the name.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="zipline.assets.ExchangeInfo.country_code">
<span class="sig-name descname"><span class="pre">country_code</span></span><a class="headerlink" href="#zipline.assets.ExchangeInfo.country_code" title="Permalink to this definition">#</a></dt>
<dd><p>The country code where the exchange is located.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="zipline.assets.ExchangeInfo.calendar">
<span class="sig-name descname"><span class="pre">calendar</span></span><a class="headerlink" href="#zipline.assets.ExchangeInfo.calendar" title="Permalink to this definition">#</a></dt>
<dd><p>The trading calendar the exchange uses.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>TradingCalendar</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="id7">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">calendar</span></span><a class="headerlink" href="#id7" title="Permalink to this definition">#</a></dt>
<dd><p>The trading calendar that this exchange uses.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.assets.Asset">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.assets.</span></span><span class="sig-name descname"><span class="pre">Asset</span></span><a class="headerlink" href="#zipline.assets.Asset" title="Permalink to this definition">#</a></dt>
<dd><p>Base class for entities that can be owned by a trading algorithm.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="zipline.assets.Asset.sid">
<span class="sig-name descname"><span class="pre">sid</span></span><a class="headerlink" href="#zipline.assets.Asset.sid" title="Permalink to this definition">#</a></dt>
<dd><p>Persistent unique identifier assigned to the asset.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)">int</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="zipline.assets.Asset.symbol">
<span class="sig-name descname"><span class="pre">symbol</span></span><a class="headerlink" href="#zipline.assets.Asset.symbol" title="Permalink to this definition">#</a></dt>
<dd><p>Most recent ticker under which the asset traded. This field can change
without warning if the asset changes tickers. Use <code class="docutils literal notranslate"><span class="pre">sid</span></code> if you need a
persistent identifier.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="zipline.assets.Asset.asset_name">
<span class="sig-name descname"><span class="pre">asset_name</span></span><a class="headerlink" href="#zipline.assets.Asset.asset_name" title="Permalink to this definition">#</a></dt>
<dd><p>Full name of the asset.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="zipline.assets.Asset.exchange">
<span class="sig-name descname"><span class="pre">exchange</span></span><a class="headerlink" href="#zipline.assets.Asset.exchange" title="Permalink to this definition">#</a></dt>
<dd><p>Canonical short name of the exchange on which the asset trades (e.g.,
‘NYSE’).</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="zipline.assets.Asset.exchange_full">
<span class="sig-name descname"><span class="pre">exchange_full</span></span><a class="headerlink" href="#zipline.assets.Asset.exchange_full" title="Permalink to this definition">#</a></dt>
<dd><p>Full name of the exchange on which the asset trades (e.g., ‘NEW YORK
STOCK EXCHANGE’).</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="zipline.assets.Asset.exchange_info">
<span class="sig-name descname"><span class="pre">exchange_info</span></span><a class="headerlink" href="#zipline.assets.Asset.exchange_info" title="Permalink to this definition">#</a></dt>
<dd><p>Information about the exchange this asset is listed on.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#zipline.assets.ExchangeInfo" title="zipline.assets.ExchangeInfo">zipline.assets.ExchangeInfo</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="zipline.assets.Asset.country_code">
<span class="sig-name descname"><span class="pre">country_code</span></span><a class="headerlink" href="#zipline.assets.Asset.country_code" title="Permalink to this definition">#</a></dt>
<dd><p>Two character code indicating the country in which the asset trades.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="zipline.assets.Asset.start_date">
<span class="sig-name descname"><span class="pre">start_date</span></span><a class="headerlink" href="#zipline.assets.Asset.start_date" title="Permalink to this definition">#</a></dt>
<dd><p>Date on which the asset first traded.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pd.Timestamp</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="zipline.assets.Asset.end_date">
<span class="sig-name descname"><span class="pre">end_date</span></span><a class="headerlink" href="#zipline.assets.Asset.end_date" title="Permalink to this definition">#</a></dt>
<dd><p>Last date on which the asset traded. On Quantopian, this value is set
to the current (real time) date for assets that are still trading.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pd.Timestamp</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="zipline.assets.Asset.tick_size">
<span class="sig-name descname"><span class="pre">tick_size</span></span><a class="headerlink" href="#zipline.assets.Asset.tick_size" title="Permalink to this definition">#</a></dt>
<dd><p>Minimum amount that the price can change for this asset.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)">float</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="zipline.assets.Asset.auto_close_date">
<span class="sig-name descname"><span class="pre">auto_close_date</span></span><a class="headerlink" href="#zipline.assets.Asset.auto_close_date" title="Permalink to this definition">#</a></dt>
<dd><p>Date on which positions in this asset will be automatically liquidated
to cash during a simulation. By default, this is three days after
<code class="docutils literal notranslate"><span class="pre">end_date</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pd.Timestamp</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.assets.Asset.from_dict">
<span class="sig-name descname"><span class="pre">from_dict</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zipline.assets.Asset.from_dict" title="Permalink to this definition">#</a></dt>
<dd><p>Build an Asset instance from a dict.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.assets.Asset.is_alive_for_session">
<span class="sig-name descname"><span class="pre">is_alive_for_session</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zipline.assets.Asset.is_alive_for_session" title="Permalink to this definition">#</a></dt>
<dd><p>Returns whether the asset is alive at the given dt.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>session_label</strong> (<em>pd.Timestamp</em>) – The desired session label to check. (midnight UTC)</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>boolean</strong></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>whether the asset is alive at the given dt.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.assets.Asset.is_exchange_open">
<span class="sig-name descname"><span class="pre">is_exchange_open</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zipline.assets.Asset.is_exchange_open" title="Permalink to this definition">#</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>dt_minute</strong> (<em>pd.Timestamp</em><em> (</em><em>UTC</em><em>, </em><em>tz-aware</em><em>)</em>) – The minute to check.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>boolean</strong></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>whether the asset’s exchange is open at the given minute.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.assets.Asset.to_dict">
<span class="sig-name descname"><span class="pre">to_dict</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zipline.assets.Asset.to_dict" title="Permalink to this definition">#</a></dt>
<dd><p>Convert to a python dict containing all attributes of the asset.</p>
<p>This is often useful for debugging.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>as_dict</strong></p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)">dict</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.assets.Equity">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.assets.</span></span><span class="sig-name descname"><span class="pre">Equity</span></span><a class="headerlink" href="#zipline.assets.Equity" title="Permalink to this definition">#</a></dt>
<dd><p>Asset subclass representing partial ownership of a company, trust, or
partnership.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.assets.Future">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.assets.</span></span><span class="sig-name descname"><span class="pre">Future</span></span><a class="headerlink" href="#zipline.assets.Future" title="Permalink to this definition">#</a></dt>
<dd><p>Asset subclass representing ownership of a futures contract.</p>
<dl class="py method">
<dt class="sig sig-object py" id="zipline.assets.Future.to_dict">
<span class="sig-name descname"><span class="pre">to_dict</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zipline.assets.Future.to_dict" title="Permalink to this definition">#</a></dt>
<dd><p>Convert to a python dict.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.assets.AssetConvertible">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.assets.</span></span><span class="sig-name descname"><span class="pre">AssetConvertible</span></span><a class="reference internal" href="_modules/zipline/assets/assets.html#AssetConvertible"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.assets.AssetConvertible" title="Permalink to this definition">#</a></dt>
<dd><p>ABC for types that are convertible to integer-representations of
Assets.</p>
<p>Includes Asset, str, and Integral</p>
</dd></dl>

</section>
<section id="trading-calendar-api">
<h2>Trading Calendar API<a class="headerlink" href="#trading-calendar-api" title="Permalink to this heading">#</a></h2>
<p>The events that generate the timeline of the algorithm execution adhere to a
given <code class="xref py py-class docutils literal notranslate"><span class="pre">TradingCalendar</span></code>.</p>
</section>
<section id="data-api">
<h2>Data API<a class="headerlink" href="#data-api" title="Permalink to this heading">#</a></h2>
<section id="writers">
<h3>Writers<a class="headerlink" href="#writers" title="Permalink to this heading">#</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="zipline.data.bcolz_daily_bars.BcolzDailyBarWriter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.data.bcolz_daily_bars.</span></span><span class="sig-name descname"><span class="pre">BcolzDailyBarWriter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">calendar</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_session</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_session</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/data/bcolz_daily_bars.html#BcolzDailyBarWriter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.data.bcolz_daily_bars.BcolzDailyBarWriter" title="Permalink to this definition">#</a></dt>
<dd><p>Class capable of writing daily OHLCV data to disk in a format that can
be read efficiently by BcolzDailyOHLCVReader.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – The location at which we should write our output.</p></li>
<li><p><strong>calendar</strong> (<em>zipline.utils.calendar.trading_calendar</em>) – Calendar to use to compute asset calendar offsets.</p></li>
<li><p><strong>start_session</strong> (<em>pd.Timestamp</em>) – Midnight UTC session label.</p></li>
<li><p><strong>end_session</strong> (<em>pd.Timestamp</em>) – Midnight UTC session label.</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#zipline.data.bcolz_daily_bars.BcolzDailyBarReader" title="zipline.data.bcolz_daily_bars.BcolzDailyBarReader"><code class="xref py py-obj docutils literal notranslate"><span class="pre">zipline.data.bcolz_daily_bars.BcolzDailyBarReader</span></code></a></p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="zipline.data.bcolz_daily_bars.BcolzDailyBarWriter.write">
<span class="sig-name descname"><span class="pre">write</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">assets</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_progress</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">invalid_data_behavior</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'warn'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/data/bcolz_daily_bars.html#BcolzDailyBarWriter.write"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.data.bcolz_daily_bars.BcolzDailyBarWriter.write" title="Permalink to this definition">#</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>iterable</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.11)"><em>tuple</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>, </em><a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v2.0.3)"><em>pandas.DataFrame</em></a><em> or </em><em>bcolz.ctable</em><em>]</em><em>]</em>) – The data chunks to write. Each chunk should be a tuple of sid
and the data for that asset.</p></li>
<li><p><strong>assets</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#set" title="(in Python v3.11)"><em>set</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>]</em><em>, </em><em>optional</em>) – The assets that should be in <code class="docutils literal notranslate"><span class="pre">data</span></code>. If this is provided
we will check <code class="docutils literal notranslate"><span class="pre">data</span></code> against the assets and provide better
progress information.</p></li>
<li><p><strong>show_progress</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><em>optional</em>) – Whether or not to show a progress bar while writing.</p></li>
<li><p><strong>invalid_data_behavior</strong> (<em>{'warn'</em><em>, </em><em>'raise'</em><em>, </em><em>'ignore'}</em><em>, </em><em>optional</em>) – What to do when data is encountered that is outside the range of
a uint32.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>table</strong> – The newly-written table.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bcolz.ctable</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.data.bcolz_daily_bars.BcolzDailyBarWriter.write_csvs">
<span class="sig-name descname"><span class="pre">write_csvs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">asset_map</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_progress</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">invalid_data_behavior</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'warn'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/data/bcolz_daily_bars.html#BcolzDailyBarWriter.write_csvs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.data.bcolz_daily_bars.BcolzDailyBarWriter.write_csvs" title="Permalink to this definition">#</a></dt>
<dd><p>Read CSVs as DataFrames from our asset map.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>asset_map</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)"><em>dict</em></a><em>[</em><em>int -&gt; str</em><em>]</em>) – A mapping from asset id to file path with the CSV data for that
asset</p></li>
<li><p><strong>show_progress</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Whether or not to show a progress bar while writing.</p></li>
<li><p><strong>invalid_data_behavior</strong> (<em>{'warn'</em><em>, </em><em>'raise'</em><em>, </em><em>'ignore'}</em>) – What to do when data is encountered that is outside the range of
a uint32.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.data.adjustments.SQLiteAdjustmentWriter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.data.adjustments.</span></span><span class="sig-name descname"><span class="pre">SQLiteAdjustmentWriter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">conn_or_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">equity_daily_bar_reader</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/data/adjustments.html#SQLiteAdjustmentWriter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.data.adjustments.SQLiteAdjustmentWriter" title="Permalink to this definition">#</a></dt>
<dd><p>Writer for data to be read by SQLiteAdjustmentReader</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>conn_or_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/sqlite3.html#sqlite3.Connection" title="(in Python v3.11)"><em>sqlite3.Connection</em></a>) – A handle to the target sqlite database.</p></li>
<li><p><strong>equity_daily_bar_reader</strong> (<em>SessionBarReader</em>) – Daily bar reader to use for dividend writes.</p></li>
<li><p><strong>overwrite</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><em>optional</em><em>, </em><em>default=False</em>) – If True and conn_or_path is a string, remove any existing files at the
given path before connecting.</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#zipline.data.adjustments.SQLiteAdjustmentReader" title="zipline.data.adjustments.SQLiteAdjustmentReader"><code class="xref py py-obj docutils literal notranslate"><span class="pre">zipline.data.adjustments.SQLiteAdjustmentReader</span></code></a></p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="zipline.data.adjustments.SQLiteAdjustmentWriter.calc_dividend_ratios">
<span class="sig-name descname"><span class="pre">calc_dividend_ratios</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dividends</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/data/adjustments.html#SQLiteAdjustmentWriter.calc_dividend_ratios"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.data.adjustments.SQLiteAdjustmentWriter.calc_dividend_ratios" title="Permalink to this definition">#</a></dt>
<dd><p>Calculate the ratios to apply to equities when looking back at pricing
history so that the price is smoothed over the ex_date, when the market
adjusts to the change in equity value due to upcoming dividend.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A frame in the same format as splits and mergers, with keys
- sid, the id of the equity
- effective_date, the date in seconds on which to apply the ratio.
- ratio, the ratio to apply to backwards looking pricing data.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.data.adjustments.SQLiteAdjustmentWriter.write">
<span class="sig-name descname"><span class="pre">write</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">splits</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mergers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dividends</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stock_dividends</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/data/adjustments.html#SQLiteAdjustmentWriter.write"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.data.adjustments.SQLiteAdjustmentWriter.write" title="Permalink to this definition">#</a></dt>
<dd><p>Writes data to a SQLite file to be read by SQLiteAdjustmentReader.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>splits</strong> (<a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v2.0.3)"><em>pandas.DataFrame</em></a><em>, </em><em>optional</em>) – <dl class="simple">
<dt>Dataframe containing split data. The format of this dataframe is:</dt><dd><dl class="simple">
<dt>effective_date<span class="classifier">int</span></dt><dd><p>The date, represented as seconds since Unix epoch, on which
the adjustment should be applied.</p>
</dd>
<dt>ratio<span class="classifier">float</span></dt><dd><p>A value to apply to all data earlier than the effective date.
For open, high, low, and close those values are multiplied by
the ratio. Volume is divided by this value.</p>
</dd>
<dt>sid<span class="classifier">int</span></dt><dd><p>The asset id associated with this adjustment.</p>
</dd>
</dl>
</dd>
</dl>
</p></li>
<li><p><strong>mergers</strong> (<a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v2.0.3)"><em>pandas.DataFrame</em></a><em>, </em><em>optional</em>) – <dl class="simple">
<dt>DataFrame containing merger data. The format of this dataframe is:</dt><dd><dl class="simple">
<dt>effective_date<span class="classifier">int</span></dt><dd><p>The date, represented as seconds since Unix epoch, on which
the adjustment should be applied.</p>
</dd>
<dt>ratio<span class="classifier">float</span></dt><dd><p>A value to apply to all data earlier than the effective date.
For open, high, low, and close those values are multiplied by
the ratio. Volume is unaffected.</p>
</dd>
<dt>sid<span class="classifier">int</span></dt><dd><p>The asset id associated with this adjustment.</p>
</dd>
</dl>
</dd>
</dl>
</p></li>
<li><p><strong>dividends</strong> (<a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v2.0.3)"><em>pandas.DataFrame</em></a><em>, </em><em>optional</em>) – <dl class="simple">
<dt>DataFrame containing dividend data. The format of the dataframe is:</dt><dd><dl class="simple">
<dt>sid<span class="classifier">int</span></dt><dd><p>The asset id associated with this adjustment.</p>
</dd>
<dt>ex_date<span class="classifier">datetime64</span></dt><dd><p>The date on which an equity must be held to be eligible to
receive payment.</p>
</dd>
<dt>declared_date<span class="classifier">datetime64</span></dt><dd><p>The date on which the dividend is announced to the public.</p>
</dd>
<dt>pay_date<span class="classifier">datetime64</span></dt><dd><p>The date on which the dividend is distributed.</p>
</dd>
<dt>record_date<span class="classifier">datetime64</span></dt><dd><p>The date on which the stock ownership is checked to determine
distribution of dividends.</p>
</dd>
<dt>amount<span class="classifier">float</span></dt><dd><p>The cash amount paid for each share.</p>
</dd>
</dl>
</dd>
</dl>
<p>Dividend ratios are calculated as:
<code class="docutils literal notranslate"><span class="pre">1.0</span> <span class="pre">-</span> <span class="pre">(dividend_value</span> <span class="pre">/</span> <span class="pre">&quot;close</span> <span class="pre">on</span> <span class="pre">day</span> <span class="pre">prior</span> <span class="pre">to</span> <span class="pre">ex_date&quot;)</span></code></p>
</p></li>
<li><p><strong>stock_dividends</strong> (<a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v2.0.3)"><em>pandas.DataFrame</em></a><em>, </em><em>optional</em>) – <p>DataFrame containing stock dividend data. The format of the
dataframe is:</p>
<blockquote>
<div><dl class="simple">
<dt>sid<span class="classifier">int</span></dt><dd><p>The asset id associated with this adjustment.</p>
</dd>
<dt>ex_date<span class="classifier">datetime64</span></dt><dd><p>The date on which an equity must be held to be eligible to
receive payment.</p>
</dd>
<dt>declared_date<span class="classifier">datetime64</span></dt><dd><p>The date on which the dividend is announced to the public.</p>
</dd>
<dt>pay_date<span class="classifier">datetime64</span></dt><dd><p>The date on which the dividend is distributed.</p>
</dd>
<dt>record_date<span class="classifier">datetime64</span></dt><dd><p>The date on which the stock ownership is checked to determine
distribution of dividends.</p>
</dd>
<dt>payment_sid<span class="classifier">int</span></dt><dd><p>The asset id of the shares that should be paid instead of
cash.</p>
</dd>
<dt>ratio<span class="classifier">float</span></dt><dd><p>The ratio of currently held shares in the held sid that
should be paid with new shares of the payment_sid.</p>
</dd>
</dl>
</div></blockquote>
</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#zipline.data.adjustments.SQLiteAdjustmentReader" title="zipline.data.adjustments.SQLiteAdjustmentReader"><code class="xref py py-obj docutils literal notranslate"><span class="pre">zipline.data.adjustments.SQLiteAdjustmentReader</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.data.adjustments.SQLiteAdjustmentWriter.write_dividend_data">
<span class="sig-name descname"><span class="pre">write_dividend_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dividends</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stock_dividends</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/data/adjustments.html#SQLiteAdjustmentWriter.write_dividend_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.data.adjustments.SQLiteAdjustmentWriter.write_dividend_data" title="Permalink to this definition">#</a></dt>
<dd><p>Write both dividend payouts and the derived price adjustment ratios.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.data.adjustments.SQLiteAdjustmentWriter.write_dividend_payouts">
<span class="sig-name descname"><span class="pre">write_dividend_payouts</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">frame</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/data/adjustments.html#SQLiteAdjustmentWriter.write_dividend_payouts"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.data.adjustments.SQLiteAdjustmentWriter.write_dividend_payouts" title="Permalink to this definition">#</a></dt>
<dd><p>Write dividend payout data to SQLite table <cite>dividend_payouts</cite>.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.assets.AssetDBWriter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.assets.</span></span><span class="sig-name descname"><span class="pre">AssetDBWriter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">engine</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/assets/asset_writer.html#AssetDBWriter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.assets.AssetDBWriter" title="Permalink to this definition">#</a></dt>
<dd><p>Class used to write data to an assets db.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>engine</strong> (<em>Engine</em><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – An SQLAlchemy engine or path to a SQL database.</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="zipline.assets.AssetDBWriter.init_db">
<span class="sig-name descname"><span class="pre">init_db</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">txn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/assets/asset_writer.html#AssetDBWriter.init_db"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.assets.AssetDBWriter.init_db" title="Permalink to this definition">#</a></dt>
<dd><p>Connect to database and create tables.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>txn</strong> (<em>sa.engine.Connection</em><em>, </em><em>optional</em>) – The transaction block to execute in. If this is not provided, a new
transaction will be started with the engine provided.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>metadata</strong> – The metadata that describes the new assets db.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>sa.MetaData</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.assets.AssetDBWriter.write">
<span class="sig-name descname"><span class="pre">write</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">equities</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">futures</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exchanges</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">root_symbols</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">equity_supplementary_mappings</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chunk_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">999</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/assets/asset_writer.html#AssetDBWriter.write"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.assets.AssetDBWriter.write" title="Permalink to this definition">#</a></dt>
<dd><p>Write asset metadata to a sqlite database.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>equities</strong> (<em>pd.DataFrame</em><em>, </em><em>optional</em>) – <p>The equity metadata. The columns for this dataframe are:</p>
<blockquote>
<div><dl class="simple">
<dt>symbol<span class="classifier">str</span></dt><dd><p>The ticker symbol for this equity.</p>
</dd>
<dt>asset_name<span class="classifier">str</span></dt><dd><p>The full name for this asset.</p>
</dd>
<dt>start_date<span class="classifier">datetime</span></dt><dd><p>The date when this asset was created.</p>
</dd>
<dt>end_date<span class="classifier">datetime, optional</span></dt><dd><p>The last date we have trade data for this asset.</p>
</dd>
<dt>first_traded<span class="classifier">datetime, optional</span></dt><dd><p>The first date we have trade data for this asset.</p>
</dd>
<dt>auto_close_date<span class="classifier">datetime, optional</span></dt><dd><p>The date on which to close any positions in this asset.</p>
</dd>
<dt>exchange<span class="classifier">str</span></dt><dd><p>The exchange where this asset is traded.</p>
</dd>
</dl>
</div></blockquote>
<p>The index of this dataframe should contain the sids.</p>
</p></li>
<li><p><strong>futures</strong> (<em>pd.DataFrame</em><em>, </em><em>optional</em>) – <p>The future contract metadata. The columns for this dataframe are:</p>
<blockquote>
<div><dl class="simple">
<dt>symbol<span class="classifier">str</span></dt><dd><p>The ticker symbol for this futures contract.</p>
</dd>
<dt>root_symbol<span class="classifier">str</span></dt><dd><p>The root symbol, or the symbol with the expiration stripped
out.</p>
</dd>
<dt>asset_name<span class="classifier">str</span></dt><dd><p>The full name for this asset.</p>
</dd>
<dt>start_date<span class="classifier">datetime, optional</span></dt><dd><p>The date when this asset was created.</p>
</dd>
<dt>end_date<span class="classifier">datetime, optional</span></dt><dd><p>The last date we have trade data for this asset.</p>
</dd>
<dt>first_traded<span class="classifier">datetime, optional</span></dt><dd><p>The first date we have trade data for this asset.</p>
</dd>
<dt>exchange<span class="classifier">str</span></dt><dd><p>The exchange where this asset is traded.</p>
</dd>
<dt>notice_date<span class="classifier">datetime</span></dt><dd><p>The date when the owner of the contract may be forced
to take physical delivery of the contract’s asset.</p>
</dd>
<dt>expiration_date<span class="classifier">datetime</span></dt><dd><p>The date when the contract expires.</p>
</dd>
<dt>auto_close_date<span class="classifier">datetime</span></dt><dd><p>The date when the broker will automatically close any
positions in this contract.</p>
</dd>
<dt>tick_size<span class="classifier">float</span></dt><dd><p>The minimum price movement of the contract.</p>
</dd>
<dt>multiplier: float</dt><dd><p>The amount of the underlying asset represented by this
contract.</p>
</dd>
</dl>
</div></blockquote>
</p></li>
<li><p><strong>exchanges</strong> (<em>pd.DataFrame</em><em>, </em><em>optional</em>) – <p>The exchanges where assets can be traded. The columns of this
dataframe are:</p>
<blockquote>
<div><dl class="simple">
<dt>exchange<span class="classifier">str</span></dt><dd><p>The full name of the exchange.</p>
</dd>
<dt>canonical_name<span class="classifier">str</span></dt><dd><p>The canonical name of the exchange.</p>
</dd>
<dt>country_code<span class="classifier">str</span></dt><dd><p>The ISO 3166 alpha-2 country code of the exchange.</p>
</dd>
</dl>
</div></blockquote>
</p></li>
<li><p><strong>root_symbols</strong> (<em>pd.DataFrame</em><em>, </em><em>optional</em>) – <p>The root symbols for the futures contracts. The columns for this
dataframe are:</p>
<blockquote>
<div><dl class="simple">
<dt>root_symbol<span class="classifier">str</span></dt><dd><p>The root symbol name.</p>
</dd>
<dt>root_symbol_id<span class="classifier">int</span></dt><dd><p>The unique id for this root symbol.</p>
</dd>
<dt>sector<span class="classifier">string, optional</span></dt><dd><p>The sector of this root symbol.</p>
</dd>
<dt>description<span class="classifier">string, optional</span></dt><dd><p>A short description of this root symbol.</p>
</dd>
<dt>exchange<span class="classifier">str</span></dt><dd><p>The exchange where this root symbol is traded.</p>
</dd>
</dl>
</div></blockquote>
</p></li>
<li><p><strong>equity_supplementary_mappings</strong> (<em>pd.DataFrame</em><em>, </em><em>optional</em>) – Additional mappings from values of abitrary type to assets.</p></li>
<li><p><strong>chunk_size</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>, </em><em>optional</em>) – The amount of rows to write to the SQLite table at once.
This defaults to the default number of bind params in sqlite.
If you have compiled sqlite3 with more bind or less params you may
want to pass that value here.</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-obj docutils literal notranslate"><span class="pre">zipline.assets.asset_finder</span></code></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.assets.AssetDBWriter.write_direct">
<span class="sig-name descname"><span class="pre">write_direct</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">equities</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">equity_symbol_mappings</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">equity_supplementary_mappings</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">futures</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exchanges</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">root_symbols</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chunk_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">999</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/assets/asset_writer.html#AssetDBWriter.write_direct"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.assets.AssetDBWriter.write_direct" title="Permalink to this definition">#</a></dt>
<dd><p>Write asset metadata to a sqlite database in the format that it is
stored in the assets db.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>equities</strong> (<em>pd.DataFrame</em><em>, </em><em>optional</em>) – <p>The equity metadata. The columns for this dataframe are:</p>
<blockquote>
<div><dl class="simple">
<dt>symbol<span class="classifier">str</span></dt><dd><p>The ticker symbol for this equity.</p>
</dd>
<dt>asset_name<span class="classifier">str</span></dt><dd><p>The full name for this asset.</p>
</dd>
<dt>start_date<span class="classifier">datetime</span></dt><dd><p>The date when this asset was created.</p>
</dd>
<dt>end_date<span class="classifier">datetime, optional</span></dt><dd><p>The last date we have trade data for this asset.</p>
</dd>
<dt>first_traded<span class="classifier">datetime, optional</span></dt><dd><p>The first date we have trade data for this asset.</p>
</dd>
<dt>auto_close_date<span class="classifier">datetime, optional</span></dt><dd><p>The date on which to close any positions in this asset.</p>
</dd>
<dt>exchange<span class="classifier">str</span></dt><dd><p>The exchange where this asset is traded.</p>
</dd>
</dl>
</div></blockquote>
<p>The index of this dataframe should contain the sids.</p>
</p></li>
<li><p><strong>futures</strong> (<em>pd.DataFrame</em><em>, </em><em>optional</em>) – <p>The future contract metadata. The columns for this dataframe are:</p>
<blockquote>
<div><dl class="simple">
<dt>symbol<span class="classifier">str</span></dt><dd><p>The ticker symbol for this futures contract.</p>
</dd>
<dt>root_symbol<span class="classifier">str</span></dt><dd><p>The root symbol, or the symbol with the expiration stripped
out.</p>
</dd>
<dt>asset_name<span class="classifier">str</span></dt><dd><p>The full name for this asset.</p>
</dd>
<dt>start_date<span class="classifier">datetime, optional</span></dt><dd><p>The date when this asset was created.</p>
</dd>
<dt>end_date<span class="classifier">datetime, optional</span></dt><dd><p>The last date we have trade data for this asset.</p>
</dd>
<dt>first_traded<span class="classifier">datetime, optional</span></dt><dd><p>The first date we have trade data for this asset.</p>
</dd>
<dt>exchange<span class="classifier">str</span></dt><dd><p>The exchange where this asset is traded.</p>
</dd>
<dt>notice_date<span class="classifier">datetime</span></dt><dd><p>The date when the owner of the contract may be forced
to take physical delivery of the contract’s asset.</p>
</dd>
<dt>expiration_date<span class="classifier">datetime</span></dt><dd><p>The date when the contract expires.</p>
</dd>
<dt>auto_close_date<span class="classifier">datetime</span></dt><dd><p>The date when the broker will automatically close any
positions in this contract.</p>
</dd>
<dt>tick_size<span class="classifier">float</span></dt><dd><p>The minimum price movement of the contract.</p>
</dd>
<dt>multiplier: float</dt><dd><p>The amount of the underlying asset represented by this
contract.</p>
</dd>
</dl>
</div></blockquote>
</p></li>
<li><p><strong>exchanges</strong> (<em>pd.DataFrame</em><em>, </em><em>optional</em>) – <p>The exchanges where assets can be traded. The columns of this
dataframe are:</p>
<blockquote>
<div><dl class="simple">
<dt>exchange<span class="classifier">str</span></dt><dd><p>The full name of the exchange.</p>
</dd>
<dt>canonical_name<span class="classifier">str</span></dt><dd><p>The canonical name of the exchange.</p>
</dd>
<dt>country_code<span class="classifier">str</span></dt><dd><p>The ISO 3166 alpha-2 country code of the exchange.</p>
</dd>
</dl>
</div></blockquote>
</p></li>
<li><p><strong>root_symbols</strong> (<em>pd.DataFrame</em><em>, </em><em>optional</em>) – <p>The root symbols for the futures contracts. The columns for this
dataframe are:</p>
<blockquote>
<div><dl class="simple">
<dt>root_symbol<span class="classifier">str</span></dt><dd><p>The root symbol name.</p>
</dd>
<dt>root_symbol_id<span class="classifier">int</span></dt><dd><p>The unique id for this root symbol.</p>
</dd>
<dt>sector<span class="classifier">string, optional</span></dt><dd><p>The sector of this root symbol.</p>
</dd>
<dt>description<span class="classifier">string, optional</span></dt><dd><p>A short description of this root symbol.</p>
</dd>
<dt>exchange<span class="classifier">str</span></dt><dd><p>The exchange where this root symbol is traded.</p>
</dd>
</dl>
</div></blockquote>
</p></li>
<li><p><strong>equity_supplementary_mappings</strong> (<em>pd.DataFrame</em><em>, </em><em>optional</em>) – Additional mappings from values of abitrary type to assets.</p></li>
<li><p><strong>chunk_size</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>, </em><em>optional</em>) – The amount of rows to write to the SQLite table at once.
This defaults to the default number of bind params in sqlite.
If you have compiled sqlite3 with more bind or less params you may
want to pass that value here.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="readers">
<h3>Readers<a class="headerlink" href="#readers" title="Permalink to this heading">#</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="zipline.data.bcolz_daily_bars.BcolzDailyBarReader">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.data.bcolz_daily_bars.</span></span><span class="sig-name descname"><span class="pre">BcolzDailyBarReader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">table</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">read_all_threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3000</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/data/bcolz_daily_bars.html#BcolzDailyBarReader"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.data.bcolz_daily_bars.BcolzDailyBarReader" title="Permalink to this definition">#</a></dt>
<dd><p>Reader for raw pricing data written by BcolzDailyOHLCVWriter.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>table</strong> (<em>bcolz.ctable</em>) – The ctable contaning the pricing data, with attrs corresponding to the
Attributes list below.</p></li>
<li><p><strong>read_all_threshold</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – The number of equities at which; below, the data is read by reading a
slice from the carray per asset.  above, the data is read by pulling
all of the data for all assets into memory and then indexing into that
array for each day and asset pair.  Used to tune performance of reads
when using a small or large number of equities.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">The</span> <span class="pre">table</span> <span class="pre">with</span> <span class="pre">which</span> <span class="pre">this</span> <span class="pre">loader</span> <span class="pre">interacts</span> <span class="pre">contains</span> <span class="pre">the</span> <span class="pre">following</span></span></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="zipline.data.bcolz_daily_bars.BcolzDailyBarReader.attributes">
<span class="sig-name descname"><span class="pre">attributes</span></span><a class="headerlink" href="#zipline.data.bcolz_daily_bars.BcolzDailyBarReader.attributes" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="zipline.data.bcolz_daily_bars.BcolzDailyBarReader.first_row">
<span class="sig-name descname"><span class="pre">first_row</span></span><a class="headerlink" href="#zipline.data.bcolz_daily_bars.BcolzDailyBarReader.first_row" title="Permalink to this definition">#</a></dt>
<dd><p>Map from asset_id -&gt; index of first row in the dataset with that id.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)">dict</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="zipline.data.bcolz_daily_bars.BcolzDailyBarReader.last_row">
<span class="sig-name descname"><span class="pre">last_row</span></span><a class="headerlink" href="#zipline.data.bcolz_daily_bars.BcolzDailyBarReader.last_row" title="Permalink to this definition">#</a></dt>
<dd><p>Map from asset_id -&gt; index of last row in the dataset with that id.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)">dict</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="zipline.data.bcolz_daily_bars.BcolzDailyBarReader.calendar_offset">
<span class="sig-name descname"><span class="pre">calendar_offset</span></span><a class="headerlink" href="#zipline.data.bcolz_daily_bars.BcolzDailyBarReader.calendar_offset" title="Permalink to this definition">#</a></dt>
<dd><p>Map from asset_id -&gt; calendar index of first row.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)">dict</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="zipline.data.bcolz_daily_bars.BcolzDailyBarReader.start_session_ns">
<span class="sig-name descname"><span class="pre">start_session_ns</span></span><a class="headerlink" href="#zipline.data.bcolz_daily_bars.BcolzDailyBarReader.start_session_ns" title="Permalink to this definition">#</a></dt>
<dd><p>Epoch ns of the first session used in this dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)">int</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="zipline.data.bcolz_daily_bars.BcolzDailyBarReader.end_session_ns">
<span class="sig-name descname"><span class="pre">end_session_ns</span></span><a class="headerlink" href="#zipline.data.bcolz_daily_bars.BcolzDailyBarReader.end_session_ns" title="Permalink to this definition">#</a></dt>
<dd><p>Epoch ns of the last session used in this dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)">int</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="zipline.data.bcolz_daily_bars.BcolzDailyBarReader.calendar_name">
<span class="sig-name descname"><span class="pre">calendar_name</span></span><a class="headerlink" href="#zipline.data.bcolz_daily_bars.BcolzDailyBarReader.calendar_name" title="Permalink to this definition">#</a></dt>
<dd><p>String identifier of trading calendar used (ie, “NYSE”).</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">We</span> <span class="pre">use</span> <span class="pre">first_row</span> <span class="pre">and</span> <span class="pre">last_row</span> <span class="pre">together</span> <span class="pre">to</span> <span class="pre">quickly</span> <span class="pre">find</span> <span class="pre">ranges</span> <span class="pre">of</span> <span class="pre">rows</span> <span class="pre">to</span></span></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">load</span> <span class="pre">when</span> <span class="pre">reading</span> <span class="pre">an</span> <span class="pre">asset's</span> <span class="pre">data</span> <span class="pre">into</span> <span class="pre">memory.</span></span></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">We</span> <span class="pre">use</span> <span class="pre">calendar_offset</span> <span class="pre">and</span> <span class="pre">calendar</span> <span class="pre">to</span> <span class="pre">orient</span> <span class="pre">loaded</span> <span class="pre">blocks</span> <span class="pre">within</span> <span class="pre">a</span></span></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">range</span> <span class="pre">of</span> <span class="pre">queried</span> <span class="pre">dates.</span></span></dt>
<dd></dd></dl>

<p class="rubric">Notes</p>
<p>A Bcolz CTable is comprised of Columns and Attributes.
The table with which this loader interacts contains the following columns:</p>
<p>[‘open’, ‘high’, ‘low’, ‘close’, ‘volume’, ‘day’, ‘id’].</p>
<p>The data in these columns is interpreted as follows:</p>
<ul class="simple">
<li><p>Price columns (‘open’, ‘high’, ‘low’, ‘close’) are interpreted as 1000 *
as-traded dollar value.</p></li>
<li><p>Volume is interpreted as as-traded volume.</p></li>
<li><p>Day is interpreted as seconds since midnight UTC, Jan 1, 1970.</p></li>
<li><p>Id is the asset id of the row.</p></li>
</ul>
<p>The data in each column is grouped by asset and then sorted by day within
each asset block.</p>
<p>The table is built to represent a long time range of data, e.g. ten years
of equity data, so the lengths of each asset block is not equal to each
other. The blocks are clipped to the known start and end date of each asset
to cut down on the number of empty values that would need to be included to
make a regular/cubic dataset.</p>
<p>When read across the open, high, low, close, and volume with the same
index should represent the same asset and day.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#zipline.data.bcolz_daily_bars.BcolzDailyBarWriter" title="zipline.data.bcolz_daily_bars.BcolzDailyBarWriter"><code class="xref py py-obj docutils literal notranslate"><span class="pre">zipline.data.bcolz_daily_bars.BcolzDailyBarWriter</span></code></a></p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="zipline.data.bcolz_daily_bars.BcolzDailyBarReader.currency_codes">
<span class="sig-name descname"><span class="pre">currency_codes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sids</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/data/bcolz_daily_bars.html#BcolzDailyBarReader.currency_codes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.data.bcolz_daily_bars.BcolzDailyBarReader.currency_codes" title="Permalink to this definition">#</a></dt>
<dd><p>Get currencies in which prices are quoted for the requested sids.</p>
<p>Assumes that a sid’s prices are always quoted in a single currency.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>sids</strong> (<em>np.array</em><em>[</em><em>int64</em><em>]</em>) – Array of sids for which currencies are needed.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>currency_codes</strong> – Array of currency codes for listing currencies of
<code class="docutils literal notranslate"><span class="pre">sids</span></code>. Implementations should return None for sids whose
currency is unknown.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>np.array[<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.11)">object</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.data.bcolz_daily_bars.BcolzDailyBarReader.get_last_traded_dt">
<span class="sig-name descname"><span class="pre">get_last_traded_dt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">asset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">day</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/data/bcolz_daily_bars.html#BcolzDailyBarReader.get_last_traded_dt"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.data.bcolz_daily_bars.BcolzDailyBarReader.get_last_traded_dt" title="Permalink to this definition">#</a></dt>
<dd><p>Get the latest minute on or before <code class="docutils literal notranslate"><span class="pre">dt</span></code> in which <code class="docutils literal notranslate"><span class="pre">asset</span></code> traded.</p>
<p>If there are no trades on or before <code class="docutils literal notranslate"><span class="pre">dt</span></code>, returns <code class="docutils literal notranslate"><span class="pre">pd.NaT</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>asset</strong> (<em>zipline.asset.Asset</em>) – The asset for which to get the last traded minute.</p></li>
<li><p><strong>dt</strong> (<em>pd.Timestamp</em>) – The minute at which to start searching for the last traded minute.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>last_traded</strong> – The dt of the last trade for the given asset, using the input
dt as a vantage point.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pd.Timestamp</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.data.bcolz_daily_bars.BcolzDailyBarReader.get_value">
<span class="sig-name descname"><span class="pre">get_value</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/data/bcolz_daily_bars.html#BcolzDailyBarReader.get_value"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.data.bcolz_daily_bars.BcolzDailyBarReader.get_value" title="Permalink to this definition">#</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sid</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – The asset identifier.</p></li>
<li><p><strong>day</strong> (<em>datetime64-like</em>) – Midnight of the day for which data is requested.</p></li>
<li><p><strong>colname</strong> (<em>string</em>) – The price field. e.g. (‘open’, ‘high’, ‘low’, ‘close’, ‘volume’)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The spot price for colname of the given sid on the given day.
Raises a NoDataOnDate exception if the given day and sid is before
or after the date range of the equity.
Returns -1 if the day is within the date range, but the price is
0.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)">float</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="zipline.data.bcolz_daily_bars.BcolzDailyBarReader.last_available_dt">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">last_available_dt</span></span><a class="headerlink" href="#zipline.data.bcolz_daily_bars.BcolzDailyBarReader.last_available_dt" title="Permalink to this definition">#</a></dt>
<dd><p>returns: <strong>dt</strong> – The last session for which the reader can provide data.
:rtype: pd.Timestamp</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.data.bcolz_daily_bars.BcolzDailyBarReader.load_raw_arrays">
<span class="sig-name descname"><span class="pre">load_raw_arrays</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">columns</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_date</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_date</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">assets</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/data/bcolz_daily_bars.html#BcolzDailyBarReader.load_raw_arrays"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.data.bcolz_daily_bars.BcolzDailyBarReader.load_raw_arrays" title="Permalink to this definition">#</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>columns</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.11)"><em>list</em></a><em> of </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – ‘open’, ‘high’, ‘low’, ‘close’, or ‘volume’</p></li>
<li><p><strong>start_date</strong> (<em>Timestamp</em>) – Beginning of the window range.</p></li>
<li><p><strong>end_date</strong> (<em>Timestamp</em>) – End of the window range.</p></li>
<li><p><strong>assets</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.11)"><em>list</em></a><em> of </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – The asset identifiers in the window.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A list with an entry per field of ndarrays with shape
(minutes in range, sids) with a dtype of float64, containing the
values for the respective field over start and end dt range.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.11)">list</a> of np.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.data.bcolz_daily_bars.BcolzDailyBarReader.sid_day_index">
<span class="sig-name descname"><span class="pre">sid_day_index</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">day</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/data/bcolz_daily_bars.html#BcolzDailyBarReader.sid_day_index"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.data.bcolz_daily_bars.BcolzDailyBarReader.sid_day_index" title="Permalink to this definition">#</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sid</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – The asset identifier.</p></li>
<li><p><strong>day</strong> (<em>datetime64-like</em>) – Midnight of the day for which data is requested.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Index into the data tape for the given sid and day.
Raises a NoDataOnDate exception if the given day and sid is before
or after the date range of the equity.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)">int</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.data.adjustments.SQLiteAdjustmentReader">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.data.adjustments.</span></span><span class="sig-name descname"><span class="pre">SQLiteAdjustmentReader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">conn</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/data/adjustments.html#SQLiteAdjustmentReader"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.data.adjustments.SQLiteAdjustmentReader" title="Permalink to this definition">#</a></dt>
<dd><p>Loads adjustments based on corporate actions from a SQLite database.</p>
<p>Expects data written in the format output by <cite>SQLiteAdjustmentWriter</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>conn</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/sqlite3.html#sqlite3.Connection" title="(in Python v3.11)"><em>sqlite3.Connection</em></a>) – Connection from which to load data.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#zipline.data.adjustments.SQLiteAdjustmentWriter" title="zipline.data.adjustments.SQLiteAdjustmentWriter"><code class="xref py py-class docutils literal notranslate"><span class="pre">zipline.data.adjustments.SQLiteAdjustmentWriter</span></code></a></p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="zipline.data.adjustments.SQLiteAdjustmentReader.load_adjustments">
<span class="sig-name descname"><span class="pre">load_adjustments</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dates</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">assets</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">should_include_splits</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">should_include_mergers</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">should_include_dividends</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">adjustment_type</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/data/adjustments.html#SQLiteAdjustmentReader.load_adjustments"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.data.adjustments.SQLiteAdjustmentReader.load_adjustments" title="Permalink to this definition">#</a></dt>
<dd><p>Load collection of Adjustment objects from underlying adjustments db.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dates</strong> (<em>pd.DatetimeIndex</em>) – Dates for which adjustments are needed.</p></li>
<li><p><strong>assets</strong> (<em>pd.Int64Index</em>) – Assets for which adjustments are needed.</p></li>
<li><p><strong>should_include_splits</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Whether split adjustments should be included.</p></li>
<li><p><strong>should_include_mergers</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Whether merger adjustments should be included.</p></li>
<li><p><strong>should_include_dividends</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Whether dividend adjustments should be included.</p></li>
<li><p><strong>adjustment_type</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – Whether price adjustments, volume adjustments, or both, should be
included in the output.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>adjustments</strong> – A dictionary containing price and/or volume adjustment mappings
from index to adjustment objects to apply at that index.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)">dict</a>[str -&gt; dict[int -&gt; Adjustment]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.data.adjustments.SQLiteAdjustmentReader.unpack_db_to_component_dfs">
<span class="sig-name descname"><span class="pre">unpack_db_to_component_dfs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">convert_dates</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/data/adjustments.html#SQLiteAdjustmentReader.unpack_db_to_component_dfs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.data.adjustments.SQLiteAdjustmentReader.unpack_db_to_component_dfs" title="Permalink to this definition">#</a></dt>
<dd><p>Returns the set of known tables in the adjustments file in DataFrame
form.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>convert_dates</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><em>optional</em>) – By default, dates are returned in seconds since EPOCH. If
convert_dates is True, all ints in date columns will be converted
to datetimes.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>dfs</strong> – Dictionary which maps table name to the corresponding DataFrame
version of the table, where all date columns have been coerced back
from int to datetime.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict{str-&gt;DataFrame}</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.assets.AssetFinder">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.assets.</span></span><span class="sig-name descname"><span class="pre">AssetFinder</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">engine</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">future_chain_predicates={'AD':</span> <span class="pre">functools.partial(&lt;built-in</span> <span class="pre">function</span> <span class="pre">delivery_predicate&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">{'Z'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">'U'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">'H'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">'M'})</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">'BP':</span> <span class="pre">functools.partial(&lt;built-in</span> <span class="pre">function</span> <span class="pre">delivery_predicate&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">{'Z'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">'U'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">'H'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">'M'})</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">'CD':</span> <span class="pre">functools.partial(&lt;built-in</span> <span class="pre">function</span> <span class="pre">delivery_predicate&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">{'Z'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">'U'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">'H'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">'M'})</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">'EL':</span> <span class="pre">functools.partial(&lt;built-in</span> <span class="pre">function</span> <span class="pre">delivery_predicate&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">{'Z'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">'U'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">'H'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">'M'})</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">'GC':</span> <span class="pre">functools.partial(&lt;built-in</span> <span class="pre">function</span> <span class="pre">delivery_predicate&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">{'M'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">'Z'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">'Q'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">'V'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">'G'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">'J'})</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">'JY':</span> <span class="pre">functools.partial(&lt;built-in</span> <span class="pre">function</span> <span class="pre">delivery_predicate&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">{'Z'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">'U'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">'H'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">'M'})</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">'ME':</span> <span class="pre">functools.partial(&lt;built-in</span> <span class="pre">function</span> <span class="pre">delivery_predicate&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">{'Z'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">'U'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">'H'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">'M'})</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">'PA':</span> <span class="pre">functools.partial(&lt;built-in</span> <span class="pre">function</span> <span class="pre">delivery_predicate&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">{'Z'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">'U'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">'H'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">'M'})</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">'PL':</span> <span class="pre">functools.partial(&lt;built-in</span> <span class="pre">function</span> <span class="pre">delivery_predicate&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">{'J'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">'F'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">'V'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">'N'})</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">'SV':</span> <span class="pre">functools.partial(&lt;built-in</span> <span class="pre">function</span> <span class="pre">delivery_predicate&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">{'H'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">'N'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">'Z'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">'U'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">'K'})</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">'XG':</span> <span class="pre">functools.partial(&lt;built-in</span> <span class="pre">function</span> <span class="pre">delivery_predicate&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">{'M'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">'Z'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">'Q'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">'V'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">'G'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">'J'})</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">'YS':</span> <span class="pre">functools.partial(&lt;built-in</span> <span class="pre">function</span> <span class="pre">delivery_predicate&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">{'H'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">'N'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">'Z'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">'U'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">'K'})}</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/assets/assets.html#AssetFinder"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.assets.AssetFinder" title="Permalink to this definition">#</a></dt>
<dd><p>An AssetFinder is an interface to a database of Asset metadata written by
an <code class="docutils literal notranslate"><span class="pre">AssetDBWriter</span></code>.</p>
<p>This class provides methods for looking up assets by unique integer id or
by symbol.  For historical reasons, we refer to these unique ids as ‘sids’.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>engine</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em> or </em><em>SQLAlchemy.engine</em>) – An engine with a connection to the asset database to use, or a string
that can be parsed by SQLAlchemy as a URI.</p></li>
<li><p><strong>future_chain_predicates</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)"><em>dict</em></a>) – A dict mapping future root symbol to a predicate function which accepts</p></li>
<li><p><strong>be</strong> (<em>a contract as a parameter and returns whether</em><em> or </em><em>not the contract should</em>) – </p></li>
<li><p><strong>chain.</strong> (<em>included in the</em>) – </p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#zipline.assets.AssetDBWriter" title="zipline.assets.AssetDBWriter"><code class="xref py py-class docutils literal notranslate"><span class="pre">zipline.assets.AssetDBWriter</span></code></a></p>
</div>
<dl class="py property">
<dt class="sig sig-object py" id="zipline.assets.AssetFinder.equities_sids">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">equities_sids</span></span><a class="headerlink" href="#zipline.assets.AssetFinder.equities_sids" title="Permalink to this definition">#</a></dt>
<dd><p>All of the sids for equities in the asset finder.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.assets.AssetFinder.equities_sids_for_country_code">
<span class="sig-name descname"><span class="pre">equities_sids_for_country_code</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">country_code</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/assets/assets.html#AssetFinder.equities_sids_for_country_code"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.assets.AssetFinder.equities_sids_for_country_code" title="Permalink to this definition">#</a></dt>
<dd><p>Return all of the sids for a given country.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>country_code</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – An ISO 3166 alpha-2 country code.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The sids whose exchanges are in this country.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.11)">tuple</a>[<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)">int</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.assets.AssetFinder.equities_sids_for_exchange_name">
<span class="sig-name descname"><span class="pre">equities_sids_for_exchange_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">exchange_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/assets/assets.html#AssetFinder.equities_sids_for_exchange_name"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.assets.AssetFinder.equities_sids_for_exchange_name" title="Permalink to this definition">#</a></dt>
<dd><p>Return all of the sids for a given exchange_name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>exchange_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – </p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The sids whose exchanges are in this country.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.11)">tuple</a>[<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)">int</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="zipline.assets.AssetFinder.futures_sids">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">futures_sids</span></span><a class="headerlink" href="#zipline.assets.AssetFinder.futures_sids" title="Permalink to this definition">#</a></dt>
<dd><p>All of the sids for futures consracts in the asset finder.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.assets.AssetFinder.get_supplementary_field">
<span class="sig-name descname"><span class="pre">get_supplementary_field</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">as_of_date</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/assets/assets.html#AssetFinder.get_supplementary_field"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.assets.AssetFinder.get_supplementary_field" title="Permalink to this definition">#</a></dt>
<dd><p>Get the value of a supplementary field for an asset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sid</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – The sid of the asset to query.</p></li>
<li><p><strong>field_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – Name of the supplementary field.</p></li>
<li><p><strong>as_of_date</strong> (<em>pd.Timestamp</em><em>, </em><em>None</em>) – The last known value on this date is returned. If None, a
value is returned only if we’ve only ever had one value for
this sid. If None and we’ve had multiple values,
MultipleValuesFoundForSid is raised.</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>NoValueForSid</strong> – If we have no values for this asset, or no values was known
    on this as_of_date.</p></li>
<li><p><strong>MultipleValuesFoundForSid</strong> – If we have had multiple values for this asset over time, and
    None was passed for as_of_date.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.assets.AssetFinder.group_by_type">
<span class="sig-name descname"><span class="pre">group_by_type</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sids</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/assets/assets.html#AssetFinder.group_by_type"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.assets.AssetFinder.group_by_type" title="Permalink to this definition">#</a></dt>
<dd><p>Group a list of sids by asset type.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>sids</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.11)"><em>list</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>]</em>) – </p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>types</strong> – A dict mapping unique asset types to lists of sids drawn from sids.
If we fail to look up an asset, we assign it a key of None.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)">dict</a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a> or None -&gt; list[<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)">int</a>]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.assets.AssetFinder.lifetimes">
<span class="sig-name descname"><span class="pre">lifetimes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dates</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_start_date</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">country_codes</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/assets/assets.html#AssetFinder.lifetimes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.assets.AssetFinder.lifetimes" title="Permalink to this definition">#</a></dt>
<dd><p>Compute a DataFrame representing asset lifetimes for the specified date
range.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dates</strong> (<em>pd.DatetimeIndex</em>) – The dates for which to compute lifetimes.</p></li>
<li><p><strong>include_start_date</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – <p>Whether or not to count the asset as alive on its start_date.</p>
<p>This is useful in a backtesting context where <cite>lifetimes</cite> is being
used to signify “do I have data for this asset as of the morning of
this date?”  For many financial metrics, (e.g. daily close), data
isn’t available for an asset until the end of the asset’s first
day.</p>
</p></li>
<li><p><strong>country_codes</strong> (<em>iterable</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>]</em>) – The country codes to get lifetimes for.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>lifetimes</strong> – A frame of dtype bool with <cite>dates</cite> as index and an Int64Index of
assets as columns.  The value at <cite>lifetimes.loc[date, asset]</cite> will
be True iff <cite>asset</cite> existed on <cite>date</cite>.  If <cite>include_start_date</cite> is
False, then lifetimes.loc[date, asset] will be false when date ==
asset.start_date.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pd.DataFrame</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.putmask.html#numpy.putmask" title="(in NumPy v1.25)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.putmask</span></code></a>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">zipline.pipeline.engine.SimplePipelineEngine._compute_root_mask</span></code></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.assets.AssetFinder.lookup_asset_types">
<span class="sig-name descname"><span class="pre">lookup_asset_types</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sids</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/assets/assets.html#AssetFinder.lookup_asset_types"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.assets.AssetFinder.lookup_asset_types" title="Permalink to this definition">#</a></dt>
<dd><p>Retrieve asset types for a list of sids.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>sids</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.11)"><em>list</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>]</em>) – </p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>types</strong> – Asset types for the provided sids.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)">dict</a>[sid -&gt; str or None]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.assets.AssetFinder.lookup_future_symbol">
<span class="sig-name descname"><span class="pre">lookup_future_symbol</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">symbol</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/assets/assets.html#AssetFinder.lookup_future_symbol"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.assets.AssetFinder.lookup_future_symbol" title="Permalink to this definition">#</a></dt>
<dd><p>Lookup a future contract by symbol.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>symbol</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – The symbol of the desired contract.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>future</strong> – The future contract referenced by <code class="docutils literal notranslate"><span class="pre">symbol</span></code>.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#zipline.assets.Future" title="zipline.assets.Future">Future</a></p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>SymbolNotFound</strong> – Raised when no contract named ‘symbol’ is found.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.assets.AssetFinder.lookup_generic">
<span class="sig-name descname"><span class="pre">lookup_generic</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">as_of_date</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">country_code</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/assets/assets.html#AssetFinder.lookup_generic"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.assets.AssetFinder.lookup_generic" title="Permalink to this definition">#</a></dt>
<dd><p>Convert an object into an Asset or sequence of Assets.</p>
<p>This method exists primarily as a convenience for implementing
user-facing APIs that can handle multiple kinds of input.  It should
not be used for internal code where we already know the expected types
of our inputs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obj</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><a class="reference internal" href="#zipline.assets.Asset" title="zipline.assets.Asset"><em>Asset</em></a><em>, </em><em>ContinuousFuture</em><em>, or </em><em>iterable</em>) – The object to be converted into one or more Assets.
Integers are interpreted as sids. Strings are interpreted as
tickers. Assets and ContinuousFutures are returned unchanged.</p></li>
<li><p><strong>as_of_date</strong> (<em>pd.Timestamp</em><em> or </em><em>None</em>) – Timestamp to use to disambiguate ticker lookups. Has the same
semantics as in <cite>lookup_symbol</cite>.</p></li>
<li><p><strong>country_code</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em> or </em><em>None</em>) – ISO-3166 country code to use to disambiguate ticker lookups. Has
the same semantics as in <cite>lookup_symbol</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><p><strong>matches, missing</strong> –</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">matches</span></code> is the result of the conversion. <code class="docutils literal notranslate"><span class="pre">missing</span></code> is a list</dt><dd><p>containing any values that couldn’t be resolved. If <code class="docutils literal notranslate"><span class="pre">obj</span></code> is not
an iterable, <code class="docutils literal notranslate"><span class="pre">missing</span></code> will be an empty list.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.11)">tuple</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.assets.AssetFinder.lookup_symbol">
<span class="sig-name descname"><span class="pre">lookup_symbol</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">symbol</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">as_of_date</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fuzzy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">country_code</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/assets/assets.html#AssetFinder.lookup_symbol"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.assets.AssetFinder.lookup_symbol" title="Permalink to this definition">#</a></dt>
<dd><p>Lookup an equity by symbol.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>symbol</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – The ticker symbol to resolve.</p></li>
<li><p><strong>as_of_date</strong> (<a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.datetime" title="(in Python v3.11)"><em>datetime.datetime</em></a><em> or </em><em>None</em>) – Look up the last owner of this symbol as of this datetime.
If <code class="docutils literal notranslate"><span class="pre">as_of_date</span></code> is None, then this can only resolve the equity
if exactly one equity has ever owned the ticker.</p></li>
<li><p><strong>fuzzy</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><em>optional</em>) – Should fuzzy symbol matching be used? Fuzzy symbol matching
attempts to resolve differences in representations for
shareclasses. For example, some people may represent the <code class="docutils literal notranslate"><span class="pre">A</span></code>
shareclass of <code class="docutils literal notranslate"><span class="pre">BRK</span></code> as <code class="docutils literal notranslate"><span class="pre">BRK.A</span></code>, where others could write
<code class="docutils literal notranslate"><span class="pre">BRK_A</span></code>.</p></li>
<li><p><strong>country_code</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em> or </em><em>None</em><em>, </em><em>optional</em>) – The country to limit searches to. If not provided, the search will
span all countries which increases the likelihood of an ambiguous
lookup.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>equity</strong> – The equity that held <code class="docutils literal notranslate"><span class="pre">symbol</span></code> on the given <code class="docutils literal notranslate"><span class="pre">as_of_date</span></code>, or the
only equity to hold <code class="docutils literal notranslate"><span class="pre">symbol</span></code> if <code class="docutils literal notranslate"><span class="pre">as_of_date</span></code> is None.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#zipline.assets.Equity" title="zipline.assets.Equity">Equity</a></p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>SymbolNotFound</strong> – Raised when no equity has ever held the given symbol.</p></li>
<li><p><strong>MultipleSymbolsFound</strong> – Raised when no <code class="docutils literal notranslate"><span class="pre">as_of_date</span></code> is given and more than one equity
    has held <code class="docutils literal notranslate"><span class="pre">symbol</span></code>. This is also raised when <code class="docutils literal notranslate"><span class="pre">fuzzy=True</span></code> and
    there are multiple candidates for the given <code class="docutils literal notranslate"><span class="pre">symbol</span></code> on the
    <code class="docutils literal notranslate"><span class="pre">as_of_date</span></code>. Also raised when no <code class="docutils literal notranslate"><span class="pre">country_code</span></code> is given and
    the symbol is ambiguous across multiple countries.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.assets.AssetFinder.lookup_symbols">
<span class="sig-name descname"><span class="pre">lookup_symbols</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">symbols</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">as_of_date</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fuzzy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">country_code</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/assets/assets.html#AssetFinder.lookup_symbols"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.assets.AssetFinder.lookup_symbols" title="Permalink to this definition">#</a></dt>
<dd><p>Lookup a list of equities by symbol.</p>
<p>Equivalent to:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">finder</span><span class="o">.</span><span class="n">lookup_symbol</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">as_of</span><span class="p">,</span> <span class="n">fuzzy</span><span class="p">)</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">symbols</span><span class="p">]</span>
</pre></div>
</div>
<p>but potentially faster because repeated lookups are memoized.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>symbols</strong> (<em>sequence</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>]</em>) – Sequence of ticker symbols to resolve.</p></li>
<li><p><strong>as_of_date</strong> (<em>pd.Timestamp</em>) – Forwarded to <code class="docutils literal notranslate"><span class="pre">lookup_symbol</span></code>.</p></li>
<li><p><strong>fuzzy</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><em>optional</em>) – Forwarded to <code class="docutils literal notranslate"><span class="pre">lookup_symbol</span></code>.</p></li>
<li><p><strong>country_code</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em> or </em><em>None</em><em>, </em><em>optional</em>) – The country to limit searches to. If not provided, the search will
span all countries which increases the likelihood of an ambiguous
lookup.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>equities</strong></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.11)">list</a>[<a class="reference internal" href="#zipline.assets.Equity" title="zipline.assets.Equity">Equity</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.assets.AssetFinder.retrieve_all">
<span class="sig-name descname"><span class="pre">retrieve_all</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sids</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_none</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/assets/assets.html#AssetFinder.retrieve_all"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.assets.AssetFinder.retrieve_all" title="Permalink to this definition">#</a></dt>
<dd><p>Retrieve all assets in <cite>sids</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sids</strong> (<em>iterable</em><em> of </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – Assets to retrieve.</p></li>
<li><p><strong>default_none</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – If True, return None for failed lookups.
If False, raise <cite>SidsNotFound</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>assets</strong> – A list of the same length as <cite>sids</cite> containing Assets (or Nones)
corresponding to the requested sids.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.11)">list</a>[<a class="reference internal" href="#zipline.assets.Asset" title="zipline.assets.Asset">Asset</a> or None]</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>SidsNotFound</strong> – When a requested sid is not found and default_none=False.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.assets.AssetFinder.retrieve_asset">
<span class="sig-name descname"><span class="pre">retrieve_asset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_none</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/assets/assets.html#AssetFinder.retrieve_asset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.assets.AssetFinder.retrieve_asset" title="Permalink to this definition">#</a></dt>
<dd><p>Retrieve the Asset for a given sid.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.assets.AssetFinder.retrieve_equities">
<span class="sig-name descname"><span class="pre">retrieve_equities</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sids</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/assets/assets.html#AssetFinder.retrieve_equities"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.assets.AssetFinder.retrieve_equities" title="Permalink to this definition">#</a></dt>
<dd><p>Retrieve Equity objects for a list of sids.</p>
<p>Users generally shouldn’t need to this method (instead, they should
prefer the more general/friendly <cite>retrieve_assets</cite>), but it has a
documented interface and tests because it’s used upstream.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>sids</strong> (<em>iterable</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>]</em>) – </p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>equities</strong></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)">dict</a>[int -&gt; Equity]</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>EquitiesNotFound</strong> – When any requested asset isn’t found.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.assets.AssetFinder.retrieve_futures_contracts">
<span class="sig-name descname"><span class="pre">retrieve_futures_contracts</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sids</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/assets/assets.html#AssetFinder.retrieve_futures_contracts"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.assets.AssetFinder.retrieve_futures_contracts" title="Permalink to this definition">#</a></dt>
<dd><p>Retrieve Future objects for an iterable of sids.</p>
<p>Users generally shouldn’t need to this method (instead, they should
prefer the more general/friendly <cite>retrieve_assets</cite>), but it has a
documented interface and tests because it’s used upstream.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>sids</strong> (<em>iterable</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>]</em>) – </p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>equities</strong></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)">dict</a>[int -&gt; Equity]</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>EquitiesNotFound</strong> – When any requested asset isn’t found.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="zipline.assets.AssetFinder.sids">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">sids</span></span><a class="headerlink" href="#zipline.assets.AssetFinder.sids" title="Permalink to this definition">#</a></dt>
<dd><p>All the sids in the asset finder.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.data.data_portal.DataPortal">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.data.data_portal.</span></span><span class="sig-name descname"><span class="pre">DataPortal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">asset_finder</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trading_calendar</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">first_trading_day</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">equity_daily_reader</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">equity_minute_reader</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">future_daily_reader</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">future_minute_reader</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">adjustment_reader</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">last_available_session</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">last_available_minute</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minute_history_prefetch_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1560</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">daily_history_prefetch_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">40</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/data/data_portal.html#DataPortal"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.data.data_portal.DataPortal" title="Permalink to this definition">#</a></dt>
<dd><p>Interface to all of the data that a zipline simulation needs.</p>
<p>This is used by the simulation runner to answer questions about the data,
like getting the prices of assets on a given day or to service history
calls.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>asset_finder</strong> (<a class="reference internal" href="#zipline.assets.AssetFinder" title="zipline.assets.assets.AssetFinder"><em>zipline.assets.assets.AssetFinder</em></a>) – The AssetFinder instance used to resolve assets.</p></li>
<li><p><strong>trading_calendar</strong> (<em>zipline.utils.calendar.exchange_calendar.TradingCalendar</em>) – The calendar instance used to provide minute-&gt;session information.</p></li>
<li><p><strong>first_trading_day</strong> (<em>pd.Timestamp</em>) – The first trading day for the simulation.</p></li>
<li><p><strong>equity_daily_reader</strong> (<a class="reference internal" href="#zipline.data.bcolz_daily_bars.BcolzDailyBarReader" title="zipline.data.bcolz_daily_bars.BcolzDailyBarReader"><em>BcolzDailyBarReader</em></a><em>, </em><em>optional</em>) – The daily bar reader for equities. This will be used to service
daily data backtests or daily history calls in a minute backetest.
If a daily bar reader is not provided but a minute bar reader is,
the minutes will be rolled up to serve the daily requests.</p></li>
<li><p><strong>equity_minute_reader</strong> (<em>BcolzMinuteBarReader</em><em>, </em><em>optional</em>) – The minute bar reader for equities. This will be used to service
minute data backtests or minute history calls. This can be used
to serve daily calls if no daily bar reader is provided.</p></li>
<li><p><strong>future_daily_reader</strong> (<a class="reference internal" href="#zipline.data.bcolz_daily_bars.BcolzDailyBarReader" title="zipline.data.bcolz_daily_bars.BcolzDailyBarReader"><em>BcolzDailyBarReader</em></a><em>, </em><em>optional</em>) – The daily bar ready for futures. This will be used to service
daily data backtests or daily history calls in a minute backetest.
If a daily bar reader is not provided but a minute bar reader is,
the minutes will be rolled up to serve the daily requests.</p></li>
<li><p><strong>future_minute_reader</strong> (<em>BcolzFutureMinuteBarReader</em><em>, </em><em>optional</em>) – The minute bar reader for futures. This will be used to service
minute data backtests or minute history calls. This can be used
to serve daily calls if no daily bar reader is provided.</p></li>
<li><p><strong>adjustment_reader</strong> (<a class="reference internal" href="#zipline.data.adjustments.SQLiteAdjustmentWriter" title="zipline.data.adjustments.SQLiteAdjustmentWriter"><em>SQLiteAdjustmentWriter</em></a><em>, </em><em>optional</em>) – The adjustment reader. This is used to apply splits, dividends, and
other adjustment data to the raw data from the readers.</p></li>
<li><p><strong>last_available_session</strong> (<em>pd.Timestamp</em><em>, </em><em>optional</em>) – The last session to make available in session-level data.</p></li>
<li><p><strong>last_available_minute</strong> (<em>pd.Timestamp</em><em>, </em><em>optional</em>) – The last minute to make available in minute-level data.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="zipline.data.data_portal.DataPortal.get_adjusted_value">
<span class="sig-name descname"><span class="pre">get_adjusted_value</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">asset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">perspective_dt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_frequency</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spot_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/data/data_portal.html#DataPortal.get_adjusted_value"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.data.data_portal.DataPortal.get_adjusted_value" title="Permalink to this definition">#</a></dt>
<dd><p>Returns a scalar value representing the value
of the desired asset’s field at the given dt with adjustments applied.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>asset</strong> (<a class="reference internal" href="#zipline.assets.Asset" title="zipline.assets.Asset"><em>Asset</em></a>) – The asset whose data is desired.</p></li>
<li><p><strong>field</strong> (<em>{'open'</em><em>, </em><em>'high'</em><em>, </em><em>'low'</em><em>, </em><em>'close'</em><em>, </em><em>'volume'</em><em>,                  </em><em>'price'</em><em>, </em><em>'last_traded'}</em>) – The desired field of the asset.</p></li>
<li><p><strong>dt</strong> (<em>pd.Timestamp</em>) – The timestamp for the desired value.</p></li>
<li><p><strong>perspective_dt</strong> (<em>pd.Timestamp</em>) – The timestamp from which the data is being viewed back from.</p></li>
<li><p><strong>data_frequency</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – The frequency of the data to query; i.e. whether the data is
‘daily’ or ‘minute’ bars</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>value</strong> – The value of the given <code class="docutils literal notranslate"><span class="pre">field</span></code> for <code class="docutils literal notranslate"><span class="pre">asset</span></code> at <code class="docutils literal notranslate"><span class="pre">dt</span></code> with any
adjustments known by <code class="docutils literal notranslate"><span class="pre">perspective_dt</span></code> applied. The return type is
based on the <code class="docutils literal notranslate"><span class="pre">field</span></code> requested. If the field is one of ‘open’,
‘high’, ‘low’, ‘close’, or ‘price’, the value will be a float. If
the <code class="docutils literal notranslate"><span class="pre">field</span></code> is ‘volume’ the value will be a int. If the <code class="docutils literal notranslate"><span class="pre">field</span></code>
is ‘last_traded’ the value will be a Timestamp.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)">float</a>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)">int</a>, or pd.Timestamp</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.data.data_portal.DataPortal.get_adjustments">
<span class="sig-name descname"><span class="pre">get_adjustments</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">assets</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">perspective_dt</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/data/data_portal.html#DataPortal.get_adjustments"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.data.data_portal.DataPortal.get_adjustments" title="Permalink to this definition">#</a></dt>
<dd><p>Returns a list of adjustments between the dt and perspective_dt for the
given field and list of assets</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>assets</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.11)"><em>list</em></a><em> of </em><em>type Asset</em><em>, or </em><a class="reference internal" href="#zipline.assets.Asset" title="zipline.assets.Asset"><em>Asset</em></a>) – The asset, or assets whose adjustments are desired.</p></li>
<li><p><strong>field</strong> (<em>{'open'</em><em>, </em><em>'high'</em><em>, </em><em>'low'</em><em>, </em><em>'close'</em><em>, </em><em>'volume'</em><em>,                  </em><em>'price'</em><em>, </em><em>'last_traded'}</em>) – The desired field of the asset.</p></li>
<li><p><strong>dt</strong> (<em>pd.Timestamp</em>) – The timestamp for the desired value.</p></li>
<li><p><strong>perspective_dt</strong> (<em>pd.Timestamp</em>) – The timestamp from which the data is being viewed back from.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>adjustments</strong> – The adjustments to that field.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.11)">list</a>[Adjustment]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.data.data_portal.DataPortal.get_current_future_chain">
<span class="sig-name descname"><span class="pre">get_current_future_chain</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">continuous_future</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dt</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/data/data_portal.html#DataPortal.get_current_future_chain"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.data.data_portal.DataPortal.get_current_future_chain" title="Permalink to this definition">#</a></dt>
<dd><p>Retrieves the future chain for the contract at the given <cite>dt</cite> according
the <cite>continuous_future</cite> specification.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>future_chain</strong> – A list of active futures, where the first index is the current
contract specified by the continuous future definition, the second
is the next upcoming contract and so on.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.11)">list</a>[<a class="reference internal" href="#zipline.assets.Future" title="zipline.assets.Future">Future</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.data.data_portal.DataPortal.get_fetcher_assets">
<span class="sig-name descname"><span class="pre">get_fetcher_assets</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dt</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/data/data_portal.html#DataPortal.get_fetcher_assets"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.data.data_portal.DataPortal.get_fetcher_assets" title="Permalink to this definition">#</a></dt>
<dd><p>Returns a list of assets for the current date, as defined by the
fetcher data.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>list</strong></p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>a list of Asset objects.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.data.data_portal.DataPortal.get_history_window">
<span class="sig-name descname"><span class="pre">get_history_window</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">assets</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_dt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bar_count</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">frequency</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_frequency</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ffill</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/data/data_portal.html#DataPortal.get_history_window"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.data.data_portal.DataPortal.get_history_window" title="Permalink to this definition">#</a></dt>
<dd><p>Public API method that returns a dataframe containing the requested
history window.  Data is fully adjusted.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>assets</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.11)"><em>list</em></a><em> of </em><em>zipline.data.Asset objects</em>) – The assets whose data is desired.</p></li>
<li><p><strong>bar_count</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – The number of bars desired.</p></li>
<li><p><strong>frequency</strong> (<em>string</em>) – “1d” or “1m”</p></li>
<li><p><strong>field</strong> (<em>string</em>) – The desired field of the asset.</p></li>
<li><p><strong>data_frequency</strong> (<em>string</em>) – The frequency of the data to query; i.e. whether the data is
‘daily’ or ‘minute’ bars.</p></li>
<li><p><strong>ffill</strong> (<em>boolean</em>) – Forward-fill missing values. Only has effect if field
is ‘price’.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>A dataframe containing the requested data.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.data.data_portal.DataPortal.get_last_traded_dt">
<span class="sig-name descname"><span class="pre">get_last_traded_dt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">asset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_frequency</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/data/data_portal.html#DataPortal.get_last_traded_dt"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.data.data_portal.DataPortal.get_last_traded_dt" title="Permalink to this definition">#</a></dt>
<dd><p>Given an asset and dt, returns the last traded dt from the viewpoint
of the given dt.</p>
<p>If there is a trade on the dt, the answer is dt provided.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.data.data_portal.DataPortal.get_scalar_asset_spot_value">
<span class="sig-name descname"><span class="pre">get_scalar_asset_spot_value</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">asset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_frequency</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/data/data_portal.html#DataPortal.get_scalar_asset_spot_value"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.data.data_portal.DataPortal.get_scalar_asset_spot_value" title="Permalink to this definition">#</a></dt>
<dd><p>Public API method that returns a scalar value representing the value
of the desired asset’s field at either the given dt.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>assets</strong> (<a class="reference internal" href="#zipline.assets.Asset" title="zipline.assets.Asset"><em>Asset</em></a>) – The asset or assets whose data is desired. This cannot be
an arbitrary AssetConvertible.</p></li>
<li><p><strong>field</strong> (<em>{'open'</em><em>, </em><em>'high'</em><em>, </em><em>'low'</em><em>, </em><em>'close'</em><em>, </em><em>'volume'</em><em>,</em>) – ‘price’, ‘last_traded’}
The desired field of the asset.</p></li>
<li><p><strong>dt</strong> (<em>pd.Timestamp</em>) – The timestamp for the desired value.</p></li>
<li><p><strong>data_frequency</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – The frequency of the data to query; i.e. whether the data is
‘daily’ or ‘minute’ bars</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>value</strong> – The spot value of <code class="docutils literal notranslate"><span class="pre">field</span></code> for <code class="docutils literal notranslate"><span class="pre">asset</span></code> The return type is based
on the <code class="docutils literal notranslate"><span class="pre">field</span></code> requested. If the field is one of ‘open’, ‘high’,
‘low’, ‘close’, or ‘price’, the value will be a float. If the
<code class="docutils literal notranslate"><span class="pre">field</span></code> is ‘volume’ the value will be a int. If the <code class="docutils literal notranslate"><span class="pre">field</span></code> is
‘last_traded’ the value will be a Timestamp.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)">float</a>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)">int</a>, or pd.Timestamp</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.data.data_portal.DataPortal.get_splits">
<span class="sig-name descname"><span class="pre">get_splits</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">assets</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dt</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/data/data_portal.html#DataPortal.get_splits"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.data.data_portal.DataPortal.get_splits" title="Permalink to this definition">#</a></dt>
<dd><p>Returns any splits for the given sids and the given dt.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>assets</strong> (<em>container</em>) – Assets for which we want splits.</p></li>
<li><p><strong>dt</strong> (<em>pd.Timestamp</em>) – The date for which we are checking for splits. Note: this is
expected to be midnight UTC.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>splits</strong> – List of splits, where each split is a (asset, ratio) tuple.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.11)">list</a>[(asset, <a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)">float</a>)]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.data.data_portal.DataPortal.get_spot_value">
<span class="sig-name descname"><span class="pre">get_spot_value</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">assets</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_frequency</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/data/data_portal.html#DataPortal.get_spot_value"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.data.data_portal.DataPortal.get_spot_value" title="Permalink to this definition">#</a></dt>
<dd><p>Public API method that returns a scalar value representing the value
of the desired asset’s field at either the given dt.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>assets</strong> (<a class="reference internal" href="#zipline.assets.Asset" title="zipline.assets.Asset"><em>Asset</em></a><em>, </em><em>ContinuousFuture</em><em>, or </em><em>iterable</em><em> of </em><em>same.</em>) – The asset or assets whose data is desired.</p></li>
<li><p><strong>field</strong> (<em>{'open'</em><em>, </em><em>'high'</em><em>, </em><em>'low'</em><em>, </em><em>'close'</em><em>, </em><em>'volume'</em><em>,</em>) – ‘price’, ‘last_traded’}
The desired field of the asset.</p></li>
<li><p><strong>dt</strong> (<em>pd.Timestamp</em>) – The timestamp for the desired value.</p></li>
<li><p><strong>data_frequency</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – The frequency of the data to query; i.e. whether the data is
‘daily’ or ‘minute’ bars</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>value</strong> – The spot value of <code class="docutils literal notranslate"><span class="pre">field</span></code> for <code class="docutils literal notranslate"><span class="pre">asset</span></code> The return type is based
on the <code class="docutils literal notranslate"><span class="pre">field</span></code> requested. If the field is one of ‘open’, ‘high’,
‘low’, ‘close’, or ‘price’, the value will be a float. If the
<code class="docutils literal notranslate"><span class="pre">field</span></code> is ‘volume’ the value will be a int. If the <code class="docutils literal notranslate"><span class="pre">field</span></code> is
‘last_traded’ the value will be a Timestamp.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)">float</a>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)">int</a>, or pd.Timestamp</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.data.data_portal.DataPortal.get_stock_dividends">
<span class="sig-name descname"><span class="pre">get_stock_dividends</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trading_days</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/data/data_portal.html#DataPortal.get_stock_dividends"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.data.data_portal.DataPortal.get_stock_dividends" title="Permalink to this definition">#</a></dt>
<dd><p>Returns all the stock dividends for a specific sid that occur
in the given trading range.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sid</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – The asset whose stock dividends should be returned.</p></li>
<li><p><strong>trading_days</strong> (<em>pd.DatetimeIndex</em>) – The trading range.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>list</strong> (<em>A list of objects with all relevant attributes populated.</em>)</p></li>
<li><p><em>All timestamp fields are converted to pd.Timestamps.</em></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.data.data_portal.DataPortal.handle_extra_source">
<span class="sig-name descname"><span class="pre">handle_extra_source</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sim_params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/data/data_portal.html#DataPortal.handle_extra_source"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.data.data_portal.DataPortal.handle_extra_source" title="Permalink to this definition">#</a></dt>
<dd><p>Extra sources always have a sid column.</p>
<p>We expand the given data (by forward filling) to the full range of
the simulation dates, so that lookup is fast during simulation.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.sources.benchmark_source.BenchmarkSource">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.sources.benchmark_source.</span></span><span class="sig-name descname"><span class="pre">BenchmarkSource</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">benchmark_asset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trading_calendar</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sessions</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_portal</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">emission_rate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'daily'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">benchmark_returns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/sources/benchmark_source.html#BenchmarkSource"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.sources.benchmark_source.BenchmarkSource" title="Permalink to this definition">#</a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="zipline.sources.benchmark_source.BenchmarkSource.daily_returns">
<span class="sig-name descname"><span class="pre">daily_returns</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">start</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/sources/benchmark_source.html#BenchmarkSource.daily_returns"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.sources.benchmark_source.BenchmarkSource.daily_returns" title="Permalink to this definition">#</a></dt>
<dd><p>Returns the daily returns for the given period.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>start</strong> (<em>datetime</em>) – The inclusive starting session label.</p></li>
<li><p><strong>end</strong> (<em>datetime</em><em>, </em><em>optional</em>) – The inclusive ending session label. If not provided, treat
<code class="docutils literal notranslate"><span class="pre">start</span></code> as a scalar key.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>returns</strong> – The returns in the given period. The index will be the trading
calendar in the range [start, end]. If just <code class="docutils literal notranslate"><span class="pre">start</span></code> is provided,
return the scalar value on that day.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pd.Series or <a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)">float</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.sources.benchmark_source.BenchmarkSource.get_range">
<span class="sig-name descname"><span class="pre">get_range</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">start_dt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_dt</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/sources/benchmark_source.html#BenchmarkSource.get_range"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.sources.benchmark_source.BenchmarkSource.get_range" title="Permalink to this definition">#</a></dt>
<dd><p>Look up the returns for a given period.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>start_dt</strong> (<em>datetime</em>) – The inclusive start label.</p></li>
<li><p><strong>end_dt</strong> (<em>datetime</em>) – The inclusive end label.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>returns</strong> – The series of returns.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pd.Series</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#zipline.sources.benchmark_source.BenchmarkSource.daily_returns" title="zipline.sources.benchmark_source.BenchmarkSource.daily_returns"><code class="xref py py-class docutils literal notranslate"><span class="pre">zipline.sources.benchmark_source.BenchmarkSource.daily_returns</span></code></a></p>
<dl class="simple">
<dt><code class="xref py py-obj docutils literal notranslate"></code></dt><dd><p>This method expects minute inputs if <code class="docutils literal notranslate"><span class="pre">emission_rate</span> <span class="pre">==</span> <span class="pre">'minute'</span></code> and session labels when <code class="docutils literal notranslate"><span class="pre">emission_rate</span> <span class="pre">==</span> <span class="pre">'daily</span></code>.</p>
</dd>
</dl>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.sources.benchmark_source.BenchmarkSource.get_value">
<span class="sig-name descname"><span class="pre">get_value</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dt</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/sources/benchmark_source.html#BenchmarkSource.get_value"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.sources.benchmark_source.BenchmarkSource.get_value" title="Permalink to this definition">#</a></dt>
<dd><p>Look up the returns for a given dt.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>dt</strong> (<em>datetime</em>) – The label to look up.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>returns</strong> – The returns at the given dt or session.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)">float</a></p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#zipline.sources.benchmark_source.BenchmarkSource.daily_returns" title="zipline.sources.benchmark_source.BenchmarkSource.daily_returns"><code class="xref py py-class docutils literal notranslate"><span class="pre">zipline.sources.benchmark_source.BenchmarkSource.daily_returns</span></code></a></p>
<dl class="simple">
<dt><code class="xref py py-obj docutils literal notranslate"></code></dt><dd><p>This method expects minute inputs if <code class="docutils literal notranslate"><span class="pre">emission_rate</span> <span class="pre">==</span> <span class="pre">'minute'</span></code> and session labels when <code class="docutils literal notranslate"><span class="pre">emission_rate</span> <span class="pre">==</span> <span class="pre">'daily</span></code>.</p>
</dd>
</dl>
</div>
</dd></dl>

</dd></dl>

</section>
<section id="bundles">
<h3>Bundles<a class="headerlink" href="#bundles" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="zipline.data.bundles.register">
<span class="sig-prename descclassname"><span class="pre">zipline.data.bundles.</span></span><span class="sig-name descname"><span class="pre">register</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'__no__default__'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">f</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'__no__default__'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">calendar_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'NYSE'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_session</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_session</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minutes_per_day</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">390</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">create_writers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.data.bundles.register" title="Permalink to this definition">#</a></dt>
<dd><p>Register a data bundle ingest function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – The name of the bundle.</p></li>
<li><p><strong>f</strong> (<em>callable</em>) – <p>The ingest function. This function will be passed:</p>
<blockquote>
<div><dl class="simple">
<dt>environ<span class="classifier">mapping</span></dt><dd><p>The environment this is being run with.</p>
</dd>
<dt>asset_db_writer<span class="classifier">AssetDBWriter</span></dt><dd><p>The asset db writer to write into.</p>
</dd>
<dt>minute_bar_writer<span class="classifier">BcolzMinuteBarWriter</span></dt><dd><p>The minute bar writer to write into.</p>
</dd>
<dt>daily_bar_writer<span class="classifier">BcolzDailyBarWriter</span></dt><dd><p>The daily bar writer to write into.</p>
</dd>
<dt>adjustment_writer<span class="classifier">SQLiteAdjustmentWriter</span></dt><dd><p>The adjustment db writer to write into.</p>
</dd>
<dt>calendar<span class="classifier">trading_calendars.TradingCalendar</span></dt><dd><p>The trading calendar to ingest for.</p>
</dd>
<dt>start_session<span class="classifier">pd.Timestamp</span></dt><dd><p>The first session of data to ingest.</p>
</dd>
<dt>end_session<span class="classifier">pd.Timestamp</span></dt><dd><p>The last session of data to ingest.</p>
</dd>
<dt>cache<span class="classifier">DataFrameCache</span></dt><dd><p>A mapping object to temporarily store dataframes.
This should be used to cache intermediates in case the load
fails. This will be automatically cleaned up after a
successful load.</p>
</dd>
<dt>show_progress<span class="classifier">bool</span></dt><dd><p>Show the progress for the current load where possible.</p>
</dd>
</dl>
</div></blockquote>
</p></li>
<li><p><strong>calendar_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>optional</em>) – The name of a calendar used to align bundle data.
Default is ‘NYSE’.</p></li>
<li><p><strong>start_session</strong> (<em>pd.Timestamp</em><em>, </em><em>optional</em>) – The first session for which we want data. If not provided,
or if the date lies outside the range supported by the
calendar, the first_session of the calendar is used.</p></li>
<li><p><strong>end_session</strong> (<em>pd.Timestamp</em><em>, </em><em>optional</em>) – The last session for which we want data. If not provided,
or if the date lies outside the range supported by the
calendar, the last_session of the calendar is used.</p></li>
<li><p><strong>minutes_per_day</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>, </em><em>optional</em>) – The number of minutes in each normal trading day.</p></li>
<li><p><strong>create_writers</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><em>optional</em>) – Should the ingest machinery create the writers for the ingest
function. This can be disabled as an optimization for cases where
they are not needed, like the <code class="docutils literal notranslate"><span class="pre">quantopian-quandl</span></code> bundle.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>This function my be used as a decorator, for example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@register</span><span class="p">(</span><span class="s1">&#39;quandl&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">quandl_ingest_function</span><span class="p">(</span><span class="o">...</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#zipline.data.bundles.bundles" title="zipline.data.bundles.bundles"><code class="xref py py-obj docutils literal notranslate"><span class="pre">zipline.data.bundles.bundles</span></code></a></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="zipline.data.bundles.ingest">
<span class="sig-prename descclassname"><span class="pre">zipline.data.bundles.</span></span><span class="sig-name descname"><span class="pre">ingest</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">environ</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">os.environ</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">date</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_progress</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.data.bundles.ingest" title="Permalink to this definition">#</a></dt>
<dd><p>Ingest data for a given bundle.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – The name of the bundle.</p></li>
<li><p><strong>environ</strong> (<em>mapping</em><em>, </em><em>optional</em>) – The environment variables. By default this is os.environ.</p></li>
<li><p><strong>timestamp</strong> (<em>datetime</em><em>, </em><em>optional</em>) – The timestamp to use for the load.
By default this is the current time.</p></li>
<li><p><strong>assets_versions</strong> (<em>Iterable</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>]</em><em>, </em><em>optional</em>) – Versions of the assets db to which to downgrade.</p></li>
<li><p><strong>show_progress</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><em>optional</em>) – Tell the ingest function to display the progress where possible.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="zipline.data.bundles.load">
<span class="sig-prename descclassname"><span class="pre">zipline.data.bundles.</span></span><span class="sig-name descname"><span class="pre">load</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">environ</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">os.environ</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">date</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.data.bundles.load" title="Permalink to this definition">#</a></dt>
<dd><p>Loads a previously ingested bundle.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – The name of the bundle.</p></li>
<li><p><strong>environ</strong> (<em>mapping</em><em>, </em><em>optional</em>) – The environment variables. Defaults of os.environ.</p></li>
<li><p><strong>timestamp</strong> (<em>datetime</em><em>, </em><em>optional</em>) – The timestamp of the data to lookup.
Defaults to the current time.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>bundle_data</strong> – The raw data readers for this bundle.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>BundleData</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="zipline.data.bundles.unregister">
<span class="sig-prename descclassname"><span class="pre">zipline.data.bundles.</span></span><span class="sig-name descname"><span class="pre">unregister</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.data.bundles.unregister" title="Permalink to this definition">#</a></dt>
<dd><p>Unregister a bundle.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – The name of the bundle to unregister.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>UnknownBundle</strong> – Raised when no bundle has been registered with the given name.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#zipline.data.bundles.bundles" title="zipline.data.bundles.bundles"><code class="xref py py-obj docutils literal notranslate"><span class="pre">zipline.data.bundles.bundles</span></code></a></p>
</div>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="zipline.data.bundles.bundles">
<span class="sig-prename descclassname"><span class="pre">zipline.data.bundles.</span></span><span class="sig-name descname"><span class="pre">bundles</span></span><a class="headerlink" href="#zipline.data.bundles.bundles" title="Permalink to this definition">#</a></dt>
<dd><p>The bundles that have been registered as a mapping from bundle name to bundle
data. This mapping is immutable and may only be updated through
<a class="reference internal" href="#zipline.data.bundles.register" title="zipline.data.bundles.register"><code class="xref py py-func docutils literal notranslate"><span class="pre">register()</span></code></a> or
<a class="reference internal" href="#zipline.data.bundles.unregister" title="zipline.data.bundles.unregister"><code class="xref py py-func docutils literal notranslate"><span class="pre">unregister()</span></code></a>.</p>
</dd></dl>

</section>
</section>
<section id="risk-metrics">
<h2>Risk Metrics<a class="headerlink" href="#risk-metrics" title="Permalink to this heading">#</a></h2>
<section id="algorithm-state">
<h3>Algorithm State<a class="headerlink" href="#algorithm-state" title="Permalink to this heading">#</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="zipline.finance.ledger.Ledger">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.finance.ledger.</span></span><span class="sig-name descname"><span class="pre">Ledger</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">trading_sessions</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">capital_base</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_frequency</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/ledger.html#Ledger"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.finance.ledger.Ledger" title="Permalink to this definition">#</a></dt>
<dd><p>The ledger tracks all orders and transactions as well as the current
state of the portfolio and positions.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="zipline.finance.ledger.Ledger.portfolio">
<span class="sig-name descname"><span class="pre">portfolio</span></span><a class="headerlink" href="#zipline.finance.ledger.Ledger.portfolio" title="Permalink to this definition">#</a></dt>
<dd><p>The updated portfolio being managed.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#zipline.protocol.Portfolio" title="zipline.protocol.Portfolio">zipline.protocol.Portfolio</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="zipline.finance.ledger.Ledger.account">
<span class="sig-name descname"><span class="pre">account</span></span><a class="headerlink" href="#zipline.finance.ledger.Ledger.account" title="Permalink to this definition">#</a></dt>
<dd><p>The updated account being managed.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#zipline.protocol.Account" title="zipline.protocol.Account">zipline.protocol.Account</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="zipline.finance.ledger.Ledger.position_tracker">
<span class="sig-name descname"><span class="pre">position_tracker</span></span><a class="headerlink" href="#zipline.finance.ledger.Ledger.position_tracker" title="Permalink to this definition">#</a></dt>
<dd><p>The current set of positions.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#zipline.finance.ledger.PositionTracker" title="zipline.finance.ledger.PositionTracker">PositionTracker</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="zipline.finance.ledger.Ledger.todays_returns">
<span class="sig-name descname"><span class="pre">todays_returns</span></span><a class="headerlink" href="#zipline.finance.ledger.Ledger.todays_returns" title="Permalink to this definition">#</a></dt>
<dd><p>The current day’s returns. In minute emission mode, this is the partial
day’s returns. In daily emission mode, this is
<code class="docutils literal notranslate"><span class="pre">daily_returns[session]</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)">float</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="zipline.finance.ledger.Ledger.daily_returns_series">
<span class="sig-name descname"><span class="pre">daily_returns_series</span></span><a class="headerlink" href="#zipline.finance.ledger.Ledger.daily_returns_series" title="Permalink to this definition">#</a></dt>
<dd><p>The daily returns series. Days that have not yet finished will hold
a value of <code class="docutils literal notranslate"><span class="pre">np.nan</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pd.Series</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="zipline.finance.ledger.Ledger.daily_returns_array">
<span class="sig-name descname"><span class="pre">daily_returns_array</span></span><a class="headerlink" href="#zipline.finance.ledger.Ledger.daily_returns_array" title="Permalink to this definition">#</a></dt>
<dd><p>The daily returns as an ndarray. Days that have not yet finished will
hold a value of <code class="docutils literal notranslate"><span class="pre">np.nan</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.finance.ledger.Ledger.orders">
<span class="sig-name descname"><span class="pre">orders</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/ledger.html#Ledger.orders"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.finance.ledger.Ledger.orders" title="Permalink to this definition">#</a></dt>
<dd><p>Retrieve the dict-form of all of the orders in a given bar or for
the whole simulation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>dt</strong> (<em>pd.Timestamp</em><em> or </em><em>None</em><em>, </em><em>optional</em>) – The particular datetime to look up order for. If not passed, or
None is explicitly passed, all of the orders will be returned.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>orders</strong> – The order information.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.11)">list</a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)">dict</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.finance.ledger.Ledger.override_account_fields">
<span class="sig-name descname"><span class="pre">override_account_fields</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">settled_cash</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('not_overridden')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">accrued_interest</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('not_overridden')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">buying_power</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('not_overridden')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">equity_with_loan</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('not_overridden')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">total_positions_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('not_overridden')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">total_positions_exposure</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('not_overridden')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">regt_equity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('not_overridden')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">regt_margin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('not_overridden')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">initial_margin_requirement</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('not_overridden')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maintenance_margin_requirement</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('not_overridden')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">available_funds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('not_overridden')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">excess_liquidity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('not_overridden')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cushion</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('not_overridden')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">day_trades_remaining</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('not_overridden')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">leverage</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('not_overridden')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">net_leverage</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('not_overridden')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">net_liquidation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">sentinel('not_overridden')</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/ledger.html#Ledger.override_account_fields"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.finance.ledger.Ledger.override_account_fields" title="Permalink to this definition">#</a></dt>
<dd><p>Override fields on <code class="docutils literal notranslate"><span class="pre">self.account</span></code>.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="id8">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">portfolio</span></span><a class="headerlink" href="#id8" title="Permalink to this definition">#</a></dt>
<dd><p>Compute the current portfolio.</p>
<p class="rubric">Notes</p>
<p>This is cached, repeated access will not recompute the portfolio until
the portfolio may have changed.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.finance.ledger.Ledger.process_commission">
<span class="sig-name descname"><span class="pre">process_commission</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">commission</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/ledger.html#Ledger.process_commission"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.finance.ledger.Ledger.process_commission" title="Permalink to this definition">#</a></dt>
<dd><p>Process the commission.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>commission</strong> (<em>zp.Event</em>) – The commission being paid.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.finance.ledger.Ledger.process_dividends">
<span class="sig-name descname"><span class="pre">process_dividends</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">next_session</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">asset_finder</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">adjustment_reader</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/ledger.html#Ledger.process_dividends"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.finance.ledger.Ledger.process_dividends" title="Permalink to this definition">#</a></dt>
<dd><p>Process dividends for the next session.</p>
<p>This will earn us any dividends whose ex-date is the next session as
well as paying out any dividends whose pay-date is the next session</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.finance.ledger.Ledger.process_order">
<span class="sig-name descname"><span class="pre">process_order</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">order</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/ledger.html#Ledger.process_order"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.finance.ledger.Ledger.process_order" title="Permalink to this definition">#</a></dt>
<dd><p>Keep track of an order that was placed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>order</strong> (<em>zp.Order</em>) – The order to record.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.finance.ledger.Ledger.process_splits">
<span class="sig-name descname"><span class="pre">process_splits</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">splits</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/ledger.html#Ledger.process_splits"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.finance.ledger.Ledger.process_splits" title="Permalink to this definition">#</a></dt>
<dd><p>Processes a list of splits by modifying any positions as needed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>splits</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.11)"><em>list</em></a><em>[</em><em>(</em><a class="reference internal" href="#zipline.assets.Asset" title="zipline.assets.Asset"><em>Asset</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>)</em><em>]</em>) – A list of splits. Each split is a tuple of (asset, ratio).</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.finance.ledger.Ledger.process_transaction">
<span class="sig-name descname"><span class="pre">process_transaction</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transaction</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/ledger.html#Ledger.process_transaction"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.finance.ledger.Ledger.process_transaction" title="Permalink to this definition">#</a></dt>
<dd><p>Add a transaction to ledger, updating the current state as needed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>transaction</strong> (<em>zp.Transaction</em>) – The transaction to execute.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.finance.ledger.Ledger.transactions">
<span class="sig-name descname"><span class="pre">transactions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/ledger.html#Ledger.transactions"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.finance.ledger.Ledger.transactions" title="Permalink to this definition">#</a></dt>
<dd><p>Retrieve the dict-form of all of the transactions in a given bar or
for the whole simulation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>dt</strong> (<em>pd.Timestamp</em><em> or </em><em>None</em><em>, </em><em>optional</em>) – The particular datetime to look up transactions for. If not passed,
or None is explicitly passed, all of the transactions will be
returned.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>transactions</strong> – The transaction information.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.11)">list</a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)">dict</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.finance.ledger.Ledger.update_portfolio">
<span class="sig-name descname"><span class="pre">update_portfolio</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/ledger.html#Ledger.update_portfolio"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.finance.ledger.Ledger.update_portfolio" title="Permalink to this definition">#</a></dt>
<dd><p>Force a computation of the current portfolio state.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.protocol.Portfolio">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.protocol.</span></span><span class="sig-name descname"><span class="pre">Portfolio</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">start_date</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">capital_base</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/protocol.html#Portfolio"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.protocol.Portfolio" title="Permalink to this definition">#</a></dt>
<dd><p>Object providing read-only access to current portfolio state.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>start_date</strong> (<em>pd.Timestamp</em>) – The start date for the period being recorded.</p></li>
<li><p><strong>capital_base</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – The starting value for the portfolio. This will be used as the starting
cash, current cash, and portfolio value.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="zipline.protocol.Portfolio.positions">
<span class="sig-name descname"><span class="pre">positions</span></span><a class="headerlink" href="#zipline.protocol.Portfolio.positions" title="Permalink to this definition">#</a></dt>
<dd><p>Dict-like object containing information about currently-held positions.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>zipline.protocol.Positions</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="zipline.protocol.Portfolio.cash">
<span class="sig-name descname"><span class="pre">cash</span></span><a class="headerlink" href="#zipline.protocol.Portfolio.cash" title="Permalink to this definition">#</a></dt>
<dd><p>Amount of cash currently held in portfolio.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)">float</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="zipline.protocol.Portfolio.portfolio_value">
<span class="sig-name descname"><span class="pre">portfolio_value</span></span><a class="headerlink" href="#zipline.protocol.Portfolio.portfolio_value" title="Permalink to this definition">#</a></dt>
<dd><p>Current liquidation value of the portfolio’s holdings.
This is equal to <code class="docutils literal notranslate"><span class="pre">cash</span> <span class="pre">+</span> <span class="pre">sum(shares</span> <span class="pre">*</span> <span class="pre">price)</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)">float</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="zipline.protocol.Portfolio.starting_cash">
<span class="sig-name descname"><span class="pre">starting_cash</span></span><a class="headerlink" href="#zipline.protocol.Portfolio.starting_cash" title="Permalink to this definition">#</a></dt>
<dd><p>Amount of cash in the portfolio at the start of the backtest.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)">float</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="zipline.protocol.Portfolio.current_portfolio_weights">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">current_portfolio_weights</span></span><a class="headerlink" href="#zipline.protocol.Portfolio.current_portfolio_weights" title="Permalink to this definition">#</a></dt>
<dd><p>Compute each asset’s weight in the portfolio by calculating its held
value divided by the total value of all positions.</p>
<p>Each equity’s value is its price times the number of shares held. Each
futures contract’s value is its unit price times number of shares held
times the multiplier.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.protocol.Account">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.protocol.</span></span><span class="sig-name descname"><span class="pre">Account</span></span><a class="reference internal" href="_modules/zipline/protocol.html#Account"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.protocol.Account" title="Permalink to this definition">#</a></dt>
<dd><p>The account object tracks information about the trading account. The
values are updated as the algorithm runs and its keys remain unchanged.
If connected to a broker, one can update these values with the trading
account values as reported by the broker.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.finance.ledger.PositionTracker">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.finance.ledger.</span></span><span class="sig-name descname"><span class="pre">PositionTracker</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_frequency</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/ledger.html#PositionTracker"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.finance.ledger.PositionTracker" title="Permalink to this definition">#</a></dt>
<dd><p>The current state of the positions held.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>data_frequency</strong> (<em>{'daily'</em><em>, </em><em>'minute'}</em>) – The data frequency of the simulation.</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="zipline.finance.ledger.PositionTracker.earn_dividends">
<span class="sig-name descname"><span class="pre">earn_dividends</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cash_dividends</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stock_dividends</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/ledger.html#PositionTracker.earn_dividends"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.finance.ledger.PositionTracker.earn_dividends" title="Permalink to this definition">#</a></dt>
<dd><p>Given a list of dividends whose ex_dates are all the next trading
day, calculate and store the cash and/or stock payments to be paid on
each dividend’s pay date.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cash_dividends</strong> (<em>iterable</em><em> of </em><em>(</em><em>asset</em><em>, </em><em>amount</em><em>, </em><em>pay_date</em><em>) </em><em>namedtuples</em>) – </p></li>
<li><p><strong>stock_dividends</strong> (<em>iterable</em><em> of </em><em>(</em><em>asset</em><em>, </em><em>payment_asset</em><em>, </em><em>ratio</em><em>, </em><em>pay_date</em><em>)</em>) – namedtuples.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.finance.ledger.PositionTracker.handle_splits">
<span class="sig-name descname"><span class="pre">handle_splits</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">splits</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/ledger.html#PositionTracker.handle_splits"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.finance.ledger.PositionTracker.handle_splits" title="Permalink to this definition">#</a></dt>
<dd><p>Processes a list of splits by modifying any positions as needed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>splits</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.11)"><em>list</em></a>) – A list of splits.  Each split is a tuple of (asset, ratio).</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>int</strong> – position.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>The leftover cash from fractional shares after modifying each</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zipline.finance.ledger.PositionTracker.pay_dividends">
<span class="sig-name descname"><span class="pre">pay_dividends</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">next_trading_day</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/ledger.html#PositionTracker.pay_dividends"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.finance.ledger.PositionTracker.pay_dividends" title="Permalink to this definition">#</a></dt>
<dd><p>Returns a cash payment based on the dividends that should be paid out
according to the accumulated bookkeeping of earned, unpaid, and stock
dividends.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="zipline.finance.ledger.PositionTracker.stats">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">stats</span></span><a class="headerlink" href="#zipline.finance.ledger.PositionTracker.stats" title="Permalink to this definition">#</a></dt>
<dd><p>The current status of the positions.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>stats</strong> – The current stats position stats.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#zipline.finance._finance_ext.PositionStats" title="zipline.finance._finance_ext.PositionStats">PositionStats</a></p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>This is cached, repeated access will not recompute the stats until
the stats may have changed.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.finance._finance_ext.PositionStats">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.finance._finance_ext.</span></span><span class="sig-name descname"><span class="pre">PositionStats</span></span><a class="headerlink" href="#zipline.finance._finance_ext.PositionStats" title="Permalink to this definition">#</a></dt>
<dd><p>Computed values from the current positions.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="zipline.finance._finance_ext.PositionStats.gross_exposure">
<span class="sig-name descname"><span class="pre">gross_exposure</span></span><a class="headerlink" href="#zipline.finance._finance_ext.PositionStats.gross_exposure" title="Permalink to this definition">#</a></dt>
<dd><p>The gross position exposure.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float64</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="zipline.finance._finance_ext.PositionStats.gross_value">
<span class="sig-name descname"><span class="pre">gross_value</span></span><a class="headerlink" href="#zipline.finance._finance_ext.PositionStats.gross_value" title="Permalink to this definition">#</a></dt>
<dd><p>The gross position value.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float64</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="zipline.finance._finance_ext.PositionStats.long_exposure">
<span class="sig-name descname"><span class="pre">long_exposure</span></span><a class="headerlink" href="#zipline.finance._finance_ext.PositionStats.long_exposure" title="Permalink to this definition">#</a></dt>
<dd><p>The exposure of just the long positions.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float64</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="zipline.finance._finance_ext.PositionStats.long_value">
<span class="sig-name descname"><span class="pre">long_value</span></span><a class="headerlink" href="#zipline.finance._finance_ext.PositionStats.long_value" title="Permalink to this definition">#</a></dt>
<dd><p>The value of just the long positions.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float64</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="zipline.finance._finance_ext.PositionStats.net_exposure">
<span class="sig-name descname"><span class="pre">net_exposure</span></span><a class="headerlink" href="#zipline.finance._finance_ext.PositionStats.net_exposure" title="Permalink to this definition">#</a></dt>
<dd><p>The net position exposure.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float64</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="zipline.finance._finance_ext.PositionStats.net_value">
<span class="sig-name descname"><span class="pre">net_value</span></span><a class="headerlink" href="#zipline.finance._finance_ext.PositionStats.net_value" title="Permalink to this definition">#</a></dt>
<dd><p>The net position value.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float64</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="zipline.finance._finance_ext.PositionStats.short_exposure">
<span class="sig-name descname"><span class="pre">short_exposure</span></span><a class="headerlink" href="#zipline.finance._finance_ext.PositionStats.short_exposure" title="Permalink to this definition">#</a></dt>
<dd><p>The exposure of just the short positions.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float64</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="zipline.finance._finance_ext.PositionStats.short_value">
<span class="sig-name descname"><span class="pre">short_value</span></span><a class="headerlink" href="#zipline.finance._finance_ext.PositionStats.short_value" title="Permalink to this definition">#</a></dt>
<dd><p>The value of just the short positions.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float64</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="zipline.finance._finance_ext.PositionStats.longs_count">
<span class="sig-name descname"><span class="pre">longs_count</span></span><a class="headerlink" href="#zipline.finance._finance_ext.PositionStats.longs_count" title="Permalink to this definition">#</a></dt>
<dd><p>The number of long positions.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int64</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="zipline.finance._finance_ext.PositionStats.shorts_count">
<span class="sig-name descname"><span class="pre">shorts_count</span></span><a class="headerlink" href="#zipline.finance._finance_ext.PositionStats.shorts_count" title="Permalink to this definition">#</a></dt>
<dd><p>The number of short positions.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int64</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="zipline.finance._finance_ext.PositionStats.position_exposure_array">
<span class="sig-name descname"><span class="pre">position_exposure_array</span></span><a class="headerlink" href="#zipline.finance._finance_ext.PositionStats.position_exposure_array" title="Permalink to this definition">#</a></dt>
<dd><p>The exposure of each position in the same order as
<code class="docutils literal notranslate"><span class="pre">position_tracker.positions</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>np.ndarray[float64]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="zipline.finance._finance_ext.PositionStats.position_exposure_series">
<span class="sig-name descname"><span class="pre">position_exposure_series</span></span><a class="headerlink" href="#zipline.finance._finance_ext.PositionStats.position_exposure_series" title="Permalink to this definition">#</a></dt>
<dd><p>The exposure of each position in the same order as
<code class="docutils literal notranslate"><span class="pre">position_tracker.positions</span></code>. The index is the numeric sid of each
asset.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pd.Series[float64]</p>
</dd>
</dl>
</dd></dl>

<p class="rubric">Notes</p>
<p><code class="docutils literal notranslate"><span class="pre">position_exposure_array</span></code> and <code class="docutils literal notranslate"><span class="pre">position_exposure_series</span></code> share the same
underlying memory. The array interface should be preferred if you are doing
access each minute for better performance.</p>
<p><code class="docutils literal notranslate"><span class="pre">position_exposure_array</span></code> and <code class="docutils literal notranslate"><span class="pre">position_exposure_series</span></code> may be mutated
when the position tracker next updates the stats. Do not rely on these
objects being preserved across accesses to <code class="docutils literal notranslate"><span class="pre">stats</span></code>. If you need to freeze
the values, you must take a copy.</p>
</dd></dl>

</section>
<section id="built-in-metrics">
<h3>Built-in Metrics<a class="headerlink" href="#built-in-metrics" title="Permalink to this heading">#</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="zipline.finance.metrics.metric.SimpleLedgerField">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.finance.metrics.metric.</span></span><span class="sig-name descname"><span class="pre">SimpleLedgerField</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ledger_field</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">packet_field</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/metrics/metric.html#SimpleLedgerField"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.finance.metrics.metric.SimpleLedgerField" title="Permalink to this definition">#</a></dt>
<dd><p>Emit the current value of a ledger field every bar or every session.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ledger_field</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – The ledger field to read.</p></li>
<li><p><strong>packet_field</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>optional</em>) – The name of the field to populate in the packet. If not provided,
<code class="docutils literal notranslate"><span class="pre">ledger_field</span></code> will be used.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.finance.metrics.metric.DailyLedgerField">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.finance.metrics.metric.</span></span><span class="sig-name descname"><span class="pre">DailyLedgerField</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ledger_field</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">packet_field</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/metrics/metric.html#DailyLedgerField"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.finance.metrics.metric.DailyLedgerField" title="Permalink to this definition">#</a></dt>
<dd><p>Like <a class="reference internal" href="#zipline.finance.metrics.metric.SimpleLedgerField" title="zipline.finance.metrics.metric.SimpleLedgerField"><code class="xref py py-class docutils literal notranslate"><span class="pre">SimpleLedgerField</span></code></a> but
also puts the current value in the <code class="docutils literal notranslate"><span class="pre">cumulative_perf</span></code> section.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ledger_field</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – The ledger field to read.</p></li>
<li><p><strong>packet_field</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>optional</em>) – The name of the field to populate in the packet. If not provided,
<code class="docutils literal notranslate"><span class="pre">ledger_field</span></code> will be used.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.finance.metrics.metric.StartOfPeriodLedgerField">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.finance.metrics.metric.</span></span><span class="sig-name descname"><span class="pre">StartOfPeriodLedgerField</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ledger_field</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">packet_field</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/metrics/metric.html#StartOfPeriodLedgerField"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.finance.metrics.metric.StartOfPeriodLedgerField" title="Permalink to this definition">#</a></dt>
<dd><p>Keep track of the value of a ledger field at the start of the period.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ledger_field</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – The ledger field to read.</p></li>
<li><p><strong>packet_field</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>optional</em>) – The name of the field to populate in the packet. If not provided,
<code class="docutils literal notranslate"><span class="pre">ledger_field</span></code> will be used.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="id9">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.finance.metrics.metric.</span></span><span class="sig-name descname"><span class="pre">StartOfPeriodLedgerField</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ledger_field</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">packet_field</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/metrics/metric.html#StartOfPeriodLedgerField"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id9" title="Permalink to this definition">#</a></dt>
<dd><p>Keep track of the value of a ledger field at the start of the period.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ledger_field</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – The ledger field to read.</p></li>
<li><p><strong>packet_field</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>optional</em>) – The name of the field to populate in the packet. If not provided,
<code class="docutils literal notranslate"><span class="pre">ledger_field</span></code> will be used.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.finance.metrics.metric.Returns">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.finance.metrics.metric.</span></span><span class="sig-name descname"><span class="pre">Returns</span></span><a class="reference internal" href="_modules/zipline/finance/metrics/metric.html#Returns"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.finance.metrics.metric.Returns" title="Permalink to this definition">#</a></dt>
<dd><p>Tracks the daily and cumulative returns of the algorithm.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.finance.metrics.metric.BenchmarkReturnsAndVolatility">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.finance.metrics.metric.</span></span><span class="sig-name descname"><span class="pre">BenchmarkReturnsAndVolatility</span></span><a class="reference internal" href="_modules/zipline/finance/metrics/metric.html#BenchmarkReturnsAndVolatility"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.finance.metrics.metric.BenchmarkReturnsAndVolatility" title="Permalink to this definition">#</a></dt>
<dd><p>Tracks daily and cumulative returns for the benchmark as well as the
volatility of the benchmark returns.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.finance.metrics.metric.CashFlow">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.finance.metrics.metric.</span></span><span class="sig-name descname"><span class="pre">CashFlow</span></span><a class="reference internal" href="_modules/zipline/finance/metrics/metric.html#CashFlow"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.finance.metrics.metric.CashFlow" title="Permalink to this definition">#</a></dt>
<dd><p>Tracks daily and cumulative cash flow.</p>
<p class="rubric">Notes</p>
<p>For historical reasons, this field is named ‘capital_used’ in the packets.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.finance.metrics.metric.Orders">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.finance.metrics.metric.</span></span><span class="sig-name descname"><span class="pre">Orders</span></span><a class="reference internal" href="_modules/zipline/finance/metrics/metric.html#Orders"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.finance.metrics.metric.Orders" title="Permalink to this definition">#</a></dt>
<dd><p>Tracks daily orders.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.finance.metrics.metric.Transactions">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.finance.metrics.metric.</span></span><span class="sig-name descname"><span class="pre">Transactions</span></span><a class="reference internal" href="_modules/zipline/finance/metrics/metric.html#Transactions"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.finance.metrics.metric.Transactions" title="Permalink to this definition">#</a></dt>
<dd><p>Tracks daily transactions.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.finance.metrics.metric.Positions">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.finance.metrics.metric.</span></span><span class="sig-name descname"><span class="pre">Positions</span></span><a class="reference internal" href="_modules/zipline/finance/metrics/metric.html#Positions"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.finance.metrics.metric.Positions" title="Permalink to this definition">#</a></dt>
<dd><p>Tracks daily positions.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.finance.metrics.metric.ReturnsStatistic">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.finance.metrics.metric.</span></span><span class="sig-name descname"><span class="pre">ReturnsStatistic</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">function</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/metrics/metric.html#ReturnsStatistic"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.finance.metrics.metric.ReturnsStatistic" title="Permalink to this definition">#</a></dt>
<dd><p>A metric that reports an end of simulation scalar or time series
computed from the algorithm returns.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>function</strong> (<em>callable</em>) – The function to call on the daily returns.</p></li>
<li><p><strong>field_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>optional</em>) – The name of the field. If not provided, it will be
<code class="docutils literal notranslate"><span class="pre">function.__name__</span></code>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.finance.metrics.metric.AlphaBeta">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.finance.metrics.metric.</span></span><span class="sig-name descname"><span class="pre">AlphaBeta</span></span><a class="reference internal" href="_modules/zipline/finance/metrics/metric.html#AlphaBeta"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.finance.metrics.metric.AlphaBeta" title="Permalink to this definition">#</a></dt>
<dd><p>End of simulation alpha and beta to the benchmark.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.finance.metrics.metric.MaxLeverage">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.finance.metrics.metric.</span></span><span class="sig-name descname"><span class="pre">MaxLeverage</span></span><a class="reference internal" href="_modules/zipline/finance/metrics/metric.html#MaxLeverage"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.finance.metrics.metric.MaxLeverage" title="Permalink to this definition">#</a></dt>
<dd><p>Tracks the maximum account leverage.</p>
</dd></dl>

</section>
<section id="metrics-sets">
<h3>Metrics Sets<a class="headerlink" href="#metrics-sets" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="zipline.finance.metrics.register">
<span class="sig-prename descclassname"><span class="pre">zipline.finance.metrics.</span></span><span class="sig-name descname"><span class="pre">register</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">function</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.finance.metrics.register" title="Permalink to this definition">#</a></dt>
<dd><p>Register a new metrics set.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – The name of the metrics set</p></li>
<li><p><strong>function</strong> (<em>callable</em>) – The callable which produces the metrics set.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>This may be used as a decorator if only <code class="docutils literal notranslate"><span class="pre">name</span></code> is passed.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-obj docutils literal notranslate"><span class="pre">zipline.finance.metrics.get_metrics_set</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">zipline.finance.metrics.unregister_metrics_set</span></code></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="zipline.finance.metrics.load">
<span class="sig-prename descclassname"><span class="pre">zipline.finance.metrics.</span></span><span class="sig-name descname"><span class="pre">load</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.finance.metrics.load" title="Permalink to this definition">#</a></dt>
<dd><p>Return an instance of the metrics set registered with the given name.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>metrics</strong> – A new instance of the metrics set.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#set" title="(in Python v3.11)">set</a>[Metric]</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.11)"><strong>ValueError</strong></a> – Raised when no metrics set is registered to <code class="docutils literal notranslate"><span class="pre">name</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="zipline.finance.metrics.unregister">
<span class="sig-prename descclassname"><span class="pre">zipline.finance.metrics.</span></span><span class="sig-name descname"><span class="pre">unregister</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.finance.metrics.unregister" title="Permalink to this definition">#</a></dt>
<dd><p>Unregister an existing metrics set.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – The name of the metrics set</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-obj docutils literal notranslate"><span class="pre">zipline.finance.metrics.register_metrics_set</span></code></p>
</div>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="zipline.data.finance.metrics.metrics_sets">
<span class="sig-prename descclassname"><span class="pre">zipline.data.finance.metrics.</span></span><span class="sig-name descname"><span class="pre">metrics_sets</span></span><a class="headerlink" href="#zipline.data.finance.metrics.metrics_sets" title="Permalink to this definition">#</a></dt>
<dd><p>The metrics sets that have been registered as a mapping from metrics set name
to load function. This mapping is immutable and may only be updated through
<a class="reference internal" href="#zipline.finance.metrics.register" title="zipline.finance.metrics.register"><code class="xref py py-func docutils literal notranslate"><span class="pre">register()</span></code></a> or
<a class="reference internal" href="#zipline.finance.metrics.unregister" title="zipline.finance.metrics.unregister"><code class="xref py py-func docutils literal notranslate"><span class="pre">unregister()</span></code></a>.</p>
</dd></dl>

</section>
</section>
<section id="utilities">
<h2>Utilities<a class="headerlink" href="#utilities" title="Permalink to this heading">#</a></h2>
<section id="caching">
<h3>Caching<a class="headerlink" href="#caching" title="Permalink to this heading">#</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="zipline.utils.cache.CachedObject">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.utils.cache.</span></span><span class="sig-name descname"><span class="pre">CachedObject</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expires</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/utils/cache.html#CachedObject"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.utils.cache.CachedObject" title="Permalink to this definition">#</a></dt>
<dd><p>A simple struct for maintaining a cached object with an expiration date.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>value</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.11)"><em>object</em></a>) – The object to cache.</p></li>
<li><p><strong>expires</strong> (<em>datetime-like</em>) – Expiration date of <cite>value</cite>. The cache is considered invalid for dates
<strong>strictly greater</strong> than <cite>expires</cite>.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pandas</span> <span class="kn">import</span> <span class="n">Timestamp</span><span class="p">,</span> <span class="n">Timedelta</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expires</span> <span class="o">=</span> <span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2014&#39;</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="s1">&#39;UTC&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">obj</span> <span class="o">=</span> <span class="n">CachedObject</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">expires</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">obj</span><span class="o">.</span><span class="n">unwrap</span><span class="p">(</span><span class="n">expires</span> <span class="o">-</span> <span class="n">Timedelta</span><span class="p">(</span><span class="s1">&#39;1 minute&#39;</span><span class="p">))</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">obj</span><span class="o">.</span><span class="n">unwrap</span><span class="p">(</span><span class="n">expires</span><span class="p">)</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">obj</span><span class="o">.</span><span class="n">unwrap</span><span class="p">(</span><span class="n">expires</span> <span class="o">+</span> <span class="n">Timedelta</span><span class="p">(</span><span class="s1">&#39;1 minute&#39;</span><span class="p">))</span>
<span class="gp">... </span>
<span class="gt">Traceback (most recent call last):</span>
<span class="w">    </span><span class="o">...</span>
<span class="gr">Expired</span>: <span class="n">2014-01-01 00:00:00+00:00</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.utils.cache.ExpiringCache">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.utils.cache.</span></span><span class="sig-name descname"><span class="pre">ExpiringCache</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cache=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cleanup=&lt;function</span> <span class="pre">ExpiringCache.&lt;lambda&gt;&gt;</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/utils/cache.html#ExpiringCache"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.utils.cache.ExpiringCache" title="Permalink to this definition">#</a></dt>
<dd><p>A cache of multiple CachedObjects, which returns the wrapped the value
or raises and deletes the CachedObject if the value has expired.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cache</strong> (<em>dict-like</em><em>, </em><em>optional</em>) – An instance of a dict-like object which needs to support at least:
<cite>__del__</cite>, <cite>__getitem__</cite>, <cite>__setitem__</cite>
If <cite>None</cite>, than a dict is used as a default.</p></li>
<li><p><strong>cleanup</strong> (<em>callable</em><em>, </em><em>optional</em>) – A method that takes a single argument, a cached object, and is called
upon expiry of the cached object, prior to deleting the object. If not
provided, defaults to a no-op.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pandas</span> <span class="kn">import</span> <span class="n">Timestamp</span><span class="p">,</span> <span class="n">Timedelta</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expires</span> <span class="o">=</span> <span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2014&#39;</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="s1">&#39;UTC&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">value</span> <span class="o">=</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cache</span> <span class="o">=</span> <span class="n">ExpiringCache</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cache</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">expires</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cache</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="n">expires</span> <span class="o">-</span> <span class="n">Timedelta</span><span class="p">(</span><span class="s1">&#39;1 minute&#39;</span><span class="p">))</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cache</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="n">expires</span> <span class="o">+</span> <span class="n">Timedelta</span><span class="p">(</span><span class="s1">&#39;1 minute&#39;</span><span class="p">))</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="w">    </span><span class="o">...</span>
<span class="gr">KeyError</span>: <span class="n">&#39;foo&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.utils.cache.dataframe_cache">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.utils.cache.</span></span><span class="sig-name descname"><span class="pre">dataframe_cache</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lock</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clean_on_failure</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">serialization</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'pickle'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/utils/cache.html#dataframe_cache"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.utils.cache.dataframe_cache" title="Permalink to this definition">#</a></dt>
<dd><p>A disk-backed cache for dataframes.</p>
<p><code class="docutils literal notranslate"><span class="pre">dataframe_cache</span></code> is a mutable mapping from string names to pandas
DataFrame objects.
This object may be used as a context manager to delete the cache directory
on exit.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>optional</em>) – The directory path to the cache. Files will be written as
<code class="docutils literal notranslate"><span class="pre">path/&lt;keyname&gt;</span></code>.</p></li>
<li><p><strong>lock</strong> (<em>Lock</em><em>, </em><em>optional</em>) – Thread lock for multithreaded/multiprocessed access to the cache.
If not provided no locking will be used.</p></li>
<li><p><strong>clean_on_failure</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><em>optional</em>) – Should the directory be cleaned up if an exception is raised in the
context manager.</p></li>
<li><p><strong>serialize</strong> (<em>{'msgpack'</em><em>, </em><em>'pickle:&lt;n&gt;'}</em><em>, </em><em>optional</em>) – How should the data be serialized. If <code class="docutils literal notranslate"><span class="pre">'pickle'</span></code> is passed, an
optional pickle protocol can be passed like: <code class="docutils literal notranslate"><span class="pre">'pickle:3'</span></code> which says
to use pickle protocol 3.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>The syntax <code class="docutils literal notranslate"><span class="pre">cache[:]</span></code> will load all key:value pairs into memory as a
dictionary.
The cache uses a temporary file format that is subject to change between
versions of zipline.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.utils.cache.working_file">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.utils.cache.</span></span><span class="sig-name descname"><span class="pre">working_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">final_path</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/utils/cache.html#working_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.utils.cache.working_file" title="Permalink to this definition">#</a></dt>
<dd><p>A context manager for managing a temporary file that will be moved
to a non-temporary location if no exceptions are raised in the context.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>final_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – The location to move the file when committing.</p></li>
<li><p><strong>*args</strong> – Forwarded to NamedTemporaryFile.</p></li>
<li><p><strong>**kwargs</strong> – Forwarded to NamedTemporaryFile.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>The file is moved on __exit__ if there are no exceptions.
<code class="docutils literal notranslate"><span class="pre">working_file</span></code> uses <a class="reference external" href="https://docs.python.org/3/library/shutil.html#shutil.move" title="(in Python v3.11)"><code class="xref py py-func docutils literal notranslate"><span class="pre">shutil.move()</span></code></a> to move the actual files,
meaning it has as strong of guarantees as <a class="reference external" href="https://docs.python.org/3/library/shutil.html#shutil.move" title="(in Python v3.11)"><code class="xref py py-func docutils literal notranslate"><span class="pre">shutil.move()</span></code></a>.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="zipline.utils.cache.working_dir">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">zipline.utils.cache.</span></span><span class="sig-name descname"><span class="pre">working_dir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">final_path</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/utils/cache.html#working_dir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.utils.cache.working_dir" title="Permalink to this definition">#</a></dt>
<dd><p>A context manager for managing a temporary directory that will be moved
to a non-temporary location if no exceptions are raised in the context.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>final_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – The location to move the file when committing.</p></li>
<li><p><strong>*args</strong> – Forwarded to tmp_dir.</p></li>
<li><p><strong>**kwargs</strong> – Forwarded to tmp_dir.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>The file is moved on __exit__ if there are no exceptions.
<code class="docutils literal notranslate"><span class="pre">working_dir</span></code> uses <code class="xref py py-func docutils literal notranslate"><span class="pre">dir_util.copy_tree()</span></code> to move the actual files,
meaning it has as strong of guarantees as <code class="xref py py-func docutils literal notranslate"><span class="pre">dir_util.copy_tree()</span></code>.</p>
</dd></dl>

</section>
<section id="command-line">
<h3>Command Line<a class="headerlink" href="#command-line" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="zipline.utils.cli.maybe_show_progress">
<span class="sig-prename descclassname"><span class="pre">zipline.utils.cli.</span></span><span class="sig-name descname"><span class="pre">maybe_show_progress</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_progress</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/utils/cli.html#maybe_show_progress"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zipline.utils.cli.maybe_show_progress" title="Permalink to this definition">#</a></dt>
<dd><p>Optionally show a progress bar for the given iterator.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>it</strong> (<em>iterable</em>) – The underlying iterator.</p></li>
<li><p><strong>show_progress</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Should progress be shown.</p></li>
<li><p><strong>**kwargs</strong> – Forwarded to the click progress bar.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>itercontext</strong> – A context manager whose enter is the actual iterator to use.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>context manager</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">maybe_show_progress</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="kc">True</span><span class="p">)</span> <span class="k">as</span> <span class="n">ns</span><span class="p">:</span>
     <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">ns</span><span class="p">:</span>
         <span class="o">...</span>
</pre></div>
</div>
</dd></dl>

</section>
</section>
</section>


                </article>
              
              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="development-guidelines.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Development</p>
      </div>
    </a>
    <a class="right-next"
       href="releases.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Releases</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#running-a-backtest">Running a Backtest</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.run_algorithm"><code class="docutils literal notranslate"><span class="pre">run_algorithm()</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#trading-algorithm-api">Trading Algorithm API</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#data-object">Data Object</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.protocol.BarData"><code class="docutils literal notranslate"><span class="pre">BarData</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.protocol.BarData.can_trade"><code class="docutils literal notranslate"><span class="pre">BarData.can_trade()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.protocol.BarData.current"><code class="docutils literal notranslate"><span class="pre">BarData.current()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.protocol.BarData.history"><code class="docutils literal notranslate"><span class="pre">BarData.history()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.protocol.BarData.is_stale"><code class="docutils literal notranslate"><span class="pre">BarData.is_stale()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#scheduling-functions">Scheduling Functions</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.api.schedule_function"><code class="docutils literal notranslate"><span class="pre">schedule_function()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.api.date_rules"><code class="docutils literal notranslate"><span class="pre">date_rules</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.api.date_rules.every_day"><code class="docutils literal notranslate"><span class="pre">date_rules.every_day()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.api.date_rules.month_end"><code class="docutils literal notranslate"><span class="pre">date_rules.month_end()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.api.date_rules.month_start"><code class="docutils literal notranslate"><span class="pre">date_rules.month_start()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.api.date_rules.week_end"><code class="docutils literal notranslate"><span class="pre">date_rules.week_end()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.api.date_rules.week_start"><code class="docutils literal notranslate"><span class="pre">date_rules.week_start()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.api.time_rules"><code class="docutils literal notranslate"><span class="pre">time_rules</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.api.time_rules.every_minute"><code class="docutils literal notranslate"><span class="pre">time_rules.every_minute</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.api.time_rules.market_close"><code class="docutils literal notranslate"><span class="pre">time_rules.market_close()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.api.time_rules.market_open"><code class="docutils literal notranslate"><span class="pre">time_rules.market_open()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#orders">Orders</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.api.order"><code class="docutils literal notranslate"><span class="pre">order()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.api.order_value"><code class="docutils literal notranslate"><span class="pre">order_value()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.api.order_percent"><code class="docutils literal notranslate"><span class="pre">order_percent()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.api.order_target"><code class="docutils literal notranslate"><span class="pre">order_target()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.api.order_target_value"><code class="docutils literal notranslate"><span class="pre">order_target_value()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.api.order_target_percent"><code class="docutils literal notranslate"><span class="pre">order_target_percent()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.execution.ExecutionStyle"><code class="docutils literal notranslate"><span class="pre">ExecutionStyle</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.execution.ExecutionStyle.exchange"><code class="docutils literal notranslate"><span class="pre">ExecutionStyle.exchange</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.execution.ExecutionStyle.get_limit_price"><code class="docutils literal notranslate"><span class="pre">ExecutionStyle.get_limit_price()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.execution.ExecutionStyle.get_stop_price"><code class="docutils literal notranslate"><span class="pre">ExecutionStyle.get_stop_price()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.execution.MarketOrder"><code class="docutils literal notranslate"><span class="pre">MarketOrder</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.execution.LimitOrder"><code class="docutils literal notranslate"><span class="pre">LimitOrder</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.execution.StopOrder"><code class="docutils literal notranslate"><span class="pre">StopOrder</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.execution.StopLimitOrder"><code class="docutils literal notranslate"><span class="pre">StopLimitOrder</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.api.get_order"><code class="docutils literal notranslate"><span class="pre">get_order()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.api.get_open_orders"><code class="docutils literal notranslate"><span class="pre">get_open_orders()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.api.cancel_order"><code class="docutils literal notranslate"><span class="pre">cancel_order()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#order-cancellation-policies">Order Cancellation Policies</a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.api.set_cancel_policy"><code class="docutils literal notranslate"><span class="pre">set_cancel_policy()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.cancel_policy.CancelPolicy"><code class="docutils literal notranslate"><span class="pre">CancelPolicy</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h6 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.cancel_policy.CancelPolicy.should_cancel"><code class="docutils literal notranslate"><span class="pre">CancelPolicy.should_cancel()</span></code></a></li>
</ul>
</li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.api.EODCancel"><code class="docutils literal notranslate"><span class="pre">EODCancel()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.api.NeverCancel"><code class="docutils literal notranslate"><span class="pre">NeverCancel()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#assets">Assets</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.api.symbol"><code class="docutils literal notranslate"><span class="pre">symbol()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.api.symbols"><code class="docutils literal notranslate"><span class="pre">symbols()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.api.future_symbol"><code class="docutils literal notranslate"><span class="pre">future_symbol()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.api.set_symbol_lookup_date"><code class="docutils literal notranslate"><span class="pre">set_symbol_lookup_date()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.api.sid"><code class="docutils literal notranslate"><span class="pre">sid()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#trading-controls">Trading Controls</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.api.set_do_not_order_list"><code class="docutils literal notranslate"><span class="pre">set_do_not_order_list()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.api.set_long_only"><code class="docutils literal notranslate"><span class="pre">set_long_only()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.api.set_max_leverage"><code class="docutils literal notranslate"><span class="pre">set_max_leverage()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.api.set_max_order_count"><code class="docutils literal notranslate"><span class="pre">set_max_order_count()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.api.set_max_order_size"><code class="docutils literal notranslate"><span class="pre">set_max_order_size()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.api.set_max_position_size"><code class="docutils literal notranslate"><span class="pre">set_max_position_size()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#simulation-parameters">Simulation Parameters</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.api.set_benchmark"><code class="docutils literal notranslate"><span class="pre">set_benchmark()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#commission-models">Commission Models</a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.api.set_commission"><code class="docutils literal notranslate"><span class="pre">set_commission()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.commission.CommissionModel"><code class="docutils literal notranslate"><span class="pre">CommissionModel</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h6 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.commission.CommissionModel.calculate"><code class="docutils literal notranslate"><span class="pre">CommissionModel.calculate()</span></code></a></li>
</ul>
</li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.commission.PerShare"><code class="docutils literal notranslate"><span class="pre">PerShare</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.commission.PerTrade"><code class="docutils literal notranslate"><span class="pre">PerTrade</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.commission.PerDollar"><code class="docutils literal notranslate"><span class="pre">PerDollar</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#slippage-models">Slippage Models</a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.api.set_slippage"><code class="docutils literal notranslate"><span class="pre">set_slippage()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.slippage.SlippageModel"><code class="docutils literal notranslate"><span class="pre">SlippageModel</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h6 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.slippage.SlippageModel.process_order"><code class="docutils literal notranslate"><span class="pre">SlippageModel.process_order()</span></code></a></li>
<li class="toc-h6 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.slippage.SlippageModel.volume_for_bar"><code class="docutils literal notranslate"><span class="pre">SlippageModel.volume_for_bar</span></code></a></li>
<li class="toc-h6 nav-item toc-entry"><a class="reference internal nav-link" href="#id0"><code class="docutils literal notranslate"><span class="pre">SlippageModel.process_order()</span></code></a></li>
</ul>
</li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.slippage.FixedSlippage"><code class="docutils literal notranslate"><span class="pre">FixedSlippage</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.slippage.VolumeShareSlippage"><code class="docutils literal notranslate"><span class="pre">VolumeShareSlippage</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pipeline">Pipeline</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.api.attach_pipeline"><code class="docutils literal notranslate"><span class="pre">attach_pipeline()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.api.pipeline_output"><code class="docutils literal notranslate"><span class="pre">pipeline_output()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#miscellaneous">Miscellaneous</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.api.record"><code class="docutils literal notranslate"><span class="pre">record()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.api.get_environment"><code class="docutils literal notranslate"><span class="pre">get_environment()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.api.fetch_csv"><code class="docutils literal notranslate"><span class="pre">fetch_csv()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#blotters">Blotters</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.blotter.blotter.Blotter"><code class="docutils literal notranslate"><span class="pre">Blotter</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.blotter.blotter.Blotter.batch_order"><code class="docutils literal notranslate"><span class="pre">Blotter.batch_order()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.blotter.blotter.Blotter.cancel"><code class="docutils literal notranslate"><span class="pre">Blotter.cancel()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.blotter.blotter.Blotter.cancel_all_orders_for_asset"><code class="docutils literal notranslate"><span class="pre">Blotter.cancel_all_orders_for_asset()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.blotter.blotter.Blotter.get_transactions"><code class="docutils literal notranslate"><span class="pre">Blotter.get_transactions()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.blotter.blotter.Blotter.hold"><code class="docutils literal notranslate"><span class="pre">Blotter.hold()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.blotter.blotter.Blotter.order"><code class="docutils literal notranslate"><span class="pre">Blotter.order()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.blotter.blotter.Blotter.process_splits"><code class="docutils literal notranslate"><span class="pre">Blotter.process_splits()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.blotter.blotter.Blotter.prune_orders"><code class="docutils literal notranslate"><span class="pre">Blotter.prune_orders()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.blotter.blotter.Blotter.reject"><code class="docutils literal notranslate"><span class="pre">Blotter.reject()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.blotter.SimulationBlotter"><code class="docutils literal notranslate"><span class="pre">SimulationBlotter</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.blotter.SimulationBlotter.cancel"><code class="docutils literal notranslate"><span class="pre">SimulationBlotter.cancel()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.blotter.SimulationBlotter.cancel_all_orders_for_asset"><code class="docutils literal notranslate"><span class="pre">SimulationBlotter.cancel_all_orders_for_asset()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.blotter.SimulationBlotter.get_transactions"><code class="docutils literal notranslate"><span class="pre">SimulationBlotter.get_transactions()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.blotter.SimulationBlotter.hold"><code class="docutils literal notranslate"><span class="pre">SimulationBlotter.hold()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.blotter.SimulationBlotter.order"><code class="docutils literal notranslate"><span class="pre">SimulationBlotter.order()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.blotter.SimulationBlotter.process_splits"><code class="docutils literal notranslate"><span class="pre">SimulationBlotter.process_splits()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.blotter.SimulationBlotter.prune_orders"><code class="docutils literal notranslate"><span class="pre">SimulationBlotter.prune_orders()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.blotter.SimulationBlotter.reject"><code class="docutils literal notranslate"><span class="pre">SimulationBlotter.reject()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pipeline-api">Pipeline API</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.Pipeline"><code class="docutils literal notranslate"><span class="pre">Pipeline</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.Pipeline.add"><code class="docutils literal notranslate"><span class="pre">Pipeline.add()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.Pipeline.domain"><code class="docutils literal notranslate"><span class="pre">Pipeline.domain()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.Pipeline.remove"><code class="docutils literal notranslate"><span class="pre">Pipeline.remove()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.Pipeline.set_screen"><code class="docutils literal notranslate"><span class="pre">Pipeline.set_screen()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.Pipeline.show_graph"><code class="docutils literal notranslate"><span class="pre">Pipeline.show_graph()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.Pipeline.to_execution_plan"><code class="docutils literal notranslate"><span class="pre">Pipeline.to_execution_plan()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.Pipeline.to_simple_graph"><code class="docutils literal notranslate"><span class="pre">Pipeline.to_simple_graph()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.Pipeline.columns"><code class="docutils literal notranslate"><span class="pre">Pipeline.columns</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.Pipeline.screen"><code class="docutils literal notranslate"><span class="pre">Pipeline.screen</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.CustomFactor"><code class="docutils literal notranslate"><span class="pre">CustomFactor</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.CustomFactor.dtype"><code class="docutils literal notranslate"><span class="pre">CustomFactor.dtype</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.Filter"><code class="docutils literal notranslate"><span class="pre">Filter</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.Filter.__and__"><code class="docutils literal notranslate"><span class="pre">Filter.__and__()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.Filter.__or__"><code class="docutils literal notranslate"><span class="pre">Filter.__or__()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.Filter.if_else"><code class="docutils literal notranslate"><span class="pre">Filter.if_else()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.Factor"><code class="docutils literal notranslate"><span class="pre">Factor</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.Factor.eq"><code class="docutils literal notranslate"><span class="pre">Factor.eq()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.Factor.demean"><code class="docutils literal notranslate"><span class="pre">Factor.demean()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.Factor.zscore"><code class="docutils literal notranslate"><span class="pre">Factor.zscore()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.Factor.rank"><code class="docutils literal notranslate"><span class="pre">Factor.rank()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.Factor.pearsonr"><code class="docutils literal notranslate"><span class="pre">Factor.pearsonr()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.Factor.spearmanr"><code class="docutils literal notranslate"><span class="pre">Factor.spearmanr()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.Factor.linear_regression"><code class="docutils literal notranslate"><span class="pre">Factor.linear_regression()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.Factor.winsorize"><code class="docutils literal notranslate"><span class="pre">Factor.winsorize()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.Factor.quantiles"><code class="docutils literal notranslate"><span class="pre">Factor.quantiles()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.Factor.quartiles"><code class="docutils literal notranslate"><span class="pre">Factor.quartiles()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.Factor.quintiles"><code class="docutils literal notranslate"><span class="pre">Factor.quintiles()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.Factor.deciles"><code class="docutils literal notranslate"><span class="pre">Factor.deciles()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.Factor.top"><code class="docutils literal notranslate"><span class="pre">Factor.top()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.Factor.bottom"><code class="docutils literal notranslate"><span class="pre">Factor.bottom()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.Factor.percentile_between"><code class="docutils literal notranslate"><span class="pre">Factor.percentile_between()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.Factor.isnan"><code class="docutils literal notranslate"><span class="pre">Factor.isnan()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.Factor.notnan"><code class="docutils literal notranslate"><span class="pre">Factor.notnan()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.Factor.isfinite"><code class="docutils literal notranslate"><span class="pre">Factor.isfinite()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.Factor.clip"><code class="docutils literal notranslate"><span class="pre">Factor.clip()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id2"><code class="docutils literal notranslate"><span class="pre">Factor.clip()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.Factor.__add__"><code class="docutils literal notranslate"><span class="pre">Factor.__add__()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.Factor.__sub__"><code class="docutils literal notranslate"><span class="pre">Factor.__sub__()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.Factor.__mul__"><code class="docutils literal notranslate"><span class="pre">Factor.__mul__()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.Factor.__div__"><code class="docutils literal notranslate"><span class="pre">Factor.__div__()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.Factor.__mod__"><code class="docutils literal notranslate"><span class="pre">Factor.__mod__()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.Factor.__pow__"><code class="docutils literal notranslate"><span class="pre">Factor.__pow__()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.Factor.__lt__"><code class="docutils literal notranslate"><span class="pre">Factor.__lt__()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.Factor.__le__"><code class="docutils literal notranslate"><span class="pre">Factor.__le__()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.Factor.__ne__"><code class="docutils literal notranslate"><span class="pre">Factor.__ne__()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.Factor.__ge__"><code class="docutils literal notranslate"><span class="pre">Factor.__ge__()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.Factor.__gt__"><code class="docutils literal notranslate"><span class="pre">Factor.__gt__()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.Factor.fillna"><code class="docutils literal notranslate"><span class="pre">Factor.fillna()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.Factor.mean"><code class="docutils literal notranslate"><span class="pre">Factor.mean()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.Factor.stddev"><code class="docutils literal notranslate"><span class="pre">Factor.stddev()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.Factor.max"><code class="docutils literal notranslate"><span class="pre">Factor.max()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.Factor.min"><code class="docutils literal notranslate"><span class="pre">Factor.min()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.Factor.median"><code class="docutils literal notranslate"><span class="pre">Factor.median()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.Factor.sum"><code class="docutils literal notranslate"><span class="pre">Factor.sum()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.Term"><code class="docutils literal notranslate"><span class="pre">Term</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.Term.graph_repr"><code class="docutils literal notranslate"><span class="pre">Term.graph_repr()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.Term.recursive_repr"><code class="docutils literal notranslate"><span class="pre">Term.recursive_repr()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.data.DataSet"><code class="docutils literal notranslate"><span class="pre">DataSet</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.data.DataSet.get_column"><code class="docutils literal notranslate"><span class="pre">DataSet.get_column()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.data.Column"><code class="docutils literal notranslate"><span class="pre">Column</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.data.Column.bind"><code class="docutils literal notranslate"><span class="pre">Column.bind()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.data.BoundColumn"><code class="docutils literal notranslate"><span class="pre">BoundColumn</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.data.BoundColumn.dtype"><code class="docutils literal notranslate"><span class="pre">BoundColumn.dtype</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.data.BoundColumn.latest"><code class="docutils literal notranslate"><span class="pre">BoundColumn.latest</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.data.BoundColumn.dataset"><code class="docutils literal notranslate"><span class="pre">BoundColumn.dataset</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.data.BoundColumn.name"><code class="docutils literal notranslate"><span class="pre">BoundColumn.name</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.data.BoundColumn.metadata"><code class="docutils literal notranslate"><span class="pre">BoundColumn.metadata</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.data.BoundColumn.currency_aware"><code class="docutils literal notranslate"><span class="pre">BoundColumn.currency_aware</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id3"><code class="docutils literal notranslate"><span class="pre">BoundColumn.currency_aware</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.data.BoundColumn.currency_conversion"><code class="docutils literal notranslate"><span class="pre">BoundColumn.currency_conversion</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id4"><code class="docutils literal notranslate"><span class="pre">BoundColumn.dataset</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.data.BoundColumn.fx"><code class="docutils literal notranslate"><span class="pre">BoundColumn.fx()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.data.BoundColumn.graph_repr"><code class="docutils literal notranslate"><span class="pre">BoundColumn.graph_repr()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id5"><code class="docutils literal notranslate"><span class="pre">BoundColumn.metadata</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id6"><code class="docutils literal notranslate"><span class="pre">BoundColumn.name</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.data.BoundColumn.qualname"><code class="docutils literal notranslate"><span class="pre">BoundColumn.qualname</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.data.BoundColumn.recursive_repr"><code class="docutils literal notranslate"><span class="pre">BoundColumn.recursive_repr()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.data.BoundColumn.specialize"><code class="docutils literal notranslate"><span class="pre">BoundColumn.specialize()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.data.BoundColumn.unspecialize"><code class="docutils literal notranslate"><span class="pre">BoundColumn.unspecialize()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.data.DataSetFamily"><code class="docutils literal notranslate"><span class="pre">DataSetFamily</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.data.DataSetFamily.slice"><code class="docutils literal notranslate"><span class="pre">DataSetFamily.slice()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.data.EquityPricing"><code class="docutils literal notranslate"><span class="pre">EquityPricing</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.data.EquityPricing.close"><code class="docutils literal notranslate"><span class="pre">EquityPricing.close</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.data.EquityPricing.high"><code class="docutils literal notranslate"><span class="pre">EquityPricing.high</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.data.EquityPricing.low"><code class="docutils literal notranslate"><span class="pre">EquityPricing.low</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.data.EquityPricing.open"><code class="docutils literal notranslate"><span class="pre">EquityPricing.open</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.data.EquityPricing.volume"><code class="docutils literal notranslate"><span class="pre">EquityPricing.volume</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#built-in-factors">Built-in Factors</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.factors.AverageDollarVolume"><code class="docutils literal notranslate"><span class="pre">AverageDollarVolume</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.factors.AverageDollarVolume.compute"><code class="docutils literal notranslate"><span class="pre">AverageDollarVolume.compute()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.factors.BollingerBands"><code class="docutils literal notranslate"><span class="pre">BollingerBands</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.factors.BollingerBands.compute"><code class="docutils literal notranslate"><span class="pre">BollingerBands.compute()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.factors.BusinessDaysSincePreviousEvent"><code class="docutils literal notranslate"><span class="pre">BusinessDaysSincePreviousEvent</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.factors.BusinessDaysSincePreviousEvent.dtype"><code class="docutils literal notranslate"><span class="pre">BusinessDaysSincePreviousEvent.dtype</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.factors.BusinessDaysUntilNextEvent"><code class="docutils literal notranslate"><span class="pre">BusinessDaysUntilNextEvent</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.factors.BusinessDaysUntilNextEvent.dtype"><code class="docutils literal notranslate"><span class="pre">BusinessDaysUntilNextEvent.dtype</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.factors.DailyReturns"><code class="docutils literal notranslate"><span class="pre">DailyReturns</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.factors.ExponentialWeightedMovingAverage"><code class="docutils literal notranslate"><span class="pre">ExponentialWeightedMovingAverage</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.factors.ExponentialWeightedMovingAverage.compute"><code class="docutils literal notranslate"><span class="pre">ExponentialWeightedMovingAverage.compute()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.factors.ExponentialWeightedMovingStdDev"><code class="docutils literal notranslate"><span class="pre">ExponentialWeightedMovingStdDev</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.factors.ExponentialWeightedMovingStdDev.compute"><code class="docutils literal notranslate"><span class="pre">ExponentialWeightedMovingStdDev.compute()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.factors.Latest"><code class="docutils literal notranslate"><span class="pre">Latest</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.factors.Latest.compute"><code class="docutils literal notranslate"><span class="pre">Latest.compute()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.factors.MACDSignal"><code class="docutils literal notranslate"><span class="pre">MACDSignal</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.factors.MaxDrawdown"><code class="docutils literal notranslate"><span class="pre">MaxDrawdown</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.factors.MaxDrawdown.compute"><code class="docutils literal notranslate"><span class="pre">MaxDrawdown.compute()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.factors.Returns"><code class="docutils literal notranslate"><span class="pre">Returns</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.factors.Returns.compute"><code class="docutils literal notranslate"><span class="pre">Returns.compute()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.factors.RollingPearson"><code class="docutils literal notranslate"><span class="pre">RollingPearson</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.factors.RollingPearson.compute"><code class="docutils literal notranslate"><span class="pre">RollingPearson.compute()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.factors.RollingSpearman"><code class="docutils literal notranslate"><span class="pre">RollingSpearman</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.factors.RollingSpearman.compute"><code class="docutils literal notranslate"><span class="pre">RollingSpearman.compute()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.factors.RollingLinearRegressionOfReturns"><code class="docutils literal notranslate"><span class="pre">RollingLinearRegressionOfReturns</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.factors.RollingPearsonOfReturns"><code class="docutils literal notranslate"><span class="pre">RollingPearsonOfReturns</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.factors.RollingSpearmanOfReturns"><code class="docutils literal notranslate"><span class="pre">RollingSpearmanOfReturns</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.factors.SimpleBeta"><code class="docutils literal notranslate"><span class="pre">SimpleBeta</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.factors.SimpleBeta.compute"><code class="docutils literal notranslate"><span class="pre">SimpleBeta.compute()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.factors.SimpleBeta.dtype"><code class="docutils literal notranslate"><span class="pre">SimpleBeta.dtype</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.factors.SimpleBeta.graph_repr"><code class="docutils literal notranslate"><span class="pre">SimpleBeta.graph_repr()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.factors.SimpleBeta.target"><code class="docutils literal notranslate"><span class="pre">SimpleBeta.target</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.factors.RSI"><code class="docutils literal notranslate"><span class="pre">RSI</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.factors.RSI.compute"><code class="docutils literal notranslate"><span class="pre">RSI.compute()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.factors.SimpleMovingAverage"><code class="docutils literal notranslate"><span class="pre">SimpleMovingAverage</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.factors.SimpleMovingAverage.compute"><code class="docutils literal notranslate"><span class="pre">SimpleMovingAverage.compute()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.factors.VWAP"><code class="docutils literal notranslate"><span class="pre">VWAP</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.factors.WeightedAverageValue"><code class="docutils literal notranslate"><span class="pre">WeightedAverageValue</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.factors.WeightedAverageValue.compute"><code class="docutils literal notranslate"><span class="pre">WeightedAverageValue.compute()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.factors.PercentChange"><code class="docutils literal notranslate"><span class="pre">PercentChange</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.factors.PercentChange.compute"><code class="docutils literal notranslate"><span class="pre">PercentChange.compute()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.factors.PeerCount"><code class="docutils literal notranslate"><span class="pre">PeerCount</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.factors.PeerCount.compute"><code class="docutils literal notranslate"><span class="pre">PeerCount.compute()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#built-in-filters">Built-in Filters</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.filters.All"><code class="docutils literal notranslate"><span class="pre">All</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.filters.All.compute"><code class="docutils literal notranslate"><span class="pre">All.compute()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.filters.AllPresent"><code class="docutils literal notranslate"><span class="pre">AllPresent</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.filters.AllPresent.compute"><code class="docutils literal notranslate"><span class="pre">AllPresent.compute()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.filters.Any"><code class="docutils literal notranslate"><span class="pre">Any</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.filters.Any.compute"><code class="docutils literal notranslate"><span class="pre">Any.compute()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.filters.AtLeastN"><code class="docutils literal notranslate"><span class="pre">AtLeastN</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.filters.AtLeastN.compute"><code class="docutils literal notranslate"><span class="pre">AtLeastN.compute()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.filters.SingleAsset"><code class="docutils literal notranslate"><span class="pre">SingleAsset</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.filters.SingleAsset.graph_repr"><code class="docutils literal notranslate"><span class="pre">SingleAsset.graph_repr()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.filters.StaticAssets"><code class="docutils literal notranslate"><span class="pre">StaticAssets</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.filters.StaticSids"><code class="docutils literal notranslate"><span class="pre">StaticSids</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pipeline-engine">Pipeline Engine</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.engine.PipelineEngine"><code class="docutils literal notranslate"><span class="pre">PipelineEngine</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.engine.PipelineEngine.run_pipeline"><code class="docutils literal notranslate"><span class="pre">PipelineEngine.run_pipeline()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.engine.PipelineEngine.run_chunked_pipeline"><code class="docutils literal notranslate"><span class="pre">PipelineEngine.run_chunked_pipeline()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.engine.SimplePipelineEngine"><code class="docutils literal notranslate"><span class="pre">SimplePipelineEngine</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.engine.SimplePipelineEngine.__init__"><code class="docutils literal notranslate"><span class="pre">SimplePipelineEngine.__init__()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.engine.SimplePipelineEngine.run_chunked_pipeline"><code class="docutils literal notranslate"><span class="pre">SimplePipelineEngine.run_chunked_pipeline()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.engine.SimplePipelineEngine.run_pipeline"><code class="docutils literal notranslate"><span class="pre">SimplePipelineEngine.run_pipeline()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.engine.default_populate_initial_workspace"><code class="docutils literal notranslate"><span class="pre">default_populate_initial_workspace()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#data-loaders">Data Loaders</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.loaders.base.PipelineLoader"><code class="docutils literal notranslate"><span class="pre">PipelineLoader</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.loaders.base.PipelineLoader.load_adjusted_array"><code class="docutils literal notranslate"><span class="pre">PipelineLoader.load_adjusted_array()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.loaders.base.PipelineLoader.__init__"><code class="docutils literal notranslate"><span class="pre">PipelineLoader.__init__()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.loaders.frame.DataFrameLoader"><code class="docutils literal notranslate"><span class="pre">DataFrameLoader</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.loaders.frame.DataFrameLoader.__init__"><code class="docutils literal notranslate"><span class="pre">DataFrameLoader.__init__()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.loaders.frame.DataFrameLoader.format_adjustments"><code class="docutils literal notranslate"><span class="pre">DataFrameLoader.format_adjustments()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.loaders.frame.DataFrameLoader.load_adjusted_array"><code class="docutils literal notranslate"><span class="pre">DataFrameLoader.load_adjusted_array()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.loaders.equity_pricing_loader.EquityPricingLoader"><code class="docutils literal notranslate"><span class="pre">EquityPricingLoader</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.loaders.equity_pricing_loader.EquityPricingLoader.__init__"><code class="docutils literal notranslate"><span class="pre">EquityPricingLoader.__init__()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.loaders.equity_pricing_loader.USEquityPricingLoader"><code class="docutils literal notranslate"><span class="pre">USEquityPricingLoader</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.loaders.events.EventsLoader"><code class="docutils literal notranslate"><span class="pre">EventsLoader</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.loaders.events.EventsLoader.__init__"><code class="docutils literal notranslate"><span class="pre">EventsLoader.__init__()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.loaders.earnings_estimates.EarningsEstimatesLoader"><code class="docutils literal notranslate"><span class="pre">EarningsEstimatesLoader</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.pipeline.loaders.earnings_estimates.EarningsEstimatesLoader.__init__"><code class="docutils literal notranslate"><span class="pre">EarningsEstimatesLoader.__init__()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#exchange-and-asset-metadata">Exchange and Asset Metadata</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.assets.ExchangeInfo"><code class="docutils literal notranslate"><span class="pre">ExchangeInfo</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.assets.ExchangeInfo.name"><code class="docutils literal notranslate"><span class="pre">ExchangeInfo.name</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.assets.ExchangeInfo.canonical_name"><code class="docutils literal notranslate"><span class="pre">ExchangeInfo.canonical_name</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.assets.ExchangeInfo.country_code"><code class="docutils literal notranslate"><span class="pre">ExchangeInfo.country_code</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.assets.ExchangeInfo.calendar"><code class="docutils literal notranslate"><span class="pre">ExchangeInfo.calendar</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id7"><code class="docutils literal notranslate"><span class="pre">ExchangeInfo.calendar</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.assets.Asset"><code class="docutils literal notranslate"><span class="pre">Asset</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.assets.Asset.sid"><code class="docutils literal notranslate"><span class="pre">Asset.sid</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.assets.Asset.symbol"><code class="docutils literal notranslate"><span class="pre">Asset.symbol</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.assets.Asset.asset_name"><code class="docutils literal notranslate"><span class="pre">Asset.asset_name</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.assets.Asset.exchange"><code class="docutils literal notranslate"><span class="pre">Asset.exchange</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.assets.Asset.exchange_full"><code class="docutils literal notranslate"><span class="pre">Asset.exchange_full</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.assets.Asset.exchange_info"><code class="docutils literal notranslate"><span class="pre">Asset.exchange_info</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.assets.Asset.country_code"><code class="docutils literal notranslate"><span class="pre">Asset.country_code</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.assets.Asset.start_date"><code class="docutils literal notranslate"><span class="pre">Asset.start_date</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.assets.Asset.end_date"><code class="docutils literal notranslate"><span class="pre">Asset.end_date</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.assets.Asset.tick_size"><code class="docutils literal notranslate"><span class="pre">Asset.tick_size</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.assets.Asset.auto_close_date"><code class="docutils literal notranslate"><span class="pre">Asset.auto_close_date</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.assets.Asset.from_dict"><code class="docutils literal notranslate"><span class="pre">Asset.from_dict()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.assets.Asset.is_alive_for_session"><code class="docutils literal notranslate"><span class="pre">Asset.is_alive_for_session()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.assets.Asset.is_exchange_open"><code class="docutils literal notranslate"><span class="pre">Asset.is_exchange_open()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.assets.Asset.to_dict"><code class="docutils literal notranslate"><span class="pre">Asset.to_dict()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.assets.Equity"><code class="docutils literal notranslate"><span class="pre">Equity</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.assets.Future"><code class="docutils literal notranslate"><span class="pre">Future</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.assets.Future.to_dict"><code class="docutils literal notranslate"><span class="pre">Future.to_dict()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.assets.AssetConvertible"><code class="docutils literal notranslate"><span class="pre">AssetConvertible</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#trading-calendar-api">Trading Calendar API</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#data-api">Data API</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#writers">Writers</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.data.bcolz_daily_bars.BcolzDailyBarWriter"><code class="docutils literal notranslate"><span class="pre">BcolzDailyBarWriter</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.data.bcolz_daily_bars.BcolzDailyBarWriter.write"><code class="docutils literal notranslate"><span class="pre">BcolzDailyBarWriter.write()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.data.bcolz_daily_bars.BcolzDailyBarWriter.write_csvs"><code class="docutils literal notranslate"><span class="pre">BcolzDailyBarWriter.write_csvs()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.data.adjustments.SQLiteAdjustmentWriter"><code class="docutils literal notranslate"><span class="pre">SQLiteAdjustmentWriter</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.data.adjustments.SQLiteAdjustmentWriter.calc_dividend_ratios"><code class="docutils literal notranslate"><span class="pre">SQLiteAdjustmentWriter.calc_dividend_ratios()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.data.adjustments.SQLiteAdjustmentWriter.write"><code class="docutils literal notranslate"><span class="pre">SQLiteAdjustmentWriter.write()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.data.adjustments.SQLiteAdjustmentWriter.write_dividend_data"><code class="docutils literal notranslate"><span class="pre">SQLiteAdjustmentWriter.write_dividend_data()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.data.adjustments.SQLiteAdjustmentWriter.write_dividend_payouts"><code class="docutils literal notranslate"><span class="pre">SQLiteAdjustmentWriter.write_dividend_payouts()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.assets.AssetDBWriter"><code class="docutils literal notranslate"><span class="pre">AssetDBWriter</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.assets.AssetDBWriter.init_db"><code class="docutils literal notranslate"><span class="pre">AssetDBWriter.init_db()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.assets.AssetDBWriter.write"><code class="docutils literal notranslate"><span class="pre">AssetDBWriter.write()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.assets.AssetDBWriter.write_direct"><code class="docutils literal notranslate"><span class="pre">AssetDBWriter.write_direct()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#readers">Readers</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.data.bcolz_daily_bars.BcolzDailyBarReader"><code class="docutils literal notranslate"><span class="pre">BcolzDailyBarReader</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.data.bcolz_daily_bars.BcolzDailyBarReader.attributes"><code class="docutils literal notranslate"><span class="pre">BcolzDailyBarReader.attributes</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.data.bcolz_daily_bars.BcolzDailyBarReader.first_row"><code class="docutils literal notranslate"><span class="pre">BcolzDailyBarReader.first_row</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.data.bcolz_daily_bars.BcolzDailyBarReader.last_row"><code class="docutils literal notranslate"><span class="pre">BcolzDailyBarReader.last_row</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.data.bcolz_daily_bars.BcolzDailyBarReader.calendar_offset"><code class="docutils literal notranslate"><span class="pre">BcolzDailyBarReader.calendar_offset</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.data.bcolz_daily_bars.BcolzDailyBarReader.start_session_ns"><code class="docutils literal notranslate"><span class="pre">BcolzDailyBarReader.start_session_ns</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.data.bcolz_daily_bars.BcolzDailyBarReader.end_session_ns"><code class="docutils literal notranslate"><span class="pre">BcolzDailyBarReader.end_session_ns</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.data.bcolz_daily_bars.BcolzDailyBarReader.calendar_name"><code class="docutils literal notranslate"><span class="pre">BcolzDailyBarReader.calendar_name</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.data.bcolz_daily_bars.BcolzDailyBarReader.currency_codes"><code class="docutils literal notranslate"><span class="pre">BcolzDailyBarReader.currency_codes()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.data.bcolz_daily_bars.BcolzDailyBarReader.get_last_traded_dt"><code class="docutils literal notranslate"><span class="pre">BcolzDailyBarReader.get_last_traded_dt()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.data.bcolz_daily_bars.BcolzDailyBarReader.get_value"><code class="docutils literal notranslate"><span class="pre">BcolzDailyBarReader.get_value()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.data.bcolz_daily_bars.BcolzDailyBarReader.last_available_dt"><code class="docutils literal notranslate"><span class="pre">BcolzDailyBarReader.last_available_dt</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.data.bcolz_daily_bars.BcolzDailyBarReader.load_raw_arrays"><code class="docutils literal notranslate"><span class="pre">BcolzDailyBarReader.load_raw_arrays()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.data.bcolz_daily_bars.BcolzDailyBarReader.sid_day_index"><code class="docutils literal notranslate"><span class="pre">BcolzDailyBarReader.sid_day_index()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.data.adjustments.SQLiteAdjustmentReader"><code class="docutils literal notranslate"><span class="pre">SQLiteAdjustmentReader</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.data.adjustments.SQLiteAdjustmentReader.load_adjustments"><code class="docutils literal notranslate"><span class="pre">SQLiteAdjustmentReader.load_adjustments()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.data.adjustments.SQLiteAdjustmentReader.unpack_db_to_component_dfs"><code class="docutils literal notranslate"><span class="pre">SQLiteAdjustmentReader.unpack_db_to_component_dfs()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.assets.AssetFinder"><code class="docutils literal notranslate"><span class="pre">AssetFinder</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.assets.AssetFinder.equities_sids"><code class="docutils literal notranslate"><span class="pre">AssetFinder.equities_sids</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.assets.AssetFinder.equities_sids_for_country_code"><code class="docutils literal notranslate"><span class="pre">AssetFinder.equities_sids_for_country_code()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.assets.AssetFinder.equities_sids_for_exchange_name"><code class="docutils literal notranslate"><span class="pre">AssetFinder.equities_sids_for_exchange_name()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.assets.AssetFinder.futures_sids"><code class="docutils literal notranslate"><span class="pre">AssetFinder.futures_sids</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.assets.AssetFinder.get_supplementary_field"><code class="docutils literal notranslate"><span class="pre">AssetFinder.get_supplementary_field()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.assets.AssetFinder.group_by_type"><code class="docutils literal notranslate"><span class="pre">AssetFinder.group_by_type()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.assets.AssetFinder.lifetimes"><code class="docutils literal notranslate"><span class="pre">AssetFinder.lifetimes()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.assets.AssetFinder.lookup_asset_types"><code class="docutils literal notranslate"><span class="pre">AssetFinder.lookup_asset_types()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.assets.AssetFinder.lookup_future_symbol"><code class="docutils literal notranslate"><span class="pre">AssetFinder.lookup_future_symbol()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.assets.AssetFinder.lookup_generic"><code class="docutils literal notranslate"><span class="pre">AssetFinder.lookup_generic()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.assets.AssetFinder.lookup_symbol"><code class="docutils literal notranslate"><span class="pre">AssetFinder.lookup_symbol()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.assets.AssetFinder.lookup_symbols"><code class="docutils literal notranslate"><span class="pre">AssetFinder.lookup_symbols()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.assets.AssetFinder.retrieve_all"><code class="docutils literal notranslate"><span class="pre">AssetFinder.retrieve_all()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.assets.AssetFinder.retrieve_asset"><code class="docutils literal notranslate"><span class="pre">AssetFinder.retrieve_asset()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.assets.AssetFinder.retrieve_equities"><code class="docutils literal notranslate"><span class="pre">AssetFinder.retrieve_equities()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.assets.AssetFinder.retrieve_futures_contracts"><code class="docutils literal notranslate"><span class="pre">AssetFinder.retrieve_futures_contracts()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.assets.AssetFinder.sids"><code class="docutils literal notranslate"><span class="pre">AssetFinder.sids</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.data.data_portal.DataPortal"><code class="docutils literal notranslate"><span class="pre">DataPortal</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.data.data_portal.DataPortal.get_adjusted_value"><code class="docutils literal notranslate"><span class="pre">DataPortal.get_adjusted_value()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.data.data_portal.DataPortal.get_adjustments"><code class="docutils literal notranslate"><span class="pre">DataPortal.get_adjustments()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.data.data_portal.DataPortal.get_current_future_chain"><code class="docutils literal notranslate"><span class="pre">DataPortal.get_current_future_chain()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.data.data_portal.DataPortal.get_fetcher_assets"><code class="docutils literal notranslate"><span class="pre">DataPortal.get_fetcher_assets()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.data.data_portal.DataPortal.get_history_window"><code class="docutils literal notranslate"><span class="pre">DataPortal.get_history_window()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.data.data_portal.DataPortal.get_last_traded_dt"><code class="docutils literal notranslate"><span class="pre">DataPortal.get_last_traded_dt()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.data.data_portal.DataPortal.get_scalar_asset_spot_value"><code class="docutils literal notranslate"><span class="pre">DataPortal.get_scalar_asset_spot_value()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.data.data_portal.DataPortal.get_splits"><code class="docutils literal notranslate"><span class="pre">DataPortal.get_splits()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.data.data_portal.DataPortal.get_spot_value"><code class="docutils literal notranslate"><span class="pre">DataPortal.get_spot_value()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.data.data_portal.DataPortal.get_stock_dividends"><code class="docutils literal notranslate"><span class="pre">DataPortal.get_stock_dividends()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.data.data_portal.DataPortal.handle_extra_source"><code class="docutils literal notranslate"><span class="pre">DataPortal.handle_extra_source()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.sources.benchmark_source.BenchmarkSource"><code class="docutils literal notranslate"><span class="pre">BenchmarkSource</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.sources.benchmark_source.BenchmarkSource.daily_returns"><code class="docutils literal notranslate"><span class="pre">BenchmarkSource.daily_returns()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.sources.benchmark_source.BenchmarkSource.get_range"><code class="docutils literal notranslate"><span class="pre">BenchmarkSource.get_range()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.sources.benchmark_source.BenchmarkSource.get_value"><code class="docutils literal notranslate"><span class="pre">BenchmarkSource.get_value()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bundles">Bundles</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.data.bundles.register"><code class="docutils literal notranslate"><span class="pre">register()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.data.bundles.ingest"><code class="docutils literal notranslate"><span class="pre">ingest()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.data.bundles.load"><code class="docutils literal notranslate"><span class="pre">load()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.data.bundles.unregister"><code class="docutils literal notranslate"><span class="pre">unregister()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.data.bundles.bundles"><code class="docutils literal notranslate"><span class="pre">zipline.data.bundles.bundles</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#risk-metrics">Risk Metrics</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#algorithm-state">Algorithm State</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.ledger.Ledger"><code class="docutils literal notranslate"><span class="pre">Ledger</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.ledger.Ledger.portfolio"><code class="docutils literal notranslate"><span class="pre">Ledger.portfolio</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.ledger.Ledger.account"><code class="docutils literal notranslate"><span class="pre">Ledger.account</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.ledger.Ledger.position_tracker"><code class="docutils literal notranslate"><span class="pre">Ledger.position_tracker</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.ledger.Ledger.todays_returns"><code class="docutils literal notranslate"><span class="pre">Ledger.todays_returns</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.ledger.Ledger.daily_returns_series"><code class="docutils literal notranslate"><span class="pre">Ledger.daily_returns_series</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.ledger.Ledger.daily_returns_array"><code class="docutils literal notranslate"><span class="pre">Ledger.daily_returns_array</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.ledger.Ledger.orders"><code class="docutils literal notranslate"><span class="pre">Ledger.orders()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.ledger.Ledger.override_account_fields"><code class="docutils literal notranslate"><span class="pre">Ledger.override_account_fields()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#id8"><code class="docutils literal notranslate"><span class="pre">Ledger.portfolio</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.ledger.Ledger.process_commission"><code class="docutils literal notranslate"><span class="pre">Ledger.process_commission()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.ledger.Ledger.process_dividends"><code class="docutils literal notranslate"><span class="pre">Ledger.process_dividends()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.ledger.Ledger.process_order"><code class="docutils literal notranslate"><span class="pre">Ledger.process_order()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.ledger.Ledger.process_splits"><code class="docutils literal notranslate"><span class="pre">Ledger.process_splits()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.ledger.Ledger.process_transaction"><code class="docutils literal notranslate"><span class="pre">Ledger.process_transaction()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.ledger.Ledger.transactions"><code class="docutils literal notranslate"><span class="pre">Ledger.transactions()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.ledger.Ledger.update_portfolio"><code class="docutils literal notranslate"><span class="pre">Ledger.update_portfolio()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.protocol.Portfolio"><code class="docutils literal notranslate"><span class="pre">Portfolio</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.protocol.Portfolio.positions"><code class="docutils literal notranslate"><span class="pre">Portfolio.positions</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.protocol.Portfolio.cash"><code class="docutils literal notranslate"><span class="pre">Portfolio.cash</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.protocol.Portfolio.portfolio_value"><code class="docutils literal notranslate"><span class="pre">Portfolio.portfolio_value</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.protocol.Portfolio.starting_cash"><code class="docutils literal notranslate"><span class="pre">Portfolio.starting_cash</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.protocol.Portfolio.current_portfolio_weights"><code class="docutils literal notranslate"><span class="pre">Portfolio.current_portfolio_weights</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.protocol.Account"><code class="docutils literal notranslate"><span class="pre">Account</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.ledger.PositionTracker"><code class="docutils literal notranslate"><span class="pre">PositionTracker</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.ledger.PositionTracker.earn_dividends"><code class="docutils literal notranslate"><span class="pre">PositionTracker.earn_dividends()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.ledger.PositionTracker.handle_splits"><code class="docutils literal notranslate"><span class="pre">PositionTracker.handle_splits()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.ledger.PositionTracker.pay_dividends"><code class="docutils literal notranslate"><span class="pre">PositionTracker.pay_dividends()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.ledger.PositionTracker.stats"><code class="docutils literal notranslate"><span class="pre">PositionTracker.stats</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance._finance_ext.PositionStats"><code class="docutils literal notranslate"><span class="pre">PositionStats</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance._finance_ext.PositionStats.gross_exposure"><code class="docutils literal notranslate"><span class="pre">PositionStats.gross_exposure</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance._finance_ext.PositionStats.gross_value"><code class="docutils literal notranslate"><span class="pre">PositionStats.gross_value</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance._finance_ext.PositionStats.long_exposure"><code class="docutils literal notranslate"><span class="pre">PositionStats.long_exposure</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance._finance_ext.PositionStats.long_value"><code class="docutils literal notranslate"><span class="pre">PositionStats.long_value</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance._finance_ext.PositionStats.net_exposure"><code class="docutils literal notranslate"><span class="pre">PositionStats.net_exposure</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance._finance_ext.PositionStats.net_value"><code class="docutils literal notranslate"><span class="pre">PositionStats.net_value</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance._finance_ext.PositionStats.short_exposure"><code class="docutils literal notranslate"><span class="pre">PositionStats.short_exposure</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance._finance_ext.PositionStats.short_value"><code class="docutils literal notranslate"><span class="pre">PositionStats.short_value</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance._finance_ext.PositionStats.longs_count"><code class="docutils literal notranslate"><span class="pre">PositionStats.longs_count</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance._finance_ext.PositionStats.shorts_count"><code class="docutils literal notranslate"><span class="pre">PositionStats.shorts_count</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance._finance_ext.PositionStats.position_exposure_array"><code class="docutils literal notranslate"><span class="pre">PositionStats.position_exposure_array</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance._finance_ext.PositionStats.position_exposure_series"><code class="docutils literal notranslate"><span class="pre">PositionStats.position_exposure_series</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#built-in-metrics">Built-in Metrics</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.metrics.metric.SimpleLedgerField"><code class="docutils literal notranslate"><span class="pre">SimpleLedgerField</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.metrics.metric.DailyLedgerField"><code class="docutils literal notranslate"><span class="pre">DailyLedgerField</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.metrics.metric.StartOfPeriodLedgerField"><code class="docutils literal notranslate"><span class="pre">StartOfPeriodLedgerField</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id9"><code class="docutils literal notranslate"><span class="pre">StartOfPeriodLedgerField</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.metrics.metric.Returns"><code class="docutils literal notranslate"><span class="pre">Returns</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.metrics.metric.BenchmarkReturnsAndVolatility"><code class="docutils literal notranslate"><span class="pre">BenchmarkReturnsAndVolatility</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.metrics.metric.CashFlow"><code class="docutils literal notranslate"><span class="pre">CashFlow</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.metrics.metric.Orders"><code class="docutils literal notranslate"><span class="pre">Orders</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.metrics.metric.Transactions"><code class="docutils literal notranslate"><span class="pre">Transactions</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.metrics.metric.Positions"><code class="docutils literal notranslate"><span class="pre">Positions</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.metrics.metric.ReturnsStatistic"><code class="docutils literal notranslate"><span class="pre">ReturnsStatistic</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.metrics.metric.AlphaBeta"><code class="docutils literal notranslate"><span class="pre">AlphaBeta</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.metrics.metric.MaxLeverage"><code class="docutils literal notranslate"><span class="pre">MaxLeverage</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#metrics-sets">Metrics Sets</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.metrics.register"><code class="docutils literal notranslate"><span class="pre">register()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.metrics.load"><code class="docutils literal notranslate"><span class="pre">load()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.finance.metrics.unregister"><code class="docutils literal notranslate"><span class="pre">unregister()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.data.finance.metrics.metrics_sets"><code class="docutils literal notranslate"><span class="pre">zipline.data.finance.metrics.metrics_sets</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#utilities">Utilities</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#caching">Caching</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.utils.cache.CachedObject"><code class="docutils literal notranslate"><span class="pre">CachedObject</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.utils.cache.ExpiringCache"><code class="docutils literal notranslate"><span class="pre">ExpiringCache</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.utils.cache.dataframe_cache"><code class="docutils literal notranslate"><span class="pre">dataframe_cache</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.utils.cache.working_file"><code class="docutils literal notranslate"><span class="pre">working_file</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.utils.cache.working_dir"><code class="docutils literal notranslate"><span class="pre">working_dir</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#command-line">Command Line</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#zipline.utils.cli.maybe_show_progress"><code class="docutils literal notranslate"><span class="pre">maybe_show_progress()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">
  <div class="tocsection sourcelink">
    <a href="_sources/api-reference.rst.txt">
      <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">
  <p class="copyright">
    
      © Copyright 2020, Quantopian Inc..
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">
  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.0.1.
    <br/>
  </p>
</div>
      
    </div>
  
  
    <div class="footer-items__end">
      
        <div class="footer-item"><p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.13.3.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>